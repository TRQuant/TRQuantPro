# TRQuant å‰ç«¯ç³»ç»Ÿä¼˜åŒ–è§„åˆ’

> **åˆ›å»ºæ—¶é—´**: 2024-12-17  
> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **çŠ¶æ€**: è§„åˆ’ä¸­

---

## ğŸ“Š ä¸€ã€ç³»ç»Ÿç°çŠ¶åˆ†æ

### 1.1 ä¸‰å¤§å‰ç«¯ç³»ç»Ÿå®šä½

| ç³»ç»Ÿ | å®šä½ | ç”¨æˆ·åœºæ™¯ | å½“å‰æŠ€æœ¯ | å®Œæˆåº¦ |
|------|------|---------|---------|--------|
| **æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ** | æ·±åº¦ç ”ç©¶ç«¯ | ä¸“ä¸šé‡åŒ–åˆ†æã€ç­–ç•¥å¼€å‘ã€å›æµ‹è°ƒè¯• | PyQt6 | 85% |
| **Cursoræ‰©å±•** | AIå·¥ä½œæµç«¯ | 9æ­¥æŠ•èµ„å·¥ä½œæµã€AIè¾…åŠ©ç­–ç•¥ç”Ÿæˆ | TypeScript + React | 90% |
| **æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ** | çŠ¶æ€ç›‘æ§ç«¯ | å®æ—¶çŠ¶æ€ã€ç»“æœå±•ç¤ºã€æ–‡ä»¶åŒæ­¥ | Flask + Jinja2 | 70% |

### 1.2 å½“å‰ä»£ç è§„æ¨¡

```
TRQuant/
â”œâ”€â”€ gui/widgets/           # 40ä¸ªPyQt6ç»„ä»¶
â”œâ”€â”€ extension/src/views/   # 10ä¸ªTypeScriptè§†å›¾
â”œâ”€â”€ dashboard/             # 3ä¸ªFlaskæ¨¡å—
â””â”€â”€ mcp_servers/           # 39ä¸ªMCPæœåŠ¡å™¨
```

### 1.3 ç°å­˜é—®é¢˜

1. **æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ**
   - å›¾è¡¨èƒ½åŠ›æœ‰é™ï¼ˆåŸç”ŸQPainterï¼‰
   - å®æ—¶æ•°æ®æ›´æ–°æ€§èƒ½ä¸è¶³
   - ç¼ºå°‘ä¸“ä¸šKçº¿å›¾å’ŒæŠ€æœ¯æŒ‡æ ‡
   
2. **Cursoræ‰©å±•**
   - WebViewæ€§èƒ½æœ‰ç“¶é¢ˆ
   - EChartsé…ç½®å¤æ‚
   - çŠ¶æ€æŒä¹…åŒ–ä¸å®Œå–„
   
3. **æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ**
   - ä»…æ”¯æŒé™æ€é¡µé¢åˆ·æ–°
   - ç¼ºå°‘å®æ—¶çŠ¶æ€æ¨é€
   - UIäº¤äº’èƒ½åŠ›æœ‰é™

---

## ğŸ¯ äºŒã€ä¼˜åŒ–ç›®æ ‡

### 2.1 æ€»ä½“ç›®æ ‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRQuant å‰ç«¯æ¶æ„ v2.0                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ  â”‚  â”‚ Cursoræ‰©å±•   â”‚  â”‚ çŠ¶æ€ç›‘æ§ç³»ç»Ÿ  â”‚      â”‚
â”‚  â”‚  PyQt6 +     â”‚  â”‚ TypeScript + â”‚  â”‚  Streamlit   â”‚      â”‚
â”‚  â”‚  PyQtGraph   â”‚  â”‚ React/EChartsâ”‚  â”‚  + WebSocket â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ â€¢ ä¸“ä¸šå›¾è¡¨   â”‚  â”‚ â€¢ AIå·¥ä½œæµ   â”‚  â”‚ â€¢ å®æ—¶çŠ¶æ€   â”‚      â”‚
â”‚  â”‚ â€¢ ç­–ç•¥å¼€å‘   â”‚  â”‚ â€¢ ç­–ç•¥ç”Ÿæˆ   â”‚  â”‚ â€¢ æ‰§è¡Œç›‘æ§   â”‚      â”‚
â”‚  â”‚ â€¢ æ·±åº¦åˆ†æ   â”‚  â”‚ â€¢ å¸‚åœºåˆ†æ   â”‚  â”‚ â€¢ ç»“æœå±•ç¤º   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                 â”‚                 â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                           â”‚                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                   â”‚  MCPç»Ÿä¸€æ¥å£   â”‚                         â”‚
â”‚                   â”‚  (6ä¸ªæœåŠ¡å™¨)   â”‚                         â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å„ç³»ç»Ÿä¼˜åŒ–ç›®æ ‡

| ç³»ç»Ÿ | ä¼˜åŒ–ç›®æ ‡ | ç›®æ ‡å®Œæˆåº¦ |
|------|---------|-----------|
| **æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ** | ä¸“ä¸šçº§å›¾è¡¨ã€å®æ—¶æ•°æ®ã€ç­–ç•¥è°ƒè¯• | 95% |
| **Cursoræ‰©å±•** | çŠ¶æ€æŒä¹…åŒ–ã€æ€§èƒ½ä¼˜åŒ–ã€äº¤äº’å¢å¼º | 98% |
| **çŠ¶æ€ç›‘æ§ç³»ç»Ÿ** | å®æ—¶æ¨é€ã€æ‰§è¡Œç›‘æ§ã€ç»“æœå¯è§†åŒ– | 90% |

---

## ğŸ› ï¸ ä¸‰ã€æŠ€æœ¯æ–¹æ¡ˆé€‰å‹

### 3.1 æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ - PyQt6 + PyQtGraph

#### æŠ€æœ¯é€‰å‹ç†ç”±

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‰æ‹© |
|------|------|------|------|
| **PyQt6 + PyQtGraph** | é«˜æ€§èƒ½å®æ—¶å›¾è¡¨ã€åŸç”Ÿé›†æˆã€NumPyå…¼å®¹ | å­¦ä¹ æ›²çº¿ | âœ… æ¨è |
| PyQt6 + Matplotlib | å›¾è¡¨ä¸°å¯Œã€æˆç†Ÿ | å®æ—¶æ€§èƒ½å·® | âŒ |
| PyQt6 + Plotly | äº¤äº’æ€§å¥½ | éœ€è¦WebView | âŒ |

#### å…·ä½“æŠ€æœ¯æ ˆ

```python
# æ ¸å¿ƒæ¡†æ¶
PyQt6 >= 6.6.0          # GUIæ¡†æ¶
PyQtGraph >= 0.13.0     # é«˜æ€§èƒ½å®æ—¶å›¾è¡¨
NumPy >= 1.24.0         # æ•°æ®å¤„ç†

# å›¾è¡¨ç»„ä»¶
- CandlestickItem       # Kçº¿å›¾
- PlotWidget            # æ”¶ç›Šæ›²çº¿
- ImageItem             # çƒ­åŠ›å›¾
- ScatterPlotItem       # æ•£ç‚¹å›¾

# æ•°æ®ç»‘å®š
- QThread               # å¼‚æ­¥ä»»åŠ¡
- pyqtSignal            # ä¿¡å·æ§½æœºåˆ¶
- QTimer                # å®šæ—¶åˆ·æ–°
```

#### æ–°å¢ç»„ä»¶è§„åˆ’

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| **Kçº¿å›¾** | `gui/components/charts/candlestick.py` | ä¸“ä¸šKçº¿ã€æŠ€æœ¯æŒ‡æ ‡ | é«˜ |
| **æ”¶ç›Šæ›²çº¿** | `gui/components/charts/equity_curve.py` | å®æ—¶æ”¶ç›Šã€å›æ’¤ | é«˜ |
| **å› å­çƒ­åŠ›å›¾** | `gui/components/charts/factor_heatmap.py` | å› å­æš´éœ²åˆ†æ | ä¸­ |
| **æŒä»“åˆ†å¸ƒ** | `gui/components/charts/position_pie.py` | æŒä»“é¥¼å›¾ | ä¸­ |

---

### 3.2 Cursoræ‰©å±• - TypeScript + React + ECharts

#### æŠ€æœ¯é€‰å‹ç†ç”±

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‰æ‹© |
|------|------|------|------|
| **TypeScript + React** | VS CodeåŸç”Ÿã€ç±»å‹å®‰å…¨ã€ç”Ÿæ€ä¸°å¯Œ | æ„å»ºå¤æ‚ | âœ… å½“å‰æ–¹æ¡ˆ |
| Vue + ECharts | è½»é‡ã€å“åº”å¼ | éåŸç”Ÿ | âŒ |
| Svelte | ç¼–è¯‘ä¼˜åŒ– | ç”Ÿæ€è¾ƒå° | âŒ |

#### å…·ä½“æŠ€æœ¯æ ˆ

```typescript
// æ ¸å¿ƒæ¡†æ¶
"@types/vscode": "^1.85.0"  // VS Code API
"typescript": "^5.3.0"       // ç±»å‹ç³»ç»Ÿ
"esbuild": "^0.19.0"         // æ„å»ºå·¥å…·

// UIç»„ä»¶
"echarts": "^5.4.0"          // å›¾è¡¨åº“
"react": "^18.2.0"           // UIæ¡†æ¶ï¼ˆWebViewï¼‰
"react-dom": "^18.2.0"

// çŠ¶æ€ç®¡ç†
- Context API               // å…¨å±€çŠ¶æ€
- localStorage             // æŒä¹…åŒ–å­˜å‚¨
```

#### ä¼˜åŒ–é‡ç‚¹

| ä¼˜åŒ–é¡¹ | å½“å‰çŠ¶æ€ | ç›®æ ‡çŠ¶æ€ | æ–¹æ¡ˆ |
|--------|---------|---------|------|
| **çŠ¶æ€æŒä¹…åŒ–** | å†…å­˜å­˜å‚¨ | æ–‡ä»¶æŒä¹…åŒ– | VS Code globalState |
| **å›¾è¡¨æ€§èƒ½** | å…¨é‡æ¸²æŸ“ | å¢é‡æ›´æ–° | ECharts setOptionå¢é‡ |
| **é”™è¯¯æ¢å¤** | åŸºæœ¬ | è‡ªåŠ¨æ¢å¤ | Try-catch + çŠ¶æ€å¿«ç…§ |

---

### 3.3 çŠ¶æ€ç›‘æ§ç³»ç»Ÿ - Streamlitï¼ˆæ¨èå‡çº§ï¼‰

#### æŠ€æœ¯é€‰å‹å¯¹æ¯”

| æ–¹æ¡ˆ | å®æ—¶æ€§ | å¼€å‘æ•ˆç‡ | å›¾è¡¨èƒ½åŠ› | éƒ¨ç½² | é€‰æ‹© |
|------|--------|---------|---------|------|------|
| **Streamlit** | WebSocket | æé«˜ | ä¸°å¯Œ | ç®€å• | âœ… **æ¨è** |
| Dash (Plotly) | å›è°ƒ | é«˜ | ä¸“ä¸š | ä¸­ç­‰ | âš ï¸ å¤‡é€‰ |
| Flask + Vue | æ‰‹åŠ¨ | ä½ | è‡ªå®šä¹‰ | å¤æ‚ | âŒ |
| Gradio | WebSocket | é«˜ | æœ‰é™ | ç®€å• | âŒ |

#### StreamlitæŠ€æœ¯æ ˆ

```python
# æ ¸å¿ƒæ¡†æ¶
streamlit >= 1.29.0        # Webæ¡†æ¶
streamlit-aggrid >= 0.3.0  # é«˜çº§è¡¨æ ¼
streamlit-echarts >= 0.4.0 # EChartsé›†æˆ

# å®æ—¶é€šä¿¡
websockets >= 12.0         # WebSocket
asyncio                    # å¼‚æ­¥å¤„ç†

# æ•°æ®å¯è§†åŒ–
plotly >= 5.18.0          # äº¤äº’å›¾è¡¨
altair >= 5.2.0           # å£°æ˜å¼å›¾è¡¨
```

#### Streamlitä¼˜åŠ¿

1. **æé€Ÿå¼€å‘**: PythonåŸç”Ÿï¼Œæ— éœ€å‰ç«¯çŸ¥è¯†
2. **å®æ—¶æ›´æ–°**: å†…ç½®çŠ¶æ€ç®¡ç†å’Œè‡ªåŠ¨åˆ·æ–°
3. **ä¸°å¯Œç»„ä»¶**: å›¾è¡¨ã€è¡¨æ ¼ã€æ–‡ä»¶ä¸Šä¼ ç­‰
4. **MCPé›†æˆ**: ç›´æ¥è°ƒç”¨Python MCPå®¢æˆ·ç«¯

---

## ğŸ“‹ å››ã€å…·ä½“å®æ–½è®¡åˆ’

### Phase 1: çŠ¶æ€ç›‘æ§ç³»ç»Ÿå‡çº§ï¼ˆ1å‘¨ï¼‰

#### ç›®æ ‡: Flask â†’ Streamlitè¿ç§»

```
æ–°å»º: streamlit_dashboard/
â”œâ”€â”€ app.py                    # ä¸»åº”ç”¨
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ 1_ç³»ç»ŸçŠ¶æ€.py         # ç³»ç»ŸçŠ¶æ€ç›‘æ§
â”‚   â”œâ”€â”€ 2_å·¥ä½œæµç›‘æ§.py       # 9æ­¥å·¥ä½œæµè¿›åº¦
â”‚   â”œâ”€â”€ 3_å›æµ‹ç»“æœ.py         # å›æµ‹ç»“æœå±•ç¤º
â”‚   â”œâ”€â”€ 4_ç­–ç•¥åº“.py           # ç­–ç•¥æ–‡ä»¶ç®¡ç†
â”‚   â””â”€â”€ 5_æ–‡æ¡£ä¸­å¿ƒ.py         # ç ”ç©¶æ–‡æ¡£æµè§ˆ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ mcp_client.py         # MCPå®¢æˆ·ç«¯å°è£…
â”‚   â”œâ”€â”€ charts.py             # å›¾è¡¨ç»„ä»¶
â”‚   â””â”€â”€ status_cards.py       # çŠ¶æ€å¡ç‰‡
â””â”€â”€ config.py                 # é…ç½®æ–‡ä»¶
```

#### æ ¸å¿ƒåŠŸèƒ½å®ç°

```python
# app.py ç¤ºä¾‹
import streamlit as st
from streamlit_echarts import st_echarts

st.set_page_config(
    page_title="TRQuant çŠ¶æ€ç›‘æ§",
    page_icon="ğŸ‰",
    layout="wide"
)

# ä¾§è¾¹æ  - ç³»ç»ŸçŠ¶æ€
with st.sidebar:
    st.title("ğŸ‰ TRQuant")
    st.metric("MCPæœåŠ¡å™¨", "6/6 è¿è¡Œä¸­", delta="æ­£å¸¸")
    st.metric("å·¥ä½œæµè¿›åº¦", "5/9 æ­¥éª¤", delta="+2")
    
# ä¸»é¡µé¢ - å®æ—¶çŠ¶æ€
col1, col2, col3 = st.columns(3)
with col1:
    st.subheader("ğŸ“Š å¸‚åœºçŠ¶æ€")
    # è°ƒç”¨MCPè·å–å¸‚åœºçŠ¶æ€
    
with col2:
    st.subheader("ğŸ“ˆ å›æµ‹è¿›åº¦")
    st.progress(0.7)
    
with col3:
    st.subheader("ğŸ¯ å½“å‰ä»»åŠ¡")
    st.info("æ­£åœ¨æ‰§è¡Œ: å› å­ç­›é€‰")
```

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ | æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|--------|
| StreamlitåŸºç¡€æ¡†æ¶æ­å»º | 1å¤© | é«˜ |
| MCPå®¢æˆ·ç«¯é›†æˆ | 1å¤© | é«˜ |
| ç³»ç»ŸçŠ¶æ€é¡µé¢ | 1å¤© | é«˜ |
| å·¥ä½œæµç›‘æ§é¡µé¢ | 1å¤© | é«˜ |
| å›æµ‹ç»“æœé¡µé¢ | 1å¤© | ä¸­ |
| ç­–ç•¥åº“å’Œæ–‡æ¡£é¡µé¢ | 1å¤© | ä¸­ |
| æµ‹è¯•å’Œä¼˜åŒ– | 1å¤© | é«˜ |

---

### Phase 2: æ¡Œé¢ç ”ç©¶ç³»ç»Ÿå¢å¼ºï¼ˆ2å‘¨ï¼‰

#### ç›®æ ‡: ä¸“ä¸šçº§å›¾è¡¨å’Œå®æ—¶æ•°æ®

```
æ–°å»º/ä¿®æ”¹:
gui/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ charts/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base_chart.py       # å›¾è¡¨åŸºç±»
â”‚       â”œâ”€â”€ candlestick.py      # Kçº¿å›¾
â”‚       â”œâ”€â”€ equity_curve.py     # æ”¶ç›Šæ›²çº¿
â”‚       â”œâ”€â”€ drawdown_chart.py   # å›æ’¤å›¾
â”‚       â”œâ”€â”€ factor_heatmap.py   # å› å­çƒ­åŠ›å›¾
â”‚       â””â”€â”€ position_pie.py     # æŒä»“é¥¼å›¾
â”œâ”€â”€ widgets/
â”‚   â””â”€â”€ pro_chart_panel.py      # ä¸“ä¸šå›¾è¡¨é¢æ¿
â””â”€â”€ framework/
    â”œâ”€â”€ base_model.py           # æ•°æ®æ¨¡å‹åŸºç±»
    â”œâ”€â”€ base_view.py            # è§†å›¾åŸºç±»
    â””â”€â”€ base_controller.py      # æ§åˆ¶å™¨åŸºç±»
```

#### Kçº¿å›¾å®ç°ç¤ºä¾‹

```python
# gui/components/charts/candlestick.py
import pyqtgraph as pg
from pyqtgraph import PlotWidget
import numpy as np

class CandlestickChart(PlotWidget):
    """ä¸“ä¸šKçº¿å›¾ç»„ä»¶"""
    
    def __init__(self, parent=None):
        super().__init__(parent)
        self.setBackground('#1e1e2e')
        self.showGrid(x=True, y=True, alpha=0.3)
        
        # åˆ›å»ºKçº¿å›¾å±‚
        self.candle_item = CandlestickItem()
        self.addItem(self.candle_item)
        
        # åˆ›å»ºå‡çº¿å›¾å±‚
        self.ma5_line = self.plot(pen=pg.mkPen('#f9e2af', width=1))
        self.ma10_line = self.plot(pen=pg.mkPen('#89b4fa', width=1))
        self.ma20_line = self.plot(pen=pg.mkPen('#f38ba8', width=1))
        
    def update_data(self, ohlcv_data: np.ndarray):
        """æ›´æ–°Kçº¿æ•°æ®"""
        self.candle_item.setData(ohlcv_data)
        # è®¡ç®—å‡çº¿...
```

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ | æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|--------|
| å›¾è¡¨åŸºç±»è®¾è®¡ | 2å¤© | é«˜ |
| Kçº¿å›¾å®ç° | 3å¤© | é«˜ |
| æ”¶ç›Š/å›æ’¤æ›²çº¿ | 2å¤© | é«˜ |
| å› å­çƒ­åŠ›å›¾ | 2å¤© | ä¸­ |
| é›†æˆåˆ°ä¸»çª—å£ | 2å¤© | é«˜ |
| MVCæ¶æ„é‡æ„ | 3å¤© | ä¸­ |

---

### Phase 3: Cursoræ‰©å±•ä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰

#### ç›®æ ‡: çŠ¶æ€æŒä¹…åŒ–å’Œæ€§èƒ½ä¼˜åŒ–

```typescript
// çŠ¶æ€æŒä¹…åŒ–å®ç°
class WorkflowStateManager {
    private context: vscode.ExtensionContext;
    
    async saveState(state: WorkflowState): Promise<void> {
        await this.context.globalState.update('workflowState', state);
    }
    
    async loadState(): Promise<WorkflowState | undefined> {
        return this.context.globalState.get('workflowState');
    }
    
    async clearState(): Promise<void> {
        await this.context.globalState.update('workflowState', undefined);
    }
}

// EChartså¢é‡æ›´æ–°
function updateChartIncremental(chart: ECharts, newData: any) {
    chart.setOption({
        series: [{
            data: newData
        }]
    }, { notMerge: false, lazyUpdate: true });
}
```

#### ä»»åŠ¡åˆ†è§£

| ä»»åŠ¡ | æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|--------|
| çŠ¶æ€æŒä¹…åŒ–å®ç° | 2å¤© | é«˜ |
| EChartsæ€§èƒ½ä¼˜åŒ– | 2å¤© | é«˜ |
| é”™è¯¯æ¢å¤æœºåˆ¶ | 1å¤© | ä¸­ |
| æµ‹è¯•å’Œæ–‡æ¡£ | 2å¤© | ä¸­ |

---

## ğŸ“Š äº”ã€æŠ€æœ¯æ¶æ„æ€»è§ˆ

### 5.1 æœ€ç»ˆæŠ€æœ¯æ ˆ

| ç³»ç»Ÿ | æ¡†æ¶ | å›¾è¡¨åº“ | é€šä¿¡ | çŠ¶æ€ç®¡ç† |
|------|------|--------|------|---------|
| **æ¡Œé¢ç ”ç©¶** | PyQt6 | PyQtGraph | MCP (Python) | QThread + Signal |
| **Cursoræ‰©å±•** | TypeScript | ECharts | MCP (stdio) | globalState |
| **çŠ¶æ€ç›‘æ§** | Streamlit | Plotly/ECharts | MCP (Python) | st.session_state |

### 5.2 é€šä¿¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯ç³»ç»Ÿ                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PyQt6 GUI    â”‚ Cursoræ‰©å±•    â”‚   Streamlit Dashboard     â”‚
â”‚               â”‚               â”‚                           â”‚
â”‚  Python MCP   â”‚ stdio MCP     â”‚   Python MCP              â”‚
â”‚  Client       â”‚ Client        â”‚   Client                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   MCP Server  â”‚
                â”‚   (6ä¸ªæœåŠ¡å™¨)  â”‚
                â”‚               â”‚
                â”‚ â€¢ trquant-coreâ”‚
                â”‚ â€¢ trquant-workflow
                â”‚ â€¢ trquant-project
                â”‚ â€¢ trquant-trading
                â”‚ â€¢ trquant-dev â”‚
                â”‚ â€¢ filesystem  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… å…­ã€æ—¶é—´çº¿

### æ€»ä½“æ—¶é—´: 4å‘¨

| é˜¶æ®µ | æ—¶é—´ | å†…å®¹ | äº¤ä»˜ç‰© |
|------|------|------|--------|
| **Phase 1** | ç¬¬1å‘¨ | StreamlitçŠ¶æ€ç›‘æ§ç³»ç»Ÿ | streamlit_dashboard/ |
| **Phase 2** | ç¬¬2-3å‘¨ | PyQt6å›¾è¡¨å¢å¼º | gui/components/charts/ |
| **Phase 3** | ç¬¬4å‘¨ | Cursoræ‰©å±•ä¼˜åŒ– | çŠ¶æ€æŒä¹…åŒ– + æ€§èƒ½ä¼˜åŒ– |

### é‡Œç¨‹ç¢‘

| æ—¥æœŸ | é‡Œç¨‹ç¢‘ | éªŒæ”¶æ ‡å‡† |
|------|--------|---------|
| 2024-12-24 | Streamlit Dashboardä¸Šçº¿ | å®æ—¶çŠ¶æ€ç›‘æ§å¯ç”¨ |
| 2025-01-07 | PyQt6ä¸“ä¸šå›¾è¡¨å®Œæˆ | Kçº¿å›¾ã€æ”¶ç›Šæ›²çº¿å¯ç”¨ |
| 2025-01-14 | Cursoræ‰©å±•ä¼˜åŒ–å®Œæˆ | çŠ¶æ€æŒä¹…åŒ–ã€æ€§èƒ½æå‡30% |

---

## âœ… ä¸ƒã€éªŒæ”¶æ ‡å‡†

### 7.1 æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ

- [ ] Kçº¿å›¾æ”¯æŒOHLCVæ•°æ®å’ŒæŠ€æœ¯æŒ‡æ ‡
- [ ] æ”¶ç›Šæ›²çº¿å®æ—¶æ›´æ–°ï¼Œå»¶è¿Ÿ<100ms
- [ ] å› å­çƒ­åŠ›å›¾æ”¯æŒäº¤äº’ç¼©æ”¾
- [ ] MVCæ¶æ„é‡æ„å®Œæˆ

### 7.2 Cursoræ‰©å±•

- [ ] å·¥ä½œæµçŠ¶æ€å¯æŒä¹…åŒ–å’Œæ¢å¤
- [ ] EChartsæ¸²æŸ“æ€§èƒ½æå‡30%
- [ ] é”™è¯¯è‡ªåŠ¨æ¢å¤ç‡>90%

### 7.3 çŠ¶æ€ç›‘æ§ç³»ç»Ÿ

- [ ] å®æ—¶çŠ¶æ€æ›´æ–°ï¼Œå»¶è¿Ÿ<1s
- [ ] 9æ­¥å·¥ä½œæµè¿›åº¦å¯è§†åŒ–
- [ ] å›æµ‹ç»“æœå›¾è¡¨å±•ç¤º
- [ ] ç­–ç•¥æ–‡ä»¶ç®¡ç†åŠŸèƒ½

---

## ğŸ“ å…«ã€æ€»ç»“

### 8.1 æŠ€æœ¯é€‰å‹æ€»ç»“

| ç³»ç»Ÿ | æœ€ç»ˆæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| **æ¡Œé¢ç ”ç©¶** | PyQt6 + PyQtGraph | é«˜æ€§èƒ½ã€åŸç”Ÿé›†æˆã€å®æ—¶æ›´æ–° |
| **Cursoræ‰©å±•** | TypeScript + ECharts | VS CodeåŸç”Ÿã€ç±»å‹å®‰å…¨ |
| **çŠ¶æ€ç›‘æ§** | **Streamlit** | æé€Ÿå¼€å‘ã€å®æ—¶æ›´æ–°ã€PythonåŸç”Ÿ |

### 8.2 æ ¸å¿ƒæ”¹è¿›

1. **çŠ¶æ€ç›‘æ§ç³»ç»Ÿ**: Flask â†’ Streamlitï¼ˆæœ€å¤§æ”¹è¿›ï¼‰
2. **æ¡Œé¢ç ”ç©¶ç³»ç»Ÿ**: åŸç”Ÿç»˜å›¾ â†’ PyQtGraphä¸“ä¸šå›¾è¡¨
3. **Cursoræ‰©å±•**: å†…å­˜çŠ¶æ€ â†’ æŒä¹…åŒ–çŠ¶æ€

### 8.3 é¢„æœŸæ”¶ç›Š

- **å¼€å‘æ•ˆç‡**: StreamlitèŠ‚çœ70%å‰ç«¯å¼€å‘æ—¶é—´
- **ç”¨æˆ·ä½“éªŒ**: å®æ—¶çŠ¶æ€æ›´æ–°ã€ä¸“ä¸šå›¾è¡¨
- **ç³»ç»Ÿç¨³å®šæ€§**: çŠ¶æ€æŒä¹…åŒ–ã€é”™è¯¯æ¢å¤

---

**æ–‡æ¡£ç»´æŠ¤**: TRQuant Team  
**æœ€åæ›´æ–°**: 2024-12-17  
**ä¸‹æ¬¡æ›´æ–°**: 2024-12-24
