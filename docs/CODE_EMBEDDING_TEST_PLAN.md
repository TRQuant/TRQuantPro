# 代码嵌入功能测试计划

## 🎯 测试目标

验证代码嵌入功能的以下方面：
1. ✅ 代码文件读取
2. ✅ AST节点替换
3. ✅ Shiki代码高亮
4. ✅ 设计原理显示
5. ✅ 错误处理

## 📋 测试用例

### 测试1：基本功能测试

**文件**: `src/pages/test-code-embedding.md`

**测试内容**:
- 代码文件是否存在
- 代码内容是否正确读取
- AST节点是否正确替换
- 代码高亮是否正常

### 测试2：设计原理显示

**测试内容**:
- 设计原理是否正确提取
- HTML节点是否正确插入
- 设计原理格式是否正确

### 测试3：错误处理

**测试内容**:
- 文件不存在时的错误提示
- 路径错误时的错误提示
- 文件读取失败时的错误处理

## 🔧 验证方法

### 1. 构建测试
```bash
cd extension/AShare-manual
npm run build
```

### 2. 开发服务器测试
```bash
npm run dev
# 访问 http://localhost:4321/test-code-embedding
```

### 3. 代码检查
- 检查生成的HTML是否包含代码高亮
- 检查设计原理是否正确显示
- 检查错误信息是否友好

## ✅ 预期结果

### 成功标准
1. ✅ 代码块有语法高亮（Shiki处理）
2. ✅ 设计原理正确显示（HTML格式）
3. ✅ 代码内容正确（从文件读取）
4. ✅ 错误处理友好（文件不存在时）

### 失败标准
1. ❌ 代码块没有高亮（纯文本）
2. ❌ 设计原理不显示
3. ❌ 代码内容错误
4. ❌ 错误信息不友好

## 🚀 下一步

1. 运行测试用例
2. 验证功能是否正常
3. 修复发现的问题
4. 更新文档

