# GUIå¼€å‘è®¡åˆ’ - MCPè°ƒç”¨é›†æˆï¼ˆå®Œæ•´ç‰ˆï¼‰

> **åˆ¶å®šæ—¶é—´**: 2025-12-15
> **ç›®æ ‡**: ä¸‰ç«¯GUIç»Ÿä¸€è°ƒç”¨MCPï¼Œå®ç°ç­–ç•¥ç®¡ç†ã€å›æµ‹å¯è§†åŒ–ã€æ•°æ®æŠ¥å‘Šå¯è§†åŒ–

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         è¡¨ç°å±‚ (3ç«¯GUI)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¡Œé¢GUI       â”‚  Cursoræ‰©å±•     â”‚     åœ¨çº¿æ‰‹å†Œ                    â”‚
â”‚   (PyQt6)       â”‚  (TypeScript)   â”‚     (Astro)                     â”‚
â”‚                 â”‚                 â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ç­–ç•¥ç®¡ç†é¢æ¿â”‚  â”‚  â”‚ç­–ç•¥ç®¡ç†é¢æ¿â”‚  â”‚  â”‚AShare-manual             â”‚ â”‚
â”‚  â”‚å›æµ‹å¯è§†åŒ– â”‚  â”‚  â”‚å›æµ‹å¯è§†åŒ– â”‚  â”‚  â”‚(æ–‡æ¡£/æ•™ç¨‹)               â”‚ â”‚
â”‚  â”‚æŠ¥å‘Šå¯è§†åŒ– â”‚  â”‚  â”‚æŠ¥å‘Šå¯è§†åŒ– â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚
         â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCPè°ƒç”¨å±‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MCPClient (ç»Ÿä¸€å®¢æˆ·ç«¯)                                         â”‚ â”‚
â”‚  â”‚  - Python: core/mcp/client.py                                  â”‚ â”‚
â”‚  â”‚  - TypeScript: extension/src/services/mcpClient.ts             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCPæœåŠ¡å™¨å±‚ (25ä¸ª)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ backtest_serverâ”‚ strategy_serverâ”‚ optimizer_serverâ”‚ report_server   â”‚
â”‚ - bullettrade  â”‚ - list         â”‚ - optuna       â”‚ - generate      â”‚
â”‚ - qmt          â”‚ - get          â”‚ - multi_obj    â”‚ - archive       â”‚
â”‚ - optimize     â”‚ - compare      â”‚ - grid_search  â”‚ - visualize     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### æ¨¡å—1: ç­–ç•¥ç®¡ç†
- ç­–ç•¥åº“æµè§ˆï¼ˆæŒ‰å¹³å°/ç±»å‹åˆ†ç±»ï¼‰
- ç­–ç•¥è¯¦æƒ…æŸ¥çœ‹ï¼ˆä»£ç /å‚æ•°/æ–‡æ¡£ï¼‰
- ç­–ç•¥å¯¹æ¯”åˆ†æ
- ç­–ç•¥ç‰ˆæœ¬ç®¡ç†
- ç­–ç•¥æ€§èƒ½è¿½è¸ª

### æ¨¡å—2: å›æµ‹è¿›ç¨‹å¯è§†åŒ–
- å®æ—¶è¿›åº¦æ˜¾ç¤ºï¼ˆæ­¥éª¤/ç™¾åˆ†æ¯”ï¼‰
- å›æµ‹çŠ¶æ€ç›‘æ§ï¼ˆè¿è¡Œä¸­/å®Œæˆ/å¤±è´¥ï¼‰
- æ—¥å¿—å®æ—¶è¾“å‡º
- èµ„æºä½¿ç”¨ç›‘æ§ï¼ˆCPU/å†…å­˜ï¼‰
- å¤šä»»åŠ¡å¹¶è¡Œå›æµ‹ç®¡ç†

### æ¨¡å—3: å›æµ‹æ•°æ®å¯è§†åŒ–
- æƒç›Šæ›²çº¿å›¾ï¼ˆå‡€å€¼/åŸºå‡†å¯¹æ¯”ï¼‰
- æ”¶ç›Šåˆ†å¸ƒå›¾ï¼ˆæ—¥æ”¶ç›Š/æœˆæ”¶ç›Šï¼‰
- æŒä»“åˆ†æï¼ˆæŒä»“æ¯”ä¾‹/æ¢æ‰‹ç‡ï¼‰
- äº¤æ˜“æ˜ç»†ï¼ˆä¹°å–ç‚¹/ç›ˆäºï¼‰
- é£é™©æŒ‡æ ‡ï¼ˆå›æ’¤/æ³¢åŠ¨ç‡/å¤æ™®ï¼‰

### æ¨¡å—4: æŠ¥å‘Šå¯è§†åŒ–
- HTMLæŠ¥å‘Šç”Ÿæˆï¼ˆChart.js/EChartsï¼‰
- PDFæŠ¥å‘Šå¯¼å‡º
- äº¤äº’å¼å›¾è¡¨ï¼ˆå¯ç¼©æ”¾/ç­›é€‰ï¼‰
- æŠ¥å‘Šå¯¹æ¯”ï¼ˆå¤šç­–ç•¥å¯¹æ¯”ï¼‰
- æŠ¥å‘Šå½’æ¡£ç®¡ç†

---

## ğŸ“‹ è¯¦ç»†ä»»åŠ¡åˆ†è§£

### Phase 1: MCPå®¢æˆ·ç«¯ç»Ÿä¸€å±‚ (2å¤©)

#### Task 1.1: Python MCPå®¢æˆ·ç«¯
**æ–‡ä»¶**: `core/mcp/client.py`

**åŠŸèƒ½**:
```python
class MCPClient:
    """ç»Ÿä¸€MCPå®¢æˆ·ç«¯"""
    
    def call_tool(tool_name, arguments, callback=None)
    """åŒæ­¥è°ƒç”¨MCPå·¥å…·ï¼Œæ”¯æŒè¿›åº¦å›è°ƒ"""
    
    async def call_tool_async(tool_name, arguments)
    """å¼‚æ­¥è°ƒç”¨MCPå·¥å…·"""
    
    def batch_call(tools: List[Tuple[str, dict]])
    """æ‰¹é‡è°ƒç”¨å¤šä¸ªå·¥å…·"""
    
    def stream_call(tool_name, arguments, on_progress)
    """æµå¼è°ƒç”¨ï¼Œå®æ—¶è·å–è¿›åº¦"""
```

#### Task 1.2: TypeScript MCPå®¢æˆ·ç«¯å¢å¼º
**æ–‡ä»¶**: `extension/src/services/mcpClient.ts`

**å¢å¼º**:
- æ‰¹é‡è°ƒç”¨æ”¯æŒ
- è¿›åº¦å›è°ƒ
- é”™è¯¯é‡è¯•æœºåˆ¶

---

### Phase 2: ç­–ç•¥ç®¡ç†æ¨¡å— (3å¤©)

#### Task 2.1: ç­–ç•¥åº“ç®¡ç†é¢æ¿ï¼ˆæ¡Œé¢GUIï¼‰
**æ–‡ä»¶**: `gui/widgets/strategy_manager_panel.py`

**åŠŸèƒ½**:
- ç­–ç•¥åˆ—è¡¨ï¼ˆæ ‘å½¢/è¡¨æ ¼ï¼‰
  - æŒ‰å¹³å°åˆ†ç±»ï¼ˆBulletTrade/PTrade/QMTï¼‰
  - æŒ‰ç±»å‹åˆ†ç±»ï¼ˆMomentum/Value/Trendï¼‰
  - æœç´¢/ç­›é€‰
- ç­–ç•¥è¯¦æƒ…
  - ä»£ç é¢„è§ˆï¼ˆè¯­æ³•é«˜äº®ï¼‰
  - å‚æ•°é…ç½®
  - æ–‡æ¡£è¯´æ˜
  - æ€§èƒ½æŒ‡æ ‡
- ç­–ç•¥æ“ä½œ
  - æ–°å»ºç­–ç•¥
  - ç¼–è¾‘ç­–ç•¥
  - åˆ é™¤ç­–ç•¥
  - å¤åˆ¶ç­–ç•¥
  - å¯¼å‡ºç­–ç•¥

**MCPè°ƒç”¨**:
```python
# åˆ—å‡ºç­–ç•¥
strategies = mcp.call("strategy.list", {"platform": "bullettrade"})

# è·å–ç­–ç•¥è¯¦æƒ…
strategy = mcp.call("strategy.get", {"strategy_id": id})

# ç­–ç•¥å¯¹æ¯”
comparison = mcp.call("strategy.compare", {"strategy_ids": [id1, id2]})
```

#### Task 2.2: ç­–ç•¥ç®¡ç†é¢æ¿ï¼ˆCursoræ‰©å±•ï¼‰
**æ–‡ä»¶**: `extension/src/views/strategyManagerPanel.ts`

**åŠŸèƒ½**:
- ç­–ç•¥åº“Tab
  - æ‰«æstrategies/ç›®å½•
  - æŒ‰ç±»åˆ«å±•ç¤º
  - ç­–ç•¥è¯¦æƒ…æŸ¥çœ‹
- å›æµ‹å†å²Tab
  - ä»MongoDBåŠ è½½
  - ç»©æ•ˆæŒ‡æ ‡å±•ç¤º
  - å›æµ‹æŠ¥å‘ŠæŸ¥çœ‹
- ç»©æ•ˆè·Ÿè¸ªTab
  - ç»Ÿè®¡é¢æ¿
  - å¹³å‡æ”¶ç›Š/å¤æ™®æ¯”ç‡
  - ç­–ç•¥æ’å

#### Task 2.3: ç­–ç•¥å¯¹æ¯”åŠŸèƒ½
**æ–‡ä»¶**: `gui/widgets/strategy_comparison_panel.py` (æ–°å»º)

**åŠŸèƒ½**:
- å¤šç­–ç•¥å¯¹æ¯”è¡¨æ ¼
- ç»©æ•ˆæŒ‡æ ‡å¯¹æ¯”ï¼ˆæ”¶ç›Š/å¤æ™®/å›æ’¤ï¼‰
- æƒç›Šæ›²çº¿å¯¹æ¯”å›¾
- æŒä»“å¯¹æ¯”åˆ†æ

---

### Phase 3: å›æµ‹è¿›ç¨‹å¯è§†åŒ– (3å¤©)

#### Task 3.1: å›æµ‹è¿›åº¦é¢æ¿ï¼ˆæ¡Œé¢GUIï¼‰
**æ–‡ä»¶**: `gui/widgets/backtest_progress_panel.py` (æ–°å»º)

**åŠŸèƒ½**:
- å®æ—¶è¿›åº¦æ˜¾ç¤º
  - æ­¥éª¤è¿›åº¦æ¡ï¼ˆæ•°æ®å‡†å¤‡/ç­–ç•¥æ‰§è¡Œ/ç»“æœè®¡ç®—ï¼‰
  - ç™¾åˆ†æ¯”æ˜¾ç¤º
  - é¢„è®¡å‰©ä½™æ—¶é—´
- å›æµ‹çŠ¶æ€ç›‘æ§
  - è¿è¡Œä¸­/å®Œæˆ/å¤±è´¥çŠ¶æ€
  - å¤šä»»åŠ¡åˆ—è¡¨
  - ä»»åŠ¡è¯¦æƒ…ï¼ˆå‚æ•°/å¼€å§‹æ—¶é—´ï¼‰
- æ—¥å¿—å®æ—¶è¾“å‡º
  - æ»šåŠ¨æ—¥å¿—çª—å£
  - æ—¥å¿—çº§åˆ«ç­›é€‰ï¼ˆINFO/WARNING/ERRORï¼‰
  - å…³é”®è¯æœç´¢
- èµ„æºç›‘æ§
  - CPUä½¿ç”¨ç‡
  - å†…å­˜ä½¿ç”¨
  - ç£ç›˜IO

**MCPè°ƒç”¨**:
```python
# å¯åŠ¨å›æµ‹ï¼ˆå¼‚æ­¥ï¼‰
task_id = mcp.call("backtest.bullettrade", {
    "strategy_path": path,
    "start_date": "2024-01-01",
    "end_date": "2024-06-30"
}, callback=on_progress)

# æŸ¥è¯¢å›æµ‹çŠ¶æ€
status = mcp.call("backtest.status", {"task_id": task_id})

# è·å–å›æµ‹æ—¥å¿—
logs = mcp.call("backtest.logs", {"task_id": task_id})
```

#### Task 3.2: å›æµ‹è¿›åº¦æ˜¾ç¤ºï¼ˆCursoræ‰©å±•ï¼‰
**æ–‡ä»¶**: `extension/src/views/backtestProgressPanel.ts` (æ–°å»º)

**åŠŸèƒ½**:
- WebViewè¿›åº¦æ˜¾ç¤º
- å®æ—¶æ—¥å¿—è¾“å‡º
- å–æ¶ˆå›æµ‹åŠŸèƒ½

#### Task 3.3: å›æµ‹ä»»åŠ¡ç®¡ç†å™¨
**æ–‡ä»¶**: `gui/widgets/backtest_task_manager.py` (æ–°å»º)

**åŠŸèƒ½**:
- ä»»åŠ¡åˆ—è¡¨ï¼ˆè¿è¡Œä¸­/å·²å®Œæˆ/å¤±è´¥ï¼‰
- ä»»åŠ¡è¯¦æƒ…æŸ¥çœ‹
- ä»»åŠ¡æ“ä½œï¼ˆæš‚åœ/æ¢å¤/å–æ¶ˆ/åˆ é™¤ï¼‰
- æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ é™¤/æ‰¹é‡å¯¼å‡ºï¼‰

---

### Phase 4: å›æµ‹æ•°æ®å¯è§†åŒ– (4å¤©)

#### Task 4.1: æƒç›Šæ›²çº¿å¯è§†åŒ–
**æ–‡ä»¶**: `gui/widgets/equity_curve_widget.py` (æ–°å»º)

**åŠŸèƒ½**:
- å‡€å€¼æ›²çº¿å›¾ï¼ˆMatplotlib/PyQtChartï¼‰
  - ç­–ç•¥å‡€å€¼ vs åŸºå‡†å‡€å€¼
  - åŒYè½´æ˜¾ç¤º
  - å¯ç¼©æ”¾/å¹³ç§»
- æ”¶ç›Šæ›²çº¿
  - ç´¯è®¡æ”¶ç›Š
  - å¹´åŒ–æ”¶ç›Š
- å›æ’¤æ›²çº¿
  - å›æ’¤æ·±åº¦
  - å›æ’¤æŒç»­æ—¶é—´

**æ•°æ®æ¥æº**:
```python
# ä»MongoDBè·å–å›æµ‹æ•°æ®
backtest_data = mcp.call("backtest.get_data", {
    "backtest_id": id,
    "fields": ["equity_curve", "returns", "drawdown"]
})
```

#### Task 4.2: æ”¶ç›Šåˆ†å¸ƒå¯è§†åŒ–
**æ–‡ä»¶**: `gui/widgets/returns_distribution_widget.py` (æ–°å»º)

**åŠŸèƒ½**:
- æ—¥æ”¶ç›Šåˆ†å¸ƒç›´æ–¹å›¾
- æœˆæ”¶ç›Šåˆ†å¸ƒ
- æ”¶ç›Šç»Ÿè®¡ï¼ˆå‡å€¼/æ ‡å‡†å·®/ååº¦/å³°åº¦ï¼‰
- æ­£æ€æ€§æ£€éªŒ

#### Task 4.3: æŒä»“åˆ†æå¯è§†åŒ–
**æ–‡ä»¶**: `gui/widgets/position_analysis_widget.py` (æ–°å»º)

**åŠŸèƒ½**:
- æŒä»“æ¯”ä¾‹é¥¼å›¾
- æŒä»“æ—¶é—´åˆ†å¸ƒ
- æ¢æ‰‹ç‡åˆ†æ
- è¡Œä¸š/æ¦‚å¿µåˆ†å¸ƒ

#### Task 4.4: äº¤æ˜“æ˜ç»†å¯è§†åŒ–
**æ–‡ä»¶**: `gui/widgets/trade_detail_widget.py` (æ–°å»º)

**åŠŸèƒ½**:
- äº¤æ˜“åˆ—è¡¨ï¼ˆè¡¨æ ¼ï¼‰
  - ä¹°å–ç‚¹æ ‡è®°
  - ç›ˆäºæ˜¾ç¤º
  - æ‰‹ç»­è´¹ç»Ÿè®¡
- Kçº¿å›¾å åŠ äº¤æ˜“ç‚¹
  - ä¹°å…¥ç‚¹ï¼ˆç»¿è‰²ç®­å¤´ï¼‰
  - å–å‡ºç‚¹ï¼ˆçº¢è‰²ç®­å¤´ï¼‰
  - æŒä»“åŒºé—´é«˜äº®

#### Task 4.5: é£é™©æŒ‡æ ‡å¯è§†åŒ–
**æ–‡ä»¶**: `gui/widgets/risk_metrics_widget.py` (æ–°å»º)

**åŠŸèƒ½**:
- é£é™©æŒ‡æ ‡å¡ç‰‡
  - æœ€å¤§å›æ’¤
  - æ³¢åŠ¨ç‡
  - å¤æ™®æ¯”ç‡
  - ç´¢æè¯ºæ¯”ç‡
  - å¡ç›æ¯”ç‡
- é£é™©æŒ‡æ ‡è¶‹åŠ¿å›¾
- é£é™©æŒ‡æ ‡å¯¹æ¯”ï¼ˆå¤šç­–ç•¥ï¼‰

---

### Phase 5: æŠ¥å‘Šå¯è§†åŒ– (3å¤©)

#### Task 5.1: HTMLæŠ¥å‘Šç”Ÿæˆå™¨
**æ–‡ä»¶**: `core/visualization/html_report_generator.py` (å·²æœ‰ï¼Œéœ€å¢å¼º)

**å¢å¼ºåŠŸèƒ½**:
- ä½¿ç”¨Chart.js/EChartsç”Ÿæˆäº¤äº’å¼å›¾è¡¨
- å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰
- æŠ¥å‘Šæ¨¡æ¿ç³»ç»Ÿ
- è‡ªå®šä¹‰æ ·å¼

**MCPè°ƒç”¨**:
```python
# ç”ŸæˆHTMLæŠ¥å‘Š
report_path = mcp.call("report.generate", {
    "backtest_id": id,
    "format": "html",
    "template": "default"
})
```

#### Task 5.2: æŠ¥å‘ŠæŸ¥çœ‹å™¨ï¼ˆæ¡Œé¢GUIï¼‰
**æ–‡ä»¶**: `gui/widgets/report_viewer_panel.py` (æ–°å»º)

**åŠŸèƒ½**:
- WebViewæ˜¾ç¤ºHTMLæŠ¥å‘Š
- æŠ¥å‘Šå¯¼èˆªï¼ˆç« èŠ‚/å›¾è¡¨ï¼‰
- æŠ¥å‘Šå¯¼å‡ºï¼ˆPDF/PNGï¼‰
- æŠ¥å‘Šæ‰“å°

#### Task 5.3: æŠ¥å‘Šå¯¹æ¯”åŠŸèƒ½
**æ–‡ä»¶**: `gui/widgets/report_comparison_panel.py` (æ–°å»º)

**åŠŸèƒ½**:
- å¤šæŠ¥å‘Šå¯¹æ¯”è§†å›¾
- å¹¶æ’æ˜¾ç¤º
- å·®å¼‚é«˜äº®
- å¯¼å‡ºå¯¹æ¯”æŠ¥å‘Š

#### Task 5.4: æŠ¥å‘Šå½’æ¡£ç®¡ç†
**æ–‡ä»¶**: `gui/widgets/report_archive_panel.py` (æ–°å»º)

**åŠŸèƒ½**:
- æŠ¥å‘Šåˆ—è¡¨ï¼ˆæŒ‰æ—¥æœŸ/ç­–ç•¥åˆ†ç±»ï¼‰
- æŠ¥å‘Šæœç´¢
- æŠ¥å‘Šå½’æ¡£/åˆ é™¤
- æŠ¥å‘Šåˆ†äº«ï¼ˆç”Ÿæˆé“¾æ¥ï¼‰

---

## ğŸ“… å¼€å‘æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| Phase 1 | MCPå®¢æˆ·ç«¯ç»Ÿä¸€å±‚ | 2å¤© | P0 |
| Phase 2 | ç­–ç•¥ç®¡ç†æ¨¡å— | 3å¤© | P0 |
| Phase 3 | å›æµ‹è¿›ç¨‹å¯è§†åŒ– | 3å¤© | P0 |
| Phase 4 | å›æµ‹æ•°æ®å¯è§†åŒ– | 4å¤© | P1 |
| Phase 5 | æŠ¥å‘Šå¯è§†åŒ– | 3å¤© | P1 |

**æ€»è®¡: 15å¤©**

---

## ğŸ”‘ å…³é”®MCPå·¥å…·æ¸…å•

### ç­–ç•¥ç®¡ç†ç›¸å…³
| å·¥å…·å | æœåŠ¡å™¨ | åŠŸèƒ½ |
|--------|--------|------|
| `strategy.list` | strategy_template_server | åˆ—å‡ºæ‰€æœ‰ç­–ç•¥ |
| `strategy.get` | strategy_template_server | è·å–ç­–ç•¥è¯¦æƒ… |
| `strategy.compare` | strategy_template_server | ç­–ç•¥å¯¹æ¯” |
| `strategy.performance` | strategy_template_server | ç­–ç•¥ç»©æ•ˆè¿½è¸ª |

### å›æµ‹è¿›ç¨‹ç›¸å…³
| å·¥å…·å | æœåŠ¡å™¨ | åŠŸèƒ½ |
|--------|--------|------|
| `backtest.bullettrade` | backtest_server | å¯åŠ¨BulletTradeå›æµ‹ |
| `backtest.qmt` | backtest_server | å¯åŠ¨QMTå›æµ‹ |
| `backtest.status` | backtest_server | æŸ¥è¯¢å›æµ‹çŠ¶æ€ |
| `backtest.logs` | backtest_server | è·å–å›æµ‹æ—¥å¿— |
| `backtest.cancel` | backtest_server | å–æ¶ˆå›æµ‹ |

### å›æµ‹æ•°æ®ç›¸å…³
| å·¥å…·å | æœåŠ¡å™¨ | åŠŸèƒ½ |
|--------|--------|------|
| `backtest.get_data` | backtest_server | è·å–å›æµ‹æ•°æ® |
| `backtest.get_equity_curve` | backtest_server | è·å–æƒç›Šæ›²çº¿ |
| `backtest.get_trades` | backtest_server | è·å–äº¤æ˜“æ˜ç»† |
| `backtest.get_positions` | backtest_server | è·å–æŒä»“æ•°æ® |

### æŠ¥å‘Šç›¸å…³
| å·¥å…·å | æœåŠ¡å™¨ | åŠŸèƒ½ |
|--------|--------|------|
| `report.generate` | report_server | ç”ŸæˆæŠ¥å‘Š |
| `report.visualize` | report_server | å¯è§†åŒ–æŠ¥å‘Š |
| `report.archive` | report_server | å½’æ¡£æŠ¥å‘Š |
| `report.list` | report_server | åˆ—å‡ºæŠ¥å‘Š |

---

## ğŸ¨ UI/UXè®¾è®¡è¦ç‚¹

### ç­–ç•¥ç®¡ç†
- å·¦ä¾§ï¼šç­–ç•¥æ ‘ï¼ˆåˆ†ç±»æµè§ˆï¼‰
- ä¸­é—´ï¼šç­–ç•¥åˆ—è¡¨ï¼ˆè¡¨æ ¼/å¡ç‰‡ï¼‰
- å³ä¾§ï¼šç­–ç•¥è¯¦æƒ…ï¼ˆä»£ç /å‚æ•°/æ€§èƒ½ï¼‰

### å›æµ‹è¿›ç¨‹
- é¡¶éƒ¨ï¼šè¿›åº¦æ¡ + çŠ¶æ€æŒ‡ç¤º
- ä¸­é—´ï¼šæ—¥å¿—è¾“å‡ºï¼ˆå¯ç­›é€‰ï¼‰
- åº•éƒ¨ï¼šèµ„æºç›‘æ§ï¼ˆCPU/å†…å­˜ï¼‰

### å›æµ‹æ•°æ®
- é¡¶éƒ¨ï¼šå›¾è¡¨é€‰æ‹©ï¼ˆæƒç›Š/æ”¶ç›Š/æŒä»“ï¼‰
- ä¸­é—´ï¼šä¸»å›¾è¡¨åŒºåŸŸï¼ˆå¯äº¤äº’ï¼‰
- åº•éƒ¨ï¼šæ•°æ®è¡¨æ ¼ï¼ˆæ˜ç»†ï¼‰

### æŠ¥å‘Šå¯è§†åŒ–
- å·¦ä¾§ï¼šæŠ¥å‘Šå¯¼èˆªï¼ˆç« èŠ‚åˆ—è¡¨ï¼‰
- ä¸­é—´ï¼šæŠ¥å‘Šå†…å®¹ï¼ˆHTMLæ¸²æŸ“ï¼‰
- å³ä¾§ï¼šæ“ä½œæŒ‰é’®ï¼ˆå¯¼å‡º/æ‰“å°/åˆ†äº«ï¼‰

---

## ğŸš€ ç«‹å³å¼€å§‹

**Phase 1 - Task 1.1**: åˆ›å»ºPython MCPç»Ÿä¸€å®¢æˆ·ç«¯

---

*éŸ¬ç¿é‡åŒ–ç³»ç»Ÿ TRQuant Â© 2025*
