---
title: "1.7 Cursoræ‰©å±•æ¶æ„"
description: "è¯¦ç»†ä»‹ç»Cursoræ‰©å±•çš„æ¶æ„è®¾è®¡ã€MCPé›†æˆå’ŒWebViewå®ç°ï¼Œç†è§£IDEé›†æˆçš„é‡åŒ–å·¥ä½œå°"
lang: "zh-CN"
layout: "/src/layouts/HandbookLayout.astro"
currentBook: "ashare-book6"
updateDate: "2025-12-13"
---

# ğŸ”Œ 1.7 Cursoræ‰©å±•æ¶æ„

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> æœ¬èŠ‚ç³»ç»Ÿä»‹ç»TRQuant Cursoræ‰©å±•çš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒæ¨¡å—ã€MCPé›†æˆå’ŒWebViewå®ç°ã€‚TRQuant Cursor Extensionæ˜¯ä¸€ä¸ªä¸“ä¸ºAè‚¡é‡åŒ–æŠ•èµ„è®¾è®¡çš„Cursor IDEæ’ä»¶ï¼Œå®ƒå°†éŸ¬ç¿é‡åŒ–ç³»ç»Ÿçš„æ ¸å¿ƒèƒ½åŠ›å°è£…ä¸ºå¯è§†åŒ–å‘½ä»¤å’ŒMCPå·¥å…·ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨Cursorä¸­ç›´æ¥è¿›è¡Œå¸‚åœºåˆ†æã€å› å­é€‰æ‹©å’Œç­–ç•¥ç”Ÿæˆã€‚

## ğŸ“‹ ç« èŠ‚æ¦‚è§ˆ

<script>
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    const headerOffset = 100;
    const elementPosition = element.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}
</script>

<div class="section-overview">
  <div class="section-item" onclick="scrollToSection('section-1-7-1')">
    <h4>ğŸ¯ 1.7.1 ç³»ç»Ÿæ¦‚è¿°</h4>
    <p>è®¾è®¡ç›®æ ‡ã€æ ¸å¿ƒä»·å€¼ã€ç³»ç»Ÿå®šä½</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-1-7-2')">
    <h4>ğŸ—ï¸ 1.7.2 ç³»ç»Ÿæ¶æ„</h4>
    <p>åˆ†å±‚è®¾è®¡ã€é€šä¿¡æœºåˆ¶ã€æ¨¡å—å…³ç³»</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-1-7-3')">
    <h4>ğŸ“¦ 1.7.3 æ ¸å¿ƒæ¨¡å—</h4>
    <p>å‘½ä»¤æ¨¡å—ã€æœåŠ¡æ¨¡å—ã€è§†å›¾æ¨¡å—ã€å·¥å…·æ¨¡å—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-1-7-4')">
    <h4>ğŸ”— 1.7.4 MCPé›†æˆ</h4>
    <p>MCPåè®®ã€å·¥å…·åˆ—è¡¨ã€ä½¿ç”¨ç¤ºä¾‹</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-1-7-5')">
    <h4>ğŸ–¥ï¸ 1.7.5 WebViewå®ç°</h4>
    <p>WebViewæ¶æ„ã€æ¶ˆæ¯é€šä¿¡ã€æ•°æ®ç»‘å®š</p>
  </div>
</div>

<h2 id="section-1-7-1">ğŸ¯ 1.7.1 ç³»ç»Ÿæ¦‚è¿°</h2>

### è®¾è®¡ç›®æ ‡

TRQuant Cursor Extensionçš„è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒç›®æ ‡ï¼š

<div class="key-points">
  <div class="key-point">
    <h4>ğŸ¯ æ˜“ç”¨æ€§</h4>
    <p>é€šè¿‡å‘½ä»¤é¢æ¿å’Œå¿«æ·é”®å¿«é€Ÿè®¿é—®é‡åŒ–åŠŸèƒ½ï¼Œé™ä½ä½¿ç”¨é—¨æ§›</p>
  </div>
  <div class="key-point">
    <h4>ğŸ“Š å¯è§†åŒ–</h4>
    <p>ä½¿ç”¨WebViewå±•ç¤ºä¸“ä¸šçš„åˆ†ææŠ¥å‘Šå’Œç­–ç•¥ä»£ç ï¼Œç›´è§‚æ˜“ç”¨</p>
  </div>
  <div class="key-point">
    <h4>ğŸ¤– AIå¢å¼º</h4>
    <p>é€šè¿‡MCPåè®®è®©Cursor AIç›´æ¥è°ƒç”¨é‡åŒ–å·¥å…·ï¼Œå®ç°æ™ºèƒ½åŒ–</p>
  </div>
  <div class="key-point">
    <h4>ğŸŒ è·¨å¹³å°</h4>
    <p>æ”¯æŒLinuxã€macOSå’ŒWindowsï¼Œç»Ÿä¸€ä½“éªŒ</p>
  </div>
</div>

### æ ¸å¿ƒä»·å€¼

1. **å¸‚åœºæ´å¯Ÿ**ï¼šå®æ—¶è·å–å¸‚åœºçŠ¶æ€ï¼ˆRegimeï¼‰å’ŒæŠ•èµ„ä¸»çº¿
2. **æ™ºèƒ½é€‰è‚¡**ï¼šåŸºäºå¸‚åœºç¯å¢ƒæ¨èé‡åŒ–å› å­
3. **ç­–ç•¥ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”ŸæˆPTrade/QMTç­–ç•¥ä»£ç 
4. **å›æµ‹åˆ†æ**ï¼šåˆ†æå›æµ‹ç»“æœï¼Œæä¾›ä¼˜åŒ–å»ºè®®

### ç³»ç»Ÿå®šä½

- **å·¥ä½œæµä½ç½®**ï¼šCursor/VS Codeç¯å¢ƒä¸­çš„é‡åŒ–æŠ•èµ„å·¥ä½œæµæ”¯æŒ
- **æ ¸å¿ƒèŒè´£**ï¼šå‘½ä»¤è°ƒç”¨ã€è§†å›¾å±•ç¤ºã€MCPé›†æˆã€æ¡Œé¢ç³»ç»Ÿé›†æˆ
- **æœåŠ¡å¯¹è±¡**ï¼šCursor/VS Codeç”¨æˆ·ï¼ŒAIåŠ©æ‰‹ï¼ˆé€šè¿‡MCPï¼‰

<h2 id="section-1-7-2">ğŸ—ï¸ 1.7.2 ç³»ç»Ÿæ¶æ„</h2>

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Cursor IDE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Commands     â”‚    â”‚    Views       â”‚                   â”‚
â”‚  â”‚ (TypeScript)   â”‚    â”‚   (WebView)    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚          â”‚                     â”‚                             â”‚
â”‚          â–¼                     â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚           TRQuantClient                  â”‚                â”‚
â”‚  â”‚     (TypeScript Service Layer)          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                      â”‚                                       â”‚
â”‚                      â”‚ JSON over stdio                       â”‚
â”‚                      â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚           bridge.py                      â”‚                â”‚
â”‚  â”‚     (Python Backend Bridge)             â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                      â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TRQuant Core                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Trend     â”‚  â”‚   Factor    â”‚  â”‚  Strategy   â”‚         â”‚
â”‚  â”‚  Analyzer   â”‚  â”‚   Manager   â”‚  â”‚  Generator  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  FiveDim    â”‚  â”‚  Candidate  â”‚  â”‚  Workflow   â”‚         â”‚
â”‚  â”‚  Scorer     â”‚  â”‚   Pool      â”‚  â”‚ Orchestratorâ”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åˆ†å±‚è®¾è®¡

<div class="comparison-table">
  <table>
    <thead>
      <tr>
        <th>å±‚çº§</th>
        <th>ç»„ä»¶</th>
        <th>èŒè´£</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>è¡¨ç°å±‚</strong></td>
        <td>Commands, Views</td>
        <td>ç”¨æˆ·äº¤äº’ã€WebViewæ¸²æŸ“</td>
      </tr>
      <tr>
        <td><strong>æœåŠ¡å±‚</strong></td>
        <td>TRQuantClient, MCPRegistrar</td>
        <td>é€šä¿¡ç®¡ç†ã€é…ç½®ç®¡ç†</td>
      </tr>
      <tr>
        <td><strong>æ¡¥æ¥å±‚</strong></td>
        <td>bridge.py</td>
        <td>TypeScript-Pythoné€šä¿¡</td>
      </tr>
      <tr>
        <td><strong>æ ¸å¿ƒå±‚</strong></td>
        <td>TRQuant Core</td>
        <td>é‡åŒ–åˆ†æã€ç­–ç•¥ç”Ÿæˆ</td>
      </tr>
    </tbody>
  </table>
</div>

### é€šä¿¡æœºåˆ¶

**JSON over stdio**ï¼š
```
TypeScript                    Python
    â”‚                            â”‚
    â”‚  {"action": "xxx", ...}    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                            â”‚
    â”‚  {"ok": true, "data": ...} â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

<h2 id="section-1-7-3">ğŸ“¦ 1.7.3 æ ¸å¿ƒæ¨¡å—</h2>

### å‘½ä»¤æ¨¡å— (Commands)

<div class="comparison-table">
  <table>
    <thead>
      <tr>
        <th>å‘½ä»¤</th>
        <th>åŠŸèƒ½</th>
        <th>æ–‡ä»¶</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>trquant.getMarketStatus</code></td>
        <td>è·å–å¸‚åœºçŠ¶æ€</td>
        <td><code>getMarketStatus.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.getMainlines</code></td>
        <td>è·å–æŠ•èµ„ä¸»çº¿</td>
        <td><code>getMainlines.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.recommendFactors</code></td>
        <td>æ¨èå› å­</td>
        <td><code>recommendFactors.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.generateStrategy</code></td>
        <td>ç”Ÿæˆç­–ç•¥</td>
        <td><code>generateStrategy.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.analyzeBacktest</code></td>
        <td>å›æµ‹åˆ†æ</td>
        <td><code>analyzeBacktest.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.enableMCP</code></td>
        <td>å¯ç”¨MCP</td>
        <td><code>extension.ts</code></td>
      </tr>
      <tr>
        <td><code>trquant.showPanel</code></td>
        <td>æ‰“å¼€é¢æ¿</td>
        <td><code>extension.ts</code></td>
      </tr>
    </tbody>
  </table>
</div>

### æœåŠ¡æ¨¡å— (Services)

**TRQuantClient**ï¼š
- å°è£…ä¸Pythonåç«¯é€šä¿¡
- æä¾›ç±»å‹å®‰å…¨çš„API
- å¤„ç†è¶…æ—¶å’Œé”™è¯¯

**MCPRegistrar**ï¼š
- æ³¨å†ŒMCP Serveråˆ°Cursor
- ç®¡ç†MCPé…ç½®æ–‡ä»¶
- è·¨å¹³å°è·¯å¾„å¤„ç†

### è§†å›¾æ¨¡å— (Views)

**WebViewé¢æ¿**ï¼š
- `mainDashboard.ts`ï¼šä¸»æ§åˆ¶å°
- `marketPanel.ts`ï¼šå¸‚åœºåˆ†æé¢æ¿
- `workflowStepPanel.ts`ï¼šå·¥ä½œæµæ­¥éª¤é¢æ¿

### å·¥å…·æ¨¡å— (Utils)

**Logger**ï¼š
- å¤šçº§åˆ«æ—¥å¿—ï¼ˆDEBUG/INFO/WARN/ERRORï¼‰
- è¾“å‡ºåˆ°VS Code Output Channel
- é”™è¯¯çº§åˆ«è‡ªåŠ¨å¼¹çª—é€šçŸ¥

**Config**ï¼š
- é›†ä¸­é…ç½®ç®¡ç†
- æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰
- é…ç½®å˜æ›´ç›‘å¬

**Errors**ï¼š
- è‡ªå®šä¹‰é”™è¯¯ç±»å‹
- é”™è¯¯ç æšä¸¾
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

<h2 id="section-1-7-4">ğŸ”— 1.7.4 MCPé›†æˆ</h2>

### MCPå·¥å…·åˆ—è¡¨

<div class="comparison-table">
  <table>
    <thead>
      <tr>
        <th>å·¥å…·</th>
        <th>æè¿°</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>trquant_market_status</code></td>
        <td>è·å–å¸‚åœºçŠ¶æ€å’ŒRegime</td>
      </tr>
      <tr>
        <td><code>trquant_mainlines</code></td>
        <td>è·å–æŠ•èµ„ä¸»çº¿TOP N</td>
      </tr>
      <tr>
        <td><code>trquant_recommend_factors</code></td>
        <td>æ¨èé‡åŒ–å› å­</td>
      </tr>
      <tr>
        <td><code>trquant_generate_strategy</code></td>
        <td>ç”Ÿæˆç­–ç•¥ä»£ç </td>
      </tr>
      <tr>
        <td><code>trquant_analyze_backtest</code></td>
        <td>åˆ†æå›æµ‹ç»“æœ</td>
      </tr>
    </tbody>
  </table>
</div>

### ä½¿ç”¨ç¤ºä¾‹

åœ¨Cursor AIå¯¹è¯ä¸­ï¼š
```
ç”¨æˆ·: å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªé€‚åˆå½“å‰å¸‚åœºçš„PTradeç­–ç•¥

AI: æˆ‘æ¥è°ƒç”¨TRQuantå·¥å…·åˆ†æå¸‚åœºå¹¶ç”Ÿæˆç­–ç•¥...
[è°ƒç”¨ trquant_market_status]
[è°ƒç”¨ trquant_recommend_factors]
[è°ƒç”¨ trquant_generate_strategy]
```

<h2 id="section-1-7-5">ğŸ–¥ï¸ 1.7.5 WebViewå®ç°</h2>

### WebViewæ¶æ„

```
Cursor IDE
    â†“
WebView (Chromium)
    â†“
Reactåº”ç”¨
    â†“
MCP Server (é€šè¿‡stdio)
    â†“
åç«¯æœåŠ¡
```

### æ¶ˆæ¯é€šä¿¡

**åŒå‘é€šä¿¡**ï¼š
- TypeScript â†’ WebViewï¼š`webview.postMessage()`
- WebView â†’ TypeScriptï¼š`window.vscode.postMessage()`

### æ•°æ®ç»‘å®š

- å“åº”å¼æ•°æ®æ›´æ–°
- å®æ—¶çŠ¶æ€åŒæ­¥
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

## ğŸ”— ç›¸å…³ç« èŠ‚

- **1.3 æŠ€æœ¯æ ˆé€‰å‹**ï¼šäº†è§£Cursoræ‰©å±•çš„æŠ€æœ¯æ ˆé€‰æ‹©
- **1.8 å‰ç«¯æŠ€æœ¯æ ˆ**ï¼šäº†è§£WebViewå’Œå‰ç«¯æŠ€æœ¯
- **9.5 Cursoræ‰©å±•é›†æˆ**ï¼šæ·±å…¥äº†è§£æ‰©å±•é›†æˆçš„è¯¦ç»†å®ç°

## ğŸ’¡ å…³é”®è¦ç‚¹

1. **åˆ†å±‚æ¶æ„**ï¼šè¡¨ç°å±‚ã€æœåŠ¡å±‚ã€æ¡¥æ¥å±‚ã€æ ¸å¿ƒå±‚æ¸…æ™°åˆ†ç¦»
2. **é€šä¿¡æœºåˆ¶**ï¼šJSON over stdioå®ç°TypeScript-Pythoné€šä¿¡
3. **MCPé›†æˆ**ï¼šé€šè¿‡MCPåè®®å®ç°AIå·¥å…·è°ƒç”¨
4. **WebViewå®ç°**ï¼šä½¿ç”¨Chromium WebViewå±•ç¤ºä¸“ä¸šç•Œé¢

---

*æœ€åæ›´æ–°: 2025-12-13*  
*é€‚ç”¨ç‰ˆæœ¬: v1.0.0+*
