---
title: "9.3 æ¡Œé¢ç³»ç»Ÿæ¶æ„"
description: "æ·±å…¥è§£æTRQuantæ¡Œé¢ç³»ç»Ÿæ¶æ„ï¼ŒåŒ…æ‹¬PyQt6ä¸»çª—å£ã€ç»„ä»¶ç³»ç»Ÿã€æ ·å¼ç³»ç»Ÿã€å»¶è¿ŸåŠ è½½ç­‰æ ¸å¿ƒæŠ€æœ¯ï¼Œä¸ºé‡åŒ–æŠ•èµ„ç³»ç»Ÿæä¾›å®Œæ•´çš„æ¡Œé¢GUIå¼€å‘èƒ½åŠ›"
lang: "zh-CN"
layout: "/src/layouts/HandbookLayout.astro"
currentBook: "ashare-book6"
updateDate: "2025-12-12"
---

# ğŸ–¥ï¸ 9.3 æ¡Œé¢ç³»ç»Ÿæ¶æ„

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> æœ¬èŠ‚ç³»ç»Ÿä»‹ç»TRQuantæ¡Œé¢ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬PyQt6ä¸»çª—å£ã€ç»„ä»¶ç³»ç»Ÿã€æ ·å¼ç³»ç»Ÿã€å»¶è¿ŸåŠ è½½æœºåˆ¶ç­‰æ ¸å¿ƒæŠ€æœ¯ã€‚é€šè¿‡ç†è§£æ¡Œé¢ç³»ç»Ÿçš„å®Œæ•´æ¶æ„å’Œå®ç°ç»†èŠ‚ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•æ„å»ºä¸“ä¸šçº§çš„é‡åŒ–æŠ•èµ„æ¡Œé¢åº”ç”¨ï¼Œä¸ºç³»ç»Ÿå¼€å‘æä¾›å¯ç›´æ¥ä½¿ç”¨çš„ä»£ç ç¤ºä¾‹å’Œå®ç°æ–¹æ¡ˆã€‚

æ¡Œé¢ç³»ç»Ÿæ˜¯TRQuantç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæä¾›å¯è§†åŒ–çš„é‡åŒ–æŠ•èµ„å·¥ä½œæµç•Œé¢ï¼Œæ”¯æŒ8æ­¥éª¤æŠ•èµ„æµç¨‹çš„å®Œæ•´æ“ä½œã€‚

## ğŸ“‹ ç« èŠ‚æ¦‚è§ˆ

<script>
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    const headerOffset = 100;
    const elementPosition = element.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}
</script>

<div class="section-overview">
  <div class="section-item" onclick="scrollToSection('section-9-3-1')">
    <h4>ğŸ—ï¸ 9.3.1 æ•´ä½“æ¶æ„</h4>
    <p>ä¸»çª—å£è®¾è®¡ã€å¸ƒå±€ç»“æ„ã€æ¨¡å—åˆ’åˆ†ã€å¯åŠ¨æµç¨‹</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-9-3-2')">
    <h4>ğŸ§© 9.3.2 ç»„ä»¶ç³»ç»Ÿ</h4>
    <p>åŠŸèƒ½é¢æ¿ã€ç»„ä»¶åŸºç±»ã€å»¶è¿ŸåŠ è½½ã€ç»„ä»¶é€šä¿¡</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-9-3-3')">
    <h4>ğŸ¨ 9.3.3 æ ·å¼ç³»ç»Ÿ</h4>
    <p>ä¸»é¢˜ç®¡ç†ã€é¢œè‰²ç³»ç»Ÿã€å­—ä½“ç³»ç»Ÿã€æŒ‰é’®æ ·å¼</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-9-3-4')">
    <h4>âš¡ 9.3.4 æ€§èƒ½ä¼˜åŒ–</h4>
    <p>å»¶è¿ŸåŠ è½½ã€å†…å­˜ç®¡ç†ã€æ¸²æŸ“ä¼˜åŒ–ã€å¯åŠ¨ä¼˜åŒ–</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-9-3-5')">
    <h4>ğŸ”Œ 9.3.5 ç³»ç»Ÿé›†æˆ</h4>
    <p>ä¸åç«¯æœåŠ¡é›†æˆã€æ•°æ®æµç®¡ç†ã€äº‹ä»¶å¤„ç†ã€é”™è¯¯å¤„ç†</p>
  </div>
</div>

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬èŠ‚å­¦ä¹ ï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š

- **ç†è§£æ•´ä½“æ¶æ„**ï¼šæŒæ¡æ¡Œé¢ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡å’Œæ¨¡å—åˆ’åˆ†
- **å¼€å‘ç»„ä»¶ç³»ç»Ÿ**ï¼šç†è§£åŠŸèƒ½é¢æ¿çš„è®¾è®¡å’Œå®ç°ï¼ŒæŒæ¡å»¶è¿ŸåŠ è½½æœºåˆ¶
- **å®ç°æ ·å¼ç³»ç»Ÿ**ï¼šæŒæ¡ä¸»é¢˜ç®¡ç†ã€é¢œè‰²ç³»ç»Ÿå’Œæ ·å¼åº”ç”¨
- **ä¼˜åŒ–æ€§èƒ½**ï¼šç†è§£å»¶è¿ŸåŠ è½½ã€å†…å­˜ç®¡ç†ç­‰æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯
- **é›†æˆç³»ç»Ÿ**ï¼šæŒæ¡ä¸åç«¯æœåŠ¡é›†æˆã€æ•°æ®æµç®¡ç†å’Œäº‹ä»¶å¤„ç†

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µ

### æ¨¡å—å®šä½

- **å·¥ä½œæµä½ç½®**ï¼šå¯è§†åŒ–ç•Œé¢ï¼Œæ”¯æŒ8æ­¥éª¤æŠ•èµ„æµç¨‹
- **æ ¸å¿ƒèŒè´£**ï¼šæä¾›GUIç•Œé¢ã€ç”¨æˆ·äº¤äº’ã€æ•°æ®å¯è§†åŒ–
- **æœåŠ¡å¯¹è±¡**ï¼šé‡åŒ–æŠ•èµ„å·¥ä½œæµçš„å„ä¸ªæ­¥éª¤

### æŠ€æœ¯æ ˆ

- **GUIæ¡†æ¶**ï¼šPyQt6ï¼ˆPython 3.11+ï¼‰
- **æ¶æ„æ¨¡å¼**ï¼šMVCæ¨¡å¼ï¼ˆModel-View-Controllerï¼‰
- **ç»„ä»¶ç³»ç»Ÿ**ï¼šæ¨¡å—åŒ–ç»„ä»¶ï¼Œå»¶è¿ŸåŠ è½½
- **æ ·å¼ç³»ç»Ÿ**ï¼šCSSæ ·å¼ï¼Œä¸»é¢˜åˆ‡æ¢

### è®¾è®¡åŸåˆ™

- **æ¨¡å—åŒ–**ï¼šæ¯ä¸ªåŠŸèƒ½é¢æ¿ç‹¬ç«‹æ¨¡å—
- **å¯æ‰©å±•**ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½é¢æ¿
- **é«˜æ€§èƒ½**ï¼šå»¶è¿ŸåŠ è½½ï¼Œä¼˜åŒ–å¯åŠ¨é€Ÿåº¦
- **ç”¨æˆ·å‹å¥½**ï¼šç›´è§‚çš„ç•Œé¢ï¼Œæµç•…çš„äº¤äº’

<h2 id="section-9-3-1">ğŸ—ï¸ 9.3.1 æ•´ä½“æ¶æ„</h2>

æ¡Œé¢ç³»ç»Ÿé‡‡ç”¨PyQt6æ¡†æ¶ï¼Œä¸»çª—å£é‡‡ç”¨ä¾§è¾¹æ +å†…å®¹åŒºçš„ç»å…¸å¸ƒå±€ã€‚

### ä¸»çª—å£ç»“æ„

```python
# gui/main_window.py
from PyQt6.QtWidgets import (
    QMainWindow, QWidget, QVBoxLayout, QHBoxLayout,
    QStackedWidget, QPushButton, QFrame, QLabel
)
from PyQt6.QtCore import Qt
from PyQt6.QtGui import QFont

from gui.styles.theme import Colors, Typography

class MainWindow(QMainWindow):
    """ä¸»çª—å£ - ä»¥ç­–ç•¥å¼€å‘ä¸ºæ ¸å¿ƒ"""
    
    def __init__(self):
        super().__init__()
        self.setWindowTitle("éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆ - Taorui Quant Professional")
        self.setMinimumSize(1440, 900)
        
        # è®¾ç½®çª—å£æ ·å¼
        self.setStyleSheet(f"""
            QMainWindow {{
                background-color: {Colors.BG_PRIMARY};
            }}
        """)
        
        self.init_ui()
        self.show_maximized_on_primary_screen()
    
    def show_maximized_on_primary_screen(self):
        """åœ¨ä¸»å±å¹•ä¸Šæœ€å¤§åŒ–æ˜¾ç¤º"""
        from PyQt6.QtWidgets import QApplication
        screen = QApplication.primaryScreen()
        if screen:
            geometry = screen.availableGeometry()
            self.setGeometry(geometry)
        self.showMaximized()
    
    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        central_widget = QWidget()
        self.setCentralWidget(central_widget)
        
        main_layout = QHBoxLayout(central_widget)
        main_layout.setSpacing(0)
        main_layout.setContentsMargins(0, 0, 0, 0)
        
        # ä¾§è¾¹æ 
        sidebar = self.create_sidebar()
        main_layout.addWidget(sidebar)
        
        # ä¸»å†…å®¹åŒº
        self.content_stack = QStackedWidget()
        self.content_stack.setStyleSheet(f"""
            QStackedWidget {{
                background-color: {Colors.BG_SECONDARY};
            }}
        """)
        
        # å»¶è¿ŸåŠ è½½æœºåˆ¶
        self._panels_loaded = {i: False for i in range(12)}
        self._panel_classes = {}
        
        # 0: é¦–é¡µï¼ˆç«‹å³åŠ è½½ï¼‰
        self.home_page = self.create_home_page()
        self.content_stack.addWidget(self.home_page)
        self._panels_loaded[0] = True
        
        # 1-11: åˆ›å»ºå ä½ç¬¦ï¼Œå»¶è¿ŸåŠ è½½
        for i in range(1, 12):
            placeholder = self.create_placeholder_panel(i)
            self.content_stack.addWidget(placeholder)
        
        main_layout.addWidget(self.content_stack)
    
    def create_sidebar(self):
        """åˆ›å»ºä¾§è¾¹æ """
        from gui.main_window import SidebarButton
        
        sidebar = QFrame()
        sidebar.setFixedWidth(240)
        sidebar.setStyleSheet(f"""
            QFrame {{
                background-color: {Colors.BG_TERTIARY};
                border-right: 1px solid {Colors.BORDER_PRIMARY};
            }}
        """)
        
        layout = QVBoxLayout(sidebar)
        layout.setSpacing(8)
        layout.setContentsMargins(12, 20, 12, 20)
        
        # Logoå’Œæ ‡é¢˜
        title_label = QLabel("ğŸ“Š éŸ¬ç¿é‡åŒ–")
        title_label.setStyleSheet(f"""
            QLabel {{
                color: {Colors.PRIMARY};
                font-size: 20px;
                font-weight: 700;
                padding: 12px;
            }}
        """)
        layout.addWidget(title_label)
        
        layout.addSpacing(20)
        
        # å¯¼èˆªæŒ‰é’®
        nav_items = [
            ("ğŸ ", "é¦–é¡µ", 0),
            ("ğŸ“¡", "æ•°æ®æº", 1),
            ("ğŸ“Š", "å¸‚åœºåˆ†æ", 2),
            ("ğŸ¯", "ä¸»çº¿è¯†åˆ«", 3),
            ("ğŸ“ˆ", "å€™é€‰æ± ", 4),
            ("ğŸ”¢", "å› å­åº“", 5),
            ("ğŸ› ï¸", "ç­–ç•¥å¼€å‘", 6),
            ("ğŸ”„", "å›æµ‹éªŒè¯", 7),
            ("ğŸ’¼", "å®ç›˜äº¤æ˜“", 8),
        ]
        
        self.nav_buttons = []
        for icon, text, index in nav_items:
            btn = SidebarButton(icon, text)
            btn.clicked.connect(lambda checked, idx=index: self.switch_panel(idx))
            layout.addWidget(btn)
            self.nav_buttons.append(btn)
        
        # é»˜è®¤é€‰ä¸­é¦–é¡µ
        if self.nav_buttons:
            self.nav_buttons[0].setChecked(True)
        
        layout.addStretch()
        
        return sidebar
    
    def switch_panel(self, index: int):
        """åˆ‡æ¢é¢æ¿"""
        # æ›´æ–°æŒ‰é’®çŠ¶æ€
        for i, btn in enumerate(self.nav_buttons):
            btn.setChecked(i == index)
        
        # å»¶è¿ŸåŠ è½½é¢æ¿
        if not self._panels_loaded[index]:
            self._load_panel(index)
        
        # åˆ‡æ¢åˆ°å¯¹åº”é¢æ¿
        self.content_stack.setCurrentIndex(index)
    
    def _load_panel(self, index: int):
        """å»¶è¿ŸåŠ è½½é¢æ¿"""
        panel_map = {
            1: "gui.widgets.data_source_panel.DataSourcePanel",
            2: "gui.widgets.market_analysis_panel.MarketAnalysisPanel",
            3: "gui.widgets.mainline_panel.MainlinePanel",
            4: "gui.widgets.candidate_pool_panel.CandidatePoolPanel",
            5: "gui.widgets.factor_library_panel.FactorLibraryPanel",
            6: "gui.widgets.strategy_panel.StrategyPanel",
            7: "gui.widgets.backtest_panel.BacktestPanel",
            8: "gui.widgets.trading_panel.TradingPanel",
        }
        
        if index in panel_map:
            try:
                module_path, class_name = panel_map[index].rsplit('.', 1)
                module = __import__(module_path, fromlist=[class_name])
                panel_class = getattr(module, class_name)
                
                # åˆ›å»ºé¢æ¿å®ä¾‹
                panel = panel_class()
                
                # æ›¿æ¢å ä½ç¬¦
                self.content_stack.removeWidget(self.content_stack.widget(index))
                self.content_stack.insertWidget(index, panel)
                
                self._panels_loaded[index] = True
                self._panel_classes[index] = panel_class
                
            except Exception as e:
                logger.error(f"åŠ è½½é¢æ¿ {index} å¤±è´¥: {e}")
```

### å¯åŠ¨æµç¨‹

```python
# TRQuant.py
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆ - TaoRui Quant Professional
åŒå‡»æ­¤æ–‡ä»¶å¯åŠ¨åº”ç”¨
"""
import sys
import os
import logging
from pathlib import Path

# è®¾ç½®é¡¹ç›®è·¯å¾„
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

# è®¾ç½®ç¯å¢ƒå˜é‡
os.environ['QT_AUTO_SCREEN_SCALE_FACTOR'] = '1'

# é…ç½®æ—¥å¿—
logs_dir = project_root / "logs"
logs_dir.mkdir(exist_ok=True)

log_file = logs_dir / "trquant.log"
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    handlers=[
        logging.FileHandler(log_file, encoding='utf-8', mode='a'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

def main():
    """ä¸»å‡½æ•°"""
    from PyQt6.QtWidgets import QApplication
    from gui.main_window import MainWindow
    
    # åˆ›å»ºåº”ç”¨
    app = QApplication(sys.argv)
    app.setApplicationName("éŸ¬ç¿é‡åŒ–ä¸“ä¸šç‰ˆ")
    
    # åˆ›å»ºä¸»çª—å£
    window = MainWindow()
    window.show()
    
    # è¿è¡Œåº”ç”¨
    sys.exit(app.exec())

if __name__ == "__main__":
    main()
```

<h2 id="section-9-3-2">ğŸ§© 9.3.2 ç»„ä»¶ç³»ç»Ÿ</h2>

ç»„ä»¶ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªåŠŸèƒ½é¢æ¿ç‹¬ç«‹å®ç°ã€‚

### ç»„ä»¶åŸºç±»

```python
# gui/widgets/base_panel.py
from PyQt6.QtWidgets import QWidget, QVBoxLayout, QLabel
from PyQt6.QtCore import Qt
from gui.styles.theme import Colors

class BasePanel(QWidget):
    """åŠŸèƒ½é¢æ¿åŸºç±»"""
    
    def __init__(self, title: str, parent=None):
        super().__init__(parent)
        self.title = title
        self.init_ui()
    
    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        layout = QVBoxLayout(self)
        layout.setContentsMargins(20, 20, 20, 20)
        layout.setSpacing(16)
        
        # æ ‡é¢˜
        title_label = QLabel(self.title)
        title_label.setStyleSheet(f"""
            QLabel {{
                color: {Colors.TEXT_PRIMARY};
                font-size: 24px;
                font-weight: 700;
                padding: 12px 0;
            }}
        """)
        layout.addWidget(title_label)
        
        # å†…å®¹åŒºï¼ˆå­ç±»å®ç°ï¼‰
        self.content_widget = QWidget()
        layout.addWidget(self.content_widget)
    
    def create_content(self):
        """åˆ›å»ºå†…å®¹ï¼ˆå­ç±»å®ç°ï¼‰"""
        pass
```

### åŠŸèƒ½é¢æ¿ç¤ºä¾‹

```python
# gui/widgets/data_source_panel.py
from gui.widgets.base_panel import BasePanel
from PyQt6.QtWidgets import (
    QVBoxLayout, QHBoxLayout, QPushButton, QTableWidget,
    QTableWidgetItem, QHeaderView, QLabel, QComboBox
)
from PyQt6.QtCore import Qt
from gui.styles.theme import Colors, ButtonStyles

class DataSourcePanel(BasePanel):
    """æ•°æ®æºç®¡ç†é¢æ¿"""
    
    def __init__(self, parent=None):
        super().__init__("ğŸ“¡ æ•°æ®æºç®¡ç†", parent)
        self.create_content()
    
    def create_content(self):
        """åˆ›å»ºå†…å®¹"""
        layout = QVBoxLayout(self.content_widget)
        layout.setSpacing(16)
        
        # å·¥å…·æ 
        toolbar = self.create_toolbar()
        layout.addWidget(toolbar)
        
        # æ•°æ®æºåˆ—è¡¨
        self.data_table = self.create_data_table()
        layout.addWidget(self.data_table)
        
        # çŠ¶æ€æ 
        status_bar = self.create_status_bar()
        layout.addWidget(status_bar)
    
    def create_toolbar(self):
        """åˆ›å»ºå·¥å…·æ """
        toolbar = QWidget()
        layout = QHBoxLayout(toolbar)
        layout.setContentsMargins(0, 0, 0, 0)
        
        # åˆ·æ–°æŒ‰é’®
        refresh_btn = QPushButton("ğŸ”„ åˆ·æ–°")
        refresh_btn.setStyleSheet(ButtonStyles.PRIMARY)
        refresh_btn.clicked.connect(self.refresh_data_sources)
        layout.addWidget(refresh_btn)
        
        # æ·»åŠ æ•°æ®æºæŒ‰é’®
        add_btn = QPushButton("â• æ·»åŠ æ•°æ®æº")
        add_btn.setStyleSheet(ButtonStyles.SUCCESS)
        add_btn.clicked.connect(self.add_data_source)
        layout.addWidget(add_btn)
        
        layout.addStretch()
        
        return toolbar
    
    def create_data_table(self):
        """åˆ›å»ºæ•°æ®æºè¡¨æ ¼"""
        table = QTableWidget()
        table.setColumnCount(5)
        table.setHorizontalHeaderLabels([
            "æ•°æ®æº", "ç±»å‹", "çŠ¶æ€", "å»¶è¿Ÿ", "æ“ä½œ"
        ])
        
        # è®¾ç½®è¡¨æ ¼æ ·å¼
        table.setStyleSheet(f"""
            QTableWidget {{
                background-color: {Colors.BG_SECONDARY};
                border: 1px solid {Colors.BORDER_PRIMARY};
                border-radius: 8px;
                gridline-color: {Colors.BORDER_SECONDARY};
            }}
            QTableWidget::item {{
                padding: 8px;
                border-bottom: 1px solid {Colors.BORDER_SECONDARY};
            }}
            QHeaderView::section {{
                background-color: {Colors.BG_TERTIARY};
                padding: 12px;
                border: none;
                border-bottom: 2px solid {Colors.BORDER_PRIMARY};
                font-weight: 600;
            }}
        """)
        
        # è®¾ç½®åˆ—å®½
        header = table.horizontalHeader()
        header.setSectionResizeMode(0, QHeaderView.ResizeMode.Stretch)
        header.setSectionResizeMode(1, QHeaderView.ResizeMode.ResizeToContents)
        header.setSectionResizeMode(2, QHeaderView.ResizeMode.ResizeToContents)
        header.setSectionResizeMode(3, QHeaderView.ResizeMode.ResizeToContents)
        header.setSectionResizeMode(4, QHeaderView.ResizeMode.ResizeToContents)
        
        # åŠ è½½æ•°æ®
        self.load_data_sources(table)
        
        return table
    
    def load_data_sources(self, table: QTableWidget):
        """åŠ è½½æ•°æ®æº"""
        from core.data_source_manager import DataSourceManager
        
        data_manager = DataSourceManager()
        sources = data_manager.get_all_sources()
        
        table.setRowCount(len(sources))
        
        for row, (name, source) in enumerate(sources.items()):
            # æ•°æ®æºåç§°
            table.setItem(row, 0, QTableWidgetItem(name))
            
            # ç±»å‹
            source_type = source.get('type', 'unknown')
            table.setItem(row, 1, QTableWidgetItem(source_type))
            
            # çŠ¶æ€
            status = "âœ… åœ¨çº¿" if source.get('connected', False) else "âŒ ç¦»çº¿"
            status_item = QTableWidgetItem(status)
            status_item.setTextAlignment(Qt.AlignmentFlag.AlignCenter)
            table.setItem(row, 2, status_item)
            
            # å»¶è¿Ÿ
            latency = source.get('latency', 'N/A')
            table.setItem(row, 3, QTableWidgetItem(str(latency)))
            
            # æ“ä½œæŒ‰é’®
            action_btn = QPushButton("é…ç½®")
            action_btn.setStyleSheet(ButtonStyles.SECONDARY)
            action_btn.clicked.connect(lambda checked, n=name: self.configure_source(n))
            table.setCellWidget(row, 4, action_btn)
    
    def refresh_data_sources(self):
        """åˆ·æ–°æ•°æ®æº"""
        self.load_data_sources(self.data_table)
    
    def add_data_source(self):
        """æ·»åŠ æ•°æ®æº"""
        # å®ç°æ·»åŠ æ•°æ®æºé€»è¾‘
        pass
    
    def configure_source(self, source_name: str):
        """é…ç½®æ•°æ®æº"""
        # å®ç°é…ç½®æ•°æ®æºé€»è¾‘
        pass
    
    def create_status_bar(self):
        """åˆ›å»ºçŠ¶æ€æ """
        status_bar = QLabel("å°±ç»ª")
        status_bar.setStyleSheet(f"""
            QLabel {{
                color: {Colors.TEXT_MUTED};
                padding: 8px;
                background-color: {Colors.BG_TERTIARY};
                border-radius: 4px;
            }}
        """)
        return status_bar
```

<h2 id="section-9-3-3">ğŸ¨ 9.3.3 æ ·å¼ç³»ç»Ÿ</h2>

æ ·å¼ç³»ç»Ÿæä¾›ç»Ÿä¸€çš„ä¸»é¢˜ã€é¢œè‰²å’Œæ ·å¼ç®¡ç†ã€‚

### ä¸»é¢˜ç³»ç»Ÿ

```python
# gui/styles/theme.py
"""
ä¸»é¢˜ç³»ç»Ÿ - ç»Ÿä¸€çš„é¢œè‰²ã€å­—ä½“ã€æ ·å¼å®šä¹‰
"""

class Colors:
    """é¢œè‰²å®šä¹‰"""
    # ä¸»è‰²è°ƒ
    PRIMARY = "#2563eb"      # è“è‰²
    ACCENT = "#f59e0b"       # é‡‘è‰²
    SUCCESS = "#10b981"      # ç»¿è‰²
    WARNING = "#f59e0b"      # æ©™è‰²
    ERROR = "#ef4444"        # çº¢è‰²
    
    # èƒŒæ™¯è‰²
    BG_PRIMARY = "#ffffff"   # ä¸»èƒŒæ™¯ï¼ˆç™½è‰²ï¼‰
    BG_SECONDARY = "#f8fafc" # æ¬¡èƒŒæ™¯ï¼ˆæµ…ç°ï¼‰
    BG_TERTIARY = "#f1f5f9"  # ä¸‰çº§èƒŒæ™¯ï¼ˆæ›´æµ…ç°ï¼‰
    BG_HOVER = "#e2e8f0"     # æ‚¬åœèƒŒæ™¯
    
    # æ–‡å­—é¢œè‰²
    TEXT_PRIMARY = "#1e293b"   # ä¸»æ–‡å­—ï¼ˆæ·±ç°ï¼‰
    TEXT_SECONDARY = "#475569" # æ¬¡æ–‡å­—ï¼ˆä¸­ç°ï¼‰
    TEXT_MUTED = "#94a3b8"     # å¼±æ–‡å­—ï¼ˆæµ…ç°ï¼‰
    
    # è¾¹æ¡†é¢œè‰²
    BORDER_PRIMARY = "#e2e8f0"   # ä¸»è¾¹æ¡†
    BORDER_SECONDARY = "#cbd5e1" # æ¬¡è¾¹æ¡†

class Typography:
    """å­—ä½“å®šä¹‰"""
    FONT_FAMILY = "Microsoft YaHei, Arial, sans-serif"
    FONT_SIZE_BASE = 14
    FONT_SIZE_LARGE = 18
    FONT_SIZE_SMALL = 12
    FONT_WEIGHT_NORMAL = 400
    FONT_WEIGHT_BOLD = 700

class ButtonStyles:
    """æŒ‰é’®æ ·å¼"""
    PRIMARY = f"""
        QPushButton {{
            background-color: {Colors.PRIMARY};
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
        }}
        QPushButton:hover {{
            background-color: #1d4ed8;
        }}
        QPushButton:pressed {{
            background-color: #1e40af;
        }}
    """
    
    SECONDARY = f"""
        QPushButton {{
            background-color: {Colors.BG_TERTIARY};
            color: {Colors.TEXT_PRIMARY};
            border: 1px solid {Colors.BORDER_PRIMARY};
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 500;
        }}
        QPushButton:hover {{
            background-color: {Colors.BG_HOVER};
        }}
    """
    
    SUCCESS = f"""
        QPushButton {{
            background-color: {Colors.SUCCESS};
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
        }}
        QPushButton:hover {{
            background-color: #059669;
        }}
    """

class CardStyles:
    """å¡ç‰‡æ ·å¼"""
    CARD = f"""
        QFrame {{
            background-color: {Colors.BG_PRIMARY};
            border: 1px solid {Colors.BORDER_PRIMARY};
            border-radius: 12px;
            padding: 16px;
        }}
    """
```

<h2 id="section-9-3-4">âš¡ 9.3.4 æ€§èƒ½ä¼˜åŒ–</h2>

æ€§èƒ½ä¼˜åŒ–åŒ…æ‹¬å»¶è¿ŸåŠ è½½ã€å†…å­˜ç®¡ç†å’Œæ¸²æŸ“ä¼˜åŒ–ã€‚

### å»¶è¿ŸåŠ è½½æœºåˆ¶

```python
# gui/main_window.py (å»¶è¿ŸåŠ è½½éƒ¨åˆ†)
class MainWindow(QMainWindow):
    """ä¸»çª—å£ - å»¶è¿ŸåŠ è½½ä¼˜åŒ–"""
    
    def _load_panel(self, index: int):
        """å»¶è¿ŸåŠ è½½é¢æ¿"""
        if self._panels_loaded[index]:
            return
        
        panel_map = {
            1: ("gui.widgets.data_source_panel", "DataSourcePanel"),
            2: ("gui.widgets.market_analysis_panel", "MarketAnalysisPanel"),
            3: ("gui.widgets.mainline_panel", "MainlinePanel"),
            4: ("gui.widgets.candidate_pool_panel", "CandidatePoolPanel"),
            5: ("gui.widgets.factor_library_panel", "FactorLibraryPanel"),
            6: ("gui.widgets.strategy_panel", "StrategyPanel"),
            7: ("gui.widgets.backtest_panel", "BacktestPanel"),
            8: ("gui.widgets.trading_panel", "TradingPanel"),
        }
        
        if index in panel_map:
            try:
                module_path, class_name = panel_map[index]
                module = __import__(module_path, fromlist=[class_name])
                panel_class = getattr(module, class_name)
                
                # åˆ›å»ºé¢æ¿å®ä¾‹
                panel = panel_class()
                
                # æ›¿æ¢å ä½ç¬¦
                old_widget = self.content_stack.widget(index)
                self.content_stack.removeWidget(old_widget)
                old_widget.deleteLater()  # é‡Šæ”¾å†…å­˜
                
                self.content_stack.insertWidget(index, panel)
                self._panels_loaded[index] = True
                self._panel_classes[index] = panel_class
                
                logger.info(f"é¢æ¿ {index} åŠ è½½å®Œæˆ")
                
            except Exception as e:
                logger.error(f"åŠ è½½é¢æ¿ {index} å¤±è´¥: {e}")
                # æ˜¾ç¤ºé”™è¯¯æç¤º
                from PyQt6.QtWidgets import QMessageBox
                QMessageBox.warning(
                    self,
                    "åŠ è½½å¤±è´¥",
                    f"åŠ è½½é¢æ¿å¤±è´¥: {e}\n\nè¯·æ£€æŸ¥æ¨¡å—æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚"
                )
```

<h2 id="section-9-3-5">ğŸ”Œ 9.3.5 ç³»ç»Ÿé›†æˆ</h2>

ç³»ç»Ÿé›†æˆåŒ…æ‹¬ä¸åç«¯æœåŠ¡é›†æˆã€æ•°æ®æµç®¡ç†å’Œäº‹ä»¶å¤„ç†ã€‚

### ä¸åç«¯æœåŠ¡é›†æˆ

```python
# gui/widgets/base_panel.py (æ‰©å±•)
from PyQt6.QtCore import QThread, pyqtSignal
from typing import Dict, Any, Optional

class DataFetchWorker(QThread):
    """æ•°æ®è·å–å·¥ä½œçº¿ç¨‹"""
    data_ready = pyqtSignal(dict)
    error_occurred = pyqtSignal(str)
    
    def __init__(self, fetch_func, *args, **kwargs):
        super().__init__()
        self.fetch_func = fetch_func
        self.args = args
        self.kwargs = kwargs
    
    def run(self):
        """æ‰§è¡Œæ•°æ®è·å–"""
        try:
            result = self.fetch_func(*self.args, **self.kwargs)
            self.data_ready.emit(result)
        except Exception as e:
            self.error_occurred.emit(str(e))

class BasePanel(QWidget):
    """åŠŸèƒ½é¢æ¿åŸºç±»ï¼ˆæ‰©å±•ï¼‰"""
    
    def fetch_data_async(
        self,
        fetch_func,
        callback,
        error_callback=None,
        *args,
        **kwargs
    ):
        """
        å¼‚æ­¥è·å–æ•°æ®
        
        Args:
            fetch_func: æ•°æ®è·å–å‡½æ•°
            callback: æˆåŠŸå›è°ƒ
            error_callback: é”™è¯¯å›è°ƒ
            *args, **kwargs: ä¼ é€’ç»™fetch_funcçš„å‚æ•°
        """
        worker = DataFetchWorker(fetch_func, *args, **kwargs)
        worker.data_ready.connect(callback)
        if error_callback:
            worker.error_occurred.connect(error_callback)
        worker.start()
        return worker
```

## ğŸ”— ç›¸å…³ç« èŠ‚

- **1.6 æ¡Œé¢ç³»ç»Ÿæ¶æ„**ï¼šäº†è§£æ¡Œé¢ç³»ç»Ÿçš„æ•´ä½“è®¾è®¡
- **1.8 å‰ç«¯æŠ€æœ¯æ ˆ**ï¼šäº†è§£PyQt6æŠ€æœ¯æ ˆé€‰å‹
- **9.4 GUIå·¥ä½œæµç³»ç»Ÿ**ï¼šäº†è§£GUIå·¥ä½œæµå®ç°
- **9.5 Cursoræ‰©å±•é›†æˆ**ï¼šäº†è§£Cursoræ‰©å±•ä¸æ¡Œé¢ç³»ç»Ÿçš„é›†æˆ

## ğŸ’¡ å…³é”®è¦ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½é¢æ¿ç‹¬ç«‹æ¨¡å—ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
2. **å»¶è¿ŸåŠ è½½**ï¼šä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ï¼ŒæŒ‰éœ€åŠ è½½åŠŸèƒ½é¢æ¿
3. **ç»Ÿä¸€æ ·å¼**ï¼šä½¿ç”¨ç»Ÿä¸€çš„ä¸»é¢˜ç³»ç»Ÿï¼Œä¿æŒç•Œé¢ä¸€è‡´æ€§
4. **å¼‚æ­¥å¤„ç†**ï¼šä½¿ç”¨å·¥ä½œçº¿ç¨‹å¤„ç†è€—æ—¶æ“ä½œï¼Œä¿æŒç•Œé¢å“åº”
5. **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆæœºåˆ¶

## ğŸ”® æ€»ç»“ä¸å±•æœ›

<div class="summary-outlook">
  <h3>æœ¬èŠ‚å›é¡¾</h3>
  <p>æœ¬èŠ‚ç³»ç»Ÿä»‹ç»äº†æ¡Œé¢ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ï¼ŒåŒ…æ‹¬PyQt6ä¸»çª—å£ã€ç»„ä»¶ç³»ç»Ÿã€æ ·å¼ç³»ç»Ÿã€å»¶è¿ŸåŠ è½½æœºåˆ¶å’Œç³»ç»Ÿé›†æˆã€‚é€šè¿‡ç†è§£æ¡Œé¢ç³»ç»Ÿçš„å®Œæ•´æ¶æ„å’Œå®ç°ç»†èŠ‚ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•æ„å»ºä¸“ä¸šçº§çš„é‡åŒ–æŠ•èµ„æ¡Œé¢åº”ç”¨ã€‚</p>
  
  <h3>ä¸‹èŠ‚é¢„å‘Š</h3>
  <p>æŒæ¡äº†æ¡Œé¢ç³»ç»Ÿæ¶æ„åï¼Œä¸‹ä¸€èŠ‚å°†ä»‹ç»GUIå·¥ä½œæµç³»ç»Ÿï¼ŒåŒ…æ‹¬8æ­¥éª¤å·¥ä½œæµçš„GUIå®ç°ã€å·¥ä½œæµçŠ¶æ€ç®¡ç†ã€æ•°æ®æµè½¬ç­‰ã€‚é€šè¿‡ç†è§£GUIå·¥ä½œæµç³»ç»Ÿçš„å®ç°ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•å®ç°å®Œæ•´çš„é‡åŒ–æŠ•èµ„å·¥ä½œæµç•Œé¢ã€‚</p>
  
  <a href="/ashare-book6/009_Chapter9_Platform_Integration/9.4_GUI_Workflow_System_CN" class="next-section">
    ç»§ç»­å­¦ä¹ ï¼š9.4 GUIå·¥ä½œæµç³»ç»Ÿ â†’
  </a>
</div>

> **é€‚ç”¨ç‰ˆæœ¬**: v1.0.0+  
> **æœ€åæ›´æ–°**: 2025-12-12
