---
title: "7.1 ç­–ç•¥æ¨¡æ¿"
description: "æ·±å…¥è§£æç­–ç•¥æ¨¡æ¿ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ¨¡æ¿å®šä¹‰ã€æ¨¡æ¿ç®¡ç†ã€æ¨¡æ¿åº”ç”¨ã€PTradeæ¨¡æ¿ã€QMTæ¨¡æ¿ç­‰"
lang: "zh-CN"
layout: "/src/layouts/HandbookLayout.astro"
currentBook: "ashare-book6"
updateDate: "2025-12-12"
---

# ğŸ“‹ 7.1 ç­–ç•¥æ¨¡æ¿

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> æœ¬èŠ‚ç³»ç»Ÿä»‹ç»TRQuantç³»ç»Ÿçš„ç­–ç•¥æ¨¡æ¿ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç­–ç•¥æ¨¡æ¿çš„å®šä¹‰ã€ç®¡ç†ã€åº”ç”¨æœºåˆ¶ï¼Œä»¥åŠPTradeå’ŒQMTä¸¤ç§å¹³å°çš„ç­–ç•¥æ¨¡æ¿å®ç°ã€‚é€šè¿‡ç†è§£ç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‚æ•°å®šä¹‰ã€æ¥å£è§„èŒƒã€ç‰ˆæœ¬ç®¡ç†å’Œå®ä¾‹åŒ–æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•åˆ›å»ºã€ç®¡ç†å’Œåº”ç”¨ç­–ç•¥æ¨¡æ¿ï¼Œä¸ºç­–ç•¥ç”Ÿæˆæä¾›æ ‡å‡†åŒ–çš„æ¨¡æ¿æ”¯æ’‘ã€‚

ç­–ç•¥æ¨¡æ¿ç³»ç»Ÿæ˜¯ç­–ç•¥å¼€å‘æ¨¡å—çš„åŸºç¡€ç»„ä»¶ï¼Œæä¾›æ ‡å‡†åŒ–çš„ç­–ç•¥ä»£ç æ¨¡æ¿ï¼Œæ”¯æŒPTradeå’ŒQMTä¸¤ç§å¹³å°ã€‚

## ğŸ“‹ ç« èŠ‚æ¦‚è§ˆ

<script>
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    const headerOffset = 100;
    const elementPosition = element.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}
</script>

<div class="section-overview">
  <div class="section-item" onclick="scrollToSection('section-7-1-1')">
    <h4>ğŸ—ï¸ 7.1.1 æ¨¡æ¿å®šä¹‰</h4>
    <p>ç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‚æ•°å®šä¹‰ã€æ¥å£è§„èŒƒã€æ¨¡æ¿åˆ†ç±»</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-7-1-2')">
    <h4>ğŸ—‚ï¸ 7.1.2 æ¨¡æ¿ç®¡ç†</h4>
    <p>æ¨¡æ¿çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€ç‰ˆæœ¬ç®¡ç†ã€æ¨¡æ¿åº“ç®¡ç†</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-7-1-3')">
    <h4>ğŸ”§ 7.1.3 æ¨¡æ¿åº”ç”¨</h4>
    <p>æ¨¡æ¿å®ä¾‹åŒ–ã€å‚æ•°é…ç½®ã€æ¨¡æ¿ç»„åˆã€æ¨¡æ¿ç»§æ‰¿</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-7-1-4')">
    <h4>ğŸ“± 7.1.4 PTradeæ¨¡æ¿</h4>
    <p>PTradeç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‡½æ•°æ¥å£ã€å‚æ•°é…ç½®ã€ä»£ç ç”Ÿæˆ</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-7-1-5')">
    <h4>âš¡ 7.1.5 QMTæ¨¡æ¿</h4>
    <p>QMTç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‡½æ•°æ¥å£ã€å‚æ•°é…ç½®ã€ä»£ç ç”Ÿæˆ</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-7-1-6')">
    <h4>ğŸ¨ 7.1.6 ç­–ç•¥é£æ ¼æ¨¡æ¿</h4>
    <p>å¤šå› å­ã€åŠ¨é‡æˆé•¿ã€ä»·å€¼æŠ•èµ„ã€å¸‚åœºä¸­æ€§ç­‰ç­–ç•¥é£æ ¼æ¨¡æ¿</p>
  </div>
</div>

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬èŠ‚å­¦ä¹ ï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š

- **ç†è§£æ¨¡æ¿å®šä¹‰**ï¼šæŒæ¡ç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‚æ•°å®šä¹‰å’Œæ¥å£è§„èŒƒ
- **æŒæ¡æ¨¡æ¿ç®¡ç†**ï¼šç†è§£æ¨¡æ¿çš„åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤å’Œç‰ˆæœ¬ç®¡ç†æœºåˆ¶
- **åº”ç”¨æ¨¡æ¿å®ä¾‹åŒ–**ï¼šæŒæ¡æ¨¡æ¿çš„å®ä¾‹åŒ–æ–¹æ³•å’Œå‚æ•°é…ç½®
- **å®ç°å¹³å°æ¨¡æ¿**ï¼šç†è§£PTradeå’ŒQMTä¸¤ç§å¹³å°çš„æ¨¡æ¿å®ç°
- **ä½¿ç”¨é£æ ¼æ¨¡æ¿**ï¼šæŒæ¡ä¸åŒç­–ç•¥é£æ ¼çš„æ¨¡æ¿åº”ç”¨

## ğŸ“š æ ¸å¿ƒæ¦‚å¿µ

### æ¨¡å—å®šä½

- **å·¥ä½œæµä½ç½®**ï¼šæ­¥éª¤6 - ğŸ› ï¸ ç­–ç•¥ç”Ÿæˆ
- **æ ¸å¿ƒèŒè´£**ï¼šç­–ç•¥æ¨¡æ¿å®šä¹‰ã€æ¨¡æ¿ç®¡ç†ã€æ¨¡æ¿åº”ç”¨
- **æœåŠ¡å¯¹è±¡**ï¼šç­–ç•¥ç”Ÿæˆå™¨ã€ç­–ç•¥è§„èŒƒåŒ–å™¨

### è®¾è®¡ç†å¿µ

ç­–ç•¥æ¨¡æ¿ç³»ç»Ÿéµå¾ªä»¥ä¸‹è®¾è®¡ç†å¿µï¼š

1. **æ ‡å‡†åŒ–**ï¼šæä¾›æ ‡å‡†åŒ–çš„ç­–ç•¥ä»£ç ç»“æ„ï¼Œç¡®ä¿ç­–ç•¥ä»£ç çš„ä¸€è‡´æ€§
2. **å¯å¤ç”¨**ï¼šæ¨¡æ¿å¯å¤ç”¨ï¼Œå‡å°‘é‡å¤å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡
3. **å¯æ‰©å±•**ï¼šæ”¯æŒæ¨¡æ¿ç»§æ‰¿å’Œç»„åˆï¼Œä¾¿äºæ‰©å±•æ–°çš„ç­–ç•¥ç±»å‹
4. **å¹³å°å…¼å®¹**ï¼šæ”¯æŒPTradeå’ŒQMTä¸¤ç§å¹³å°ï¼Œç»Ÿä¸€æ¥å£è§„èŒƒ
5. **å‚æ•°åŒ–**ï¼šæ¨¡æ¿å‚æ•°åŒ–ï¼Œæ”¯æŒçµæ´»é…ç½®å’Œå®šåˆ¶

<h2 id="section-7-1-1">ğŸ—ï¸ 7.1.1 æ¨¡æ¿å®šä¹‰</h2>

ç­–ç•¥æ¨¡æ¿å®šä¹‰äº†ç­–ç•¥ä»£ç çš„æ ‡å‡†ç»“æ„ã€å‚æ•°å®šä¹‰å’Œæ¥å£è§„èŒƒã€‚

### æ¨¡æ¿ç»“æ„

ç­–ç•¥æ¨¡æ¿åŒ…å«ä»¥ä¸‹æ ¸å¿ƒéƒ¨åˆ†ï¼š

1. **æ¨¡æ¿å¤´éƒ¨**ï¼šç­–ç•¥åç§°ã€æè¿°ã€ä½œè€…ã€åˆ›å»ºæ—¶é—´ç­‰å…ƒä¿¡æ¯
2. **å‚æ•°å®šä¹‰**ï¼šç­–ç•¥å‚æ•°ã€é£æ§å‚æ•°ã€å› å­é…ç½®ç­‰
3. **åˆå§‹åŒ–å‡½æ•°**ï¼šç­–ç•¥åˆå§‹åŒ–é€»è¾‘
4. **äº¤æ˜“å‡½æ•°**ï¼šç›˜å‰ã€ç›˜ä¸­ã€ç›˜åå¤„ç†å‡½æ•°
5. **è¾…åŠ©å‡½æ•°**ï¼šå› å­è®¡ç®—ã€é€‰è‚¡ã€é£æ§ç­‰è¾…åŠ©å‡½æ•°
6. **é£é™©æ§åˆ¶**ï¼šæ­¢æŸã€æ­¢ç›ˆã€ä»“ä½æ§åˆ¶ç­‰é£æ§é€»è¾‘

### æ¨¡æ¿ç»“æ„å®šä¹‰

<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1___post_init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
from dataclasses import dataclass
from typing import Dict, List, Any, Optional
from enum import Enum

class TemplateType(Enum):
    """æ¨¡æ¿ç±»å‹"""
    MULTI_FACTOR = "multi_factor"      # å¤šå› å­ç­–ç•¥
    MOMENTUM_GROWTH = "momentum_growth"  # åŠ¨é‡æˆé•¿ç­–ç•¥
    VALUE = "value"                    # ä»·å€¼æŠ•èµ„ç­–ç•¥
    MARKET_NEUTRAL = "market_neutral"  # å¸‚åœºä¸­æ€§ç­–ç•¥

class PlatformType(Enum):
    """å¹³å°ç±»å‹"""
    PTRADE = "ptrade"  # PTradeå¹³å°
    QMT = "qmt"        # QMTå¹³å°

@dataclass
class StrategyTemplate:
    """ç­–ç•¥æ¨¡æ¿å®šä¹‰"""
    
    # åŸºæœ¬ä¿¡æ¯
    name: str                          # æ¨¡æ¿åç§°
    template_type: TemplateType         # æ¨¡æ¿ç±»å‹
    platform: PlatformType             # å¹³å°ç±»å‹
    version: str = "1.0.0"             # æ¨¡æ¿ç‰ˆæœ¬
    
    # æ¨¡æ¿å†…å®¹
    header: str                        # æ¨¡æ¿å¤´éƒ¨ï¼ˆå…ƒä¿¡æ¯ï¼‰
    parameters: Dict[str, Any]         # å‚æ•°å®šä¹‰
    initialize_code: str               # åˆå§‹åŒ–å‡½æ•°ä»£ç 
    trading_code: str                  # äº¤æ˜“é€»è¾‘ä»£ç 
    helper_functions: str              # è¾…åŠ©å‡½æ•°ä»£ç 
    risk_control_code: str             # é£æ§ä»£ç 
    
    # å…ƒæ•°æ®
    description: str = ""               # æ¨¡æ¿æè¿°
    author: str = ""                    # ä½œè€…
    created_at: str = ""                # åˆ›å»ºæ—¶é—´
    updated_at: str = ""                # æ›´æ–°æ—¶é—´
    tags: List[str] = None             # æ ‡ç­¾åˆ—è¡¨
    
    # ä¾èµ–å…³ç³»
    dependencies: List[str] = None     # ä¾èµ–çš„æ¨¡æ¿åˆ—è¡¨
    required_factors: List[str] = None # å¿…éœ€çš„å› å­åˆ—è¡¨
    
    def __post_init__(self):
        if self.tags is None:
            self.tags = []
        if <CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_class.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
@dataclass
class TemplateParameter:
    """æ¨¡æ¿å‚æ•°å®šä¹‰"""
    
    name: str                          # å‚æ•°åç§°
    type: type                         # å‚æ•°ç±»å‹
    default: Any                       # é»˜è®¤å€¼
    description: str = ""               # å‚æ•°æè¿°
    min_value: Optional[float] = None  # æœ€å°å€¼
    max_value: Optional[float] = None  # æœ€å¤§å€¼
    required: bool = False             # æ˜¯å¦å¿…éœ€
    choices: List[Any] = None          # å¯é€‰å€¼åˆ—è¡¨

# æ ‡å‡†å‚æ•°å®šä¹‰
STANDARD_PARAMETERS = {
    # åŸºç¡€å‚æ•°
    'stock_num': TemplateParameter(
        name='stock_num',
        type=int,
        default=10,
        description='æŒä»“è‚¡ç¥¨æ•°é‡',
        min_value=1,
        max_value=50
    ),
    'rebalance_days': TemplateParameter(
        name='rebalance_days',
        type=int,
        default=20,
        description='è°ƒä»“å‘¨æœŸï¼ˆäº¤æ˜“æ—¥ï¼‰',
        min_value=1,
        max_value=60
    ),
    
    # é£æ§å‚æ•°
    'max_position': TemplateParameter(
        name='max_position',
        type=float,
        default=0.1,
        description='å•ç¥¨æœ€å¤§ä»“ä½ï¼ˆ0-1ï¼‰',
        min_value=0.01,
        max_value=1.0
    ),
    'stop_loss': TemplateParameter(
        name='stop_loss',
        type=float,
        default=0.08,
        description='æ­¢æŸçº¿ï¼ˆ0-1ï¼‰',
        min_value=0.01,
        max_value=0.5
    ),
    'take_profit': TemplateParameter(
        name='take_profit',
        type=float,
        default=0.2,
        description='æ­¢ç›ˆçº¿ï¼ˆ0-1ï¼‰',
        min_value=0.05,
        max_value=1.0
    ),
    
    # å› å­é…ç½®
    'factors': TemplateParameter(
        name='factors',
        type=list,
        default=[],
        description='ä½¿ç”¨çš„å› å­åˆ—è¡¨',
        required=True
    ),
    'factor_weights': TemplateParameter(
        na<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_initialize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
# PTradeæ ‡å‡†æ¥å£
PTRADE_INTERFACES = {
    'initialize': {
        'name': 'initialize',
        'signature': 'def initialize(context):',
        'description': 'ç­–ç•¥åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨å›æµ‹å¼€å§‹æ—¶è°ƒç”¨ä¸€æ¬¡',
        'required': True
    },
    'before_market_open': {
        'name': 'before_market_open',
        'signature': 'def before_market_open(context):',
        'description': 'ç›˜å‰å¤„ç†å‡½æ•°ï¼Œæ¯æ—¥å¼€ç›˜å‰è°ƒç”¨',
        'required': False
    },
    'market_open': {
        'name': 'market_open',
        'signature': 'def market_open(context):',
        'description': 'å¼€ç›˜å¤„ç†å‡½æ•°ï¼Œæ¯æ—¥å¼€ç›˜æ—¶è°ƒç”¨',
        'required': True
    },
    'after_market_close': {
        'name'<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_init.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
# QMTæ ‡å‡†æ¥å£
QMT_INTERFACES = {
    'init': {
        'name': 'init',
        'signature': 'def init(ContextInfo):',
        'description': 'ç­–ç•¥åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨ç­–ç•¥å¯åŠ¨æ—¶è°ƒç”¨ä¸€æ¬¡',
        'required': True
    },
    'handlebar': {
        'name': 'handlebar',
        'signature': 'def handlebar(ContextInfo):',
        'description': 'æ¯ä¸ªbarè°ƒç”¨å‡½æ•°ï¼Œå®æ—¶å¤„ç†è¡Œæƒ…',
        'required': True
    },
    'rebalance': {
        'name': 'rebalance',
        'signature': 'def rebalance(ContextInfo):',
        'description': 'è°ƒä»“å‡½æ•°ï¼Œå®šæ—¶è°ƒç”¨',
        'required': False
    }
}
```
-->Tæ ‡å‡†æ¥å£
QMT_INTERFACES = {
    'init': {
        'name': 'init',
        'signature': 'def init(ContextInfo):',
        'descrip<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_create_template.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
from core.strategy_template import StrategyTemplate, TemplateType, PlatformType

def create_template(
    name: str,
    template_type: TemplateType,
    platform: PlatformType,
    header: str,
    parameters: Dict[str, Any],
    initialize_code: str,
    trading_code: str,
    helper_functions: str = "",
    risk_control_code: str = "",
    description: str = "",
    author: str = ""
) -> StrategyTemplate:
    """
    åˆ›å»ºæ–°ç­–ç•¥æ¨¡æ¿
    
    Args:
        name: æ¨¡æ¿åç§°
        template_type: æ¨¡æ¿ç±»å‹
        platform: å¹³å°ç±»å‹
        header: æ¨¡æ¿å¤´éƒ¨
        parameters: å‚æ•°å®šä¹‰
        initialize_code: åˆå§‹åŒ–ä»£ç 
        trading_code: äº¤æ˜“é€»è¾‘ä»£ç 
        helper_functions: è¾…åŠ©å‡½æ•°ä»£ç 
        risk_control_code: é£æ§ä»£ç 
        description: æ¨¡æ¿æè¿°
        author: ä½œè€…
    
    Returns:
        StrategyTemplate: åˆ›å»ºçš„æ¨¡æ¿å¯¹è±¡
    """
    template = StrategyTemplate(
        name=name,
        template_type=template_type,
        platform=platform,
        header=header,
        parameters=parameters,
        initialize_code=initialize_code,
        trading_code=trading_code,
        helper_functions=helper_functions,
        risk_control_code=risk_control_code,
        description=description,
        author=author,
        created_at=datetim<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_create_template_from_strategy.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def create_template_from_strategy(
    strategy_code: str,
    template_name: str,
    platform: PlatformType
) -> StrategyTemplate:
    """
    ä»ç°æœ‰ç­–ç•¥ä»£ç åˆ›å»ºæ¨¡æ¿
    
    Args:
        strategy_code: ç­–ç•¥ä»£ç 
        template_name: æ¨¡æ¿åç§°
        platform: å¹³å°ç±»å‹
    
    Returns:
        StrategyTemplate: åˆ›å»ºçš„æ¨¡æ¿å¯¹è±¡
    """
    # è§£æç­–ç•¥ä»£ç 
    parsed = parse_strategy_code(strategy_code, platform)
    
    # æå–æ¨¡æ¿éƒ¨åˆ†
    template = StrategyTemplate(
        name=template_name,
        template_type=infer_template_type(parsed),
        platform=platform,
        header=extract_header(parsed),
        parameters=extract_parameters(parsed),
        initialize_code=extract_initialize(parsed),
        trading_code=extract_trading_logic(parsed),
        helper_fun<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_update_template.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def update_template(
    template_name: str,
    updates: Dict[str, Any]
) -> StrategyTemplate:
    """
    æ›´æ–°ç­–ç•¥æ¨¡æ¿
    
    Args:
        template_name: æ¨¡æ¿åç§°
        updates: æ›´æ–°å†…å®¹å­—å…¸
    
    Returns:
        StrategyTemplate: æ›´æ–°åçš„æ¨¡æ¿å¯¹è±¡
    """
    template = template_manager.get_template(template_name)
    if not template:
        raise ValueError(f"æ¨¡æ¿ä¸å­˜åœ¨: {template_name}")
    
    # æ›´æ–°ç‰ˆæœ¬å·
    old_version = template.version
    template.version = increment_version(old_version, updates.get('version_level', 'minor'))
    
    # æ›´æ–°å†…å®¹
    for key, value in updates.items():
        if hasattr(template, key):
            setattr(template, key, value)
    
    template.updated_at = datetime.now().isoformat()
    
    # ä¿å­˜æ–°<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_delete_template.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def delete_template(
    template_name: str,
    force: bool = False
) -> bool:
    """
    åˆ é™¤ç­–ç•¥æ¨¡æ¿
    
    Args:
        template_name: æ¨¡æ¿åç§°
        force: æ˜¯å¦å¼ºåˆ¶åˆ é™¤ï¼ˆå¿½ç•¥ä¾èµ–æ£€æŸ¥ï¼‰
    
    Returns:
        bool: æ˜¯å¦åˆ é™¤æˆåŠŸ
    """
    template = template_manager.get_template(template_name)
    if not template:
        return False
    
    # æ£€æŸ¥ä¾èµ–
    if not force:
        dependents = template_manager.get_dependents(template_name)
        if dependents:
            rais<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class TemplateVersionManager:
    """æ¨¡æ¿ç‰ˆæœ¬ç®¡ç†å™¨"""
    
    def __init__(self, templates_dir: Path):
        self.templates_dir = templates_dir
        self.versions_dir = templates_dir / ".versions"
        self.versions_dir.mkdir(parents=True, exist_ok=True)
    
    def save_version(
        self,
        template_name: str,
        version: str,
        template: StrategyTemplate
    ):
        """ä¿å­˜æ¨¡æ¿ç‰ˆæœ¬"""
        version_file = self.versions_dir / f"{template_name}_{version}.json"
        with open(version_file, 'w', encoding='utf-8') as f:
            json.dump(template.to_dict(), f, ensure_ascii=False, indent=2)
    
    def get_version(
        self,
        template_name: str,
        version: str
    ) -> Optional[StrategyTemplate]:
        """è·å–æŒ‡å®šç‰ˆæœ¬çš„æ¨¡æ¿"""
        version_file = self.versions_dir / f"{template_name}_{version}.json"
        if not version_file.exists():
            return None
        
        with open(version_file, 'r', encoding='utf-8') as f:
            data = json.load(f)
            return StrategyTemplate.from_dict(data)
    
    def list_versions(self, template_name: str) -> List[str]:
        """åˆ—å‡ºæ¨¡æ¿çš„æ‰€æœ‰ç‰ˆæœ¬"""
        pattern = f"{template_name}_*.json"
        versions = []
        for file in self.versions_dir.glob(pattern):
            version = file.stem.replace(f"{template_name}_", "")
            versions.append(version)
        
        return sorted(versions, key=lambda v: parse_version(v), reverse=True)
    
    def compare_versions(
        self,
        template_name: str,
        version1: str,
        version2: str
    ) -> Dict[str, Any]:
        """æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬çš„å·®å¼‚"""
        template1 = self.get_version(template_name, version1)
        template2 = self.get_version(template_name, version2)
        
        if not template1 or not template2:
            raise ValueError("ç‰ˆæœ¬ä¸å­˜åœ¨")
        
        return {
            'parameters_diff': diff_dict(template1.parameters, template2.p<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class TemplateLibrary:
    """ç­–ç•¥æ¨¡æ¿åº“"""
    
    def __init__(self, templates_dir: Path):
        self.templates_dir = templates_dir
        self.templates: Dict[str, StrategyTemplate] = {}
        self._load_templates()
    
    def _load_templates(self):
        """åŠ è½½æ‰€æœ‰æ¨¡æ¿"""
        template_files = self.templates_dir.glob("*.json")
        for file in template_files:
            try:
                with open(file, 'r', encoding='utf-8') as f:
                    data = json.load(f)
                    template = StrategyTemplate.from_dict(data)
                    self.templates[template.name] = template
            except Exception as e:
                logger.warning(f"åŠ è½½æ¨¡æ¿å¤±è´¥ {file}: {e}")
    
    def get_template(
        self,
        name: str,
        version: str = None
    ) -> Optional[StrategyTemplate]:
        """è·å–æ¨¡æ¿"""
        template = self.templates.get(name)
        if not template:
            return None
        
        if version and version != template.version:
            # ä»ç‰ˆæœ¬ç®¡ç†å™¨è·å–æŒ‡å®šç‰ˆæœ¬
            version_manager = TemplateVersionManager(self.templates_dir)
            return version_manager.get_version(name, version)
        
        return template
    
    def list_templates(
        self,
        platform: PlatformType = None,
        template_type: TemplateType = None
    ) -> List[StrategyTemplate]:
        """åˆ—å‡ºæ¨¡æ¿"""
        templates = list(self.templates.values())
        
        if platform:
            templates = [t for t in templates if t.platform == platform]
        
        if template_type:
            templates = [t for t in templates if t.template_type == template_type]
        
        return templates
    
    def search_templates(
        self,
        query: str
    ) -> List[StrategyTemplate]:
        """æœç´¢æ¨¡æ¿"""
        results = []
        query_lower = query.lower()
        
        for template in self.templates.values():
            if (query_lower in template.name.lower() or
                query_lower in template.description.lower() or
                any(query_lower in tag.lower() for tag in template.tags)):<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_instantiate_template.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def instantiate_template(
    template: StrategyTemplate,
    parameters: Dict[str, Any],
    custom_code: Dict[str, str] = None
) -> str:
    """
    å®ä¾‹åŒ–ç­–ç•¥æ¨¡æ¿
    
    Args:
        template: ç­–ç•¥æ¨¡æ¿å¯¹è±¡
        parameters: å‚æ•°é…ç½®
        custom_code: è‡ªå®šä¹‰ä»£ç ç‰‡æ®µï¼ˆå¯é€‰ï¼‰
    
    Returns:
        str: ç”Ÿæˆçš„ç­–ç•¥ä»£ç 
    """
    # 1. éªŒè¯å‚æ•°
    validate_parameters(template.parameters, parameters)
    
    # 2. ç”Ÿæˆå‚æ•°ä»£ç 
    params_code = generate_parameters_code(parameters)
    
    # 3. ç”Ÿæˆåˆå§‹åŒ–ä»£ç 
    init_code = template.initialize_code.format(**parameters)
    
    # 4. ç”Ÿæˆäº¤æ˜“é€»è¾‘ä»£ç 
    trading_code = template.trading_code.format(**parameters)
    if custom_code and 'trading_logic' in custom_code:
        trading_code = custom_code['trading_logic']
    
    # 5. ç”Ÿæˆè¾…åŠ©å‡½æ•°ä»£ç 
    helper_code = template.helper_functions
    if custom_code and 'helper_functions' in custom_code:
        helper_code = custom_code['helper_functions']
    
    # 6. ç”Ÿæˆé£æ§ä»£ç 
    risk_code = template.risk_control_code.format(**parameters)
    
    # 7. ç»„åˆå®Œæ•´ä»£ç 
    full_code = template.header.format(
        strategy_name=parameters.get('strategy_name', 'Generated Strategy'),
        description=parameters.get('description', ''),
        author=parameters.get('author', 'TRQuant'),
        created_at=datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    )
    
    full_code += f"\n\n# ==================== ç­–ç•¥å‚æ•° ====================\n"
    full_code += params_code
    full_code += f"\n\n# ==================== åˆå§‹åŒ–å‡½æ•° ====================\n"
    full_code += init_code
    full_code += f"\n\n# ==================== äº¤æ˜“é€»è¾‘ ====================\n"
    full_code += trading_code
    full_code += f"\n\n# ==================== è¾…åŠ©å‡½æ•° ============<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_validate_parameters.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def validate_parameters(
    template_params: Dict[str, TemplateParameter],
    provided_params: Dict[str, Any]
) -> Tuple[bool, List[str]]:
    """
    éªŒè¯å‚æ•°
    
    Args:
        template_params: æ¨¡æ¿å‚æ•°å®šä¹‰
        provided_params: æä¾›çš„å‚æ•°
    
    Returns:
        Tuple[bool, List[str]]: (æ˜¯å¦æœ‰æ•ˆ, é”™è¯¯åˆ—è¡¨)
    """
    errors = []
    
    # æ£€æŸ¥å¿…éœ€å‚æ•°
    for name, param_def in template_params.items():
        if param_def.required and name not in provided_params:
            errors.append(f"ç¼ºå°‘å¿…éœ€å‚æ•°: {name}")
    
    # éªŒè¯å‚æ•°å€¼
    for name, value in provided_params.items():
        if name not in template_params:
            errors.append(f"æœªçŸ¥å‚æ•°: {name}")
            continue
        
        param_def = template_params[name]
        
        # ç±»å‹æ£€æŸ¥
        if not isinstance(value, param_def.type):
            errors.append(
                f"å‚æ•° {name} ç±»å‹é”™è¯¯: æœŸæœ› {param_def.type.__name__}, "
                f"å®é™… {type(value).__name__}"
            )
        
        # èŒƒå›´æ£€æŸ¥
        if isinstance(value, (int, float)):
            if param_def.min_value is not None and value < param_def.min_value:
                errors.append(
                    f"å‚æ•° {name} å€¼è¿‡å°: {value} < {param_def.min_value}"
                )
            if param_def.max_value is not None and value > param_def.max_value:
                errors.append(
                    f"å‚æ•° {name} å€¼è¿‡å¤§: {value} > {param_def.max_value}"
                )
        
        # å¯é€‰å€¼æ£€æŸ¥
        if param_def.choices and value not in param_<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_combine_templates.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def combine_templates(
    base_template: StrategyTemplate,
    mixin_templates: List[StrategyTemplate]
) -> StrategyTemplate:
    """
    ç»„åˆå¤šä¸ªæ¨¡æ¿
    
    Args:
        base_template: åŸºç¡€æ¨¡æ¿
        mixin_templates: æ··å…¥æ¨¡æ¿åˆ—è¡¨
    
    Returns:
        StrategyTemplate: ç»„åˆåçš„æ¨¡æ¿
    """
    combined = StrategyTemplate(
        name=f"{base_template.name}_combined",
        template_type=base_template.template_type,
        platform=base_template.platform,
        header=base_template.header,
        parameters=base_template.parameters.copy(),
        initialize_code=base_template.initialize_code,
        trading_code=base_template.trading_code,
        helper_functions=base_template.helper_functions,
        risk_control_code=base_template.risk_control_code
    )
    
    # åˆå¹¶æ··å…¥æ¨¡æ¿
    for mixin in mixin_templates:
        # åˆå¹¶å‚æ•°
        combined.parameters.update(mixin.parameters)
        
        # åˆå¹¶è¾…åŠ©å‡½æ•°
        combined.helper_<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_inherit_template.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def inherit_template(
    parent_template: StrategyTemplate,
    child_name: str,
    overrides: Dict[str, str] = None
) -> StrategyTemplate:
    """
    ç»§æ‰¿æ¨¡æ¿
    
    Args:
        parent_template: çˆ¶æ¨¡æ¿
        child_name: å­æ¨¡æ¿åç§°
        overrides: è¦†ç›–çš„ä»£ç ç‰‡æ®µ
    
    Returns:
        StrategyTemplate: ç»§æ‰¿åçš„æ¨¡æ¿
    """
    child = StrategyTemplate(
        name=child_name,
        template_type=parent_template.template_type,
        platform=parent_template.platform,
        header=parent_template.header,
        parameters=parent_template.parameters.copy(),
        initialize_code=overrides.get('initialize', parent_template.initialize_code),
        trading_code=overrides.get('trading', parent_template.trading_code),
        helper_functions=parent_template.helper_functions,
        risk_control_code=overrides.get('risk_control', parent_template.risk_control_code),
        dependencies=[par<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_initialize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
PTRADE_TEMPLATE_STRUCTURE = {
    'header': '''# -*- coding: utf-8 -*-
"""
ç­–ç•¥åç§°: {strategy_name}
ç­–ç•¥æè¿°: {description}
ä½œè€…: {author}
åˆ›å»ºæ—¶é—´: {created_at}
PTradeç‰ˆæœ¬: Python 3.11
"""

import numpy as np
import pandas as pd
from datetime import datetime, timedelta''',
    
    'parameters': '''# ==================== ç­–ç•¥å‚æ•° ====================
MAX_POSITION = {max_position}      # å•ç¥¨æœ€å¤§ä»“ä½
STOP_LOSS = {stop_loss}            # æ­¢æŸçº¿
TAKE_PROFIT = {take_profit}        # æ­¢ç›ˆçº¿
REBALANCE_DAYS = {rebalance_days}  # è°ƒä»“å‘¨æœŸ
MAX_STOCKS = {max_stocks}          # æœ€å¤§æŒä»“æ•°''',
    
    'initialize': '''def initialize(context):
    """
    ç­–ç•¥åˆå§‹åŒ–å‡½æ•°
    åœ¨å›æµ‹å¼€å§‹æ—¶è°ƒç”¨ä¸€æ¬¡
    """
    # è®¾ç½®åŸºå‡†
    set_benchmark('000300.XSHG')
    
    # è®¾ç½®æ»‘ç‚¹
    set_slippage(PriceRelatedSlippage(0.002))
    
    # è®¾ç½®æ‰‹ç»­è´¹
    set_commission(PerTrade(buy_cost=0.0003, sell_cost=0.0013, min_cost=5))
    
    # ç­–ç•¥å‚æ•°
    context.max_position = MAX_POSITION
    context.stop_loss = STOP_LOSS
    context.take_profit = TAKE_PROFIT
    context.rebalance_days = REBALANCE_DAYS
    context.max_stocks = MAX_STOCKS
    
    # è‚¡ç¥¨æ± 
    context.universe = get_index_stocks('000300.XSHG')
    
    # è¿è¡Œæ—¶é—´è®¾ç½®
    run_daily(before_market_open, time='09:00')
    run_daily(market_open, time='09:30')
    run_daily(after_market_close, time='15:30')
    
    log.info("ç­–ç•¥åˆå§‹åŒ–å®Œæˆ")''',
    
    'before_market_open': '''def before_market_open(context):
    """
    ç›˜å‰è¿è¡Œå‡½æ•°
    æ¯æ—¥å¼€ç›˜å‰è°ƒç”¨
    """
    # æ›´æ–°è‚¡ç¥¨æ± 
    context.universe = get_index_stocks('000300.XSHG')
    
    # å‰”é™¤STå’Œåœç‰Œ
    st_stocks = get_st_stocks()
    paused_stocks = get_paused_stocks()
    context.universe = [
        s for s in context.universe 
        if s not in st_stocks and s not in paused_stocks
    ]
    
    log.info(f"ä»Šæ—¥å¯äº¤æ˜“è‚¡ç¥¨æ•°: {len(context.universe)}")''',
    
    'market_open': '''def market_open(context):
    """
    å¼€ç›˜æ—¶è¿è¡Œï¼Œæ‰§è¡Œä¸»è¦äº¤æ˜“é€»è¾‘
    """
    # æ£€æŸ¥æ˜¯å¦éœ€è¦è°ƒä»“
    if context.trade_days % context.rebalance_days == 0:
        rebalance(context)
    
    # é£æ§æ£€æŸ¥
    risk_control(context)''',
    
    'after_market_close': '''def after_market_close(context):
    """
    æ”¶ç›˜åè¿è¡Œ
    """
    # è®°å½•å½“æ—¥æŒä»“
    positions = context.portfolio.positions
    log.info(f"å½“æ—¥æŒä»“: {len(positions)} åªè‚¡ç¥¨")
    
    # è®°å½•è´¦æˆ·ä¿¡æ¯
    log.inf<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_initialize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def initialize(context):
    """
    ç­–ç•¥åˆå§‹åŒ–å‡½æ•°
    
    åœ¨å›æµ‹å¼€å§‹æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºï¼š
    - è®¾ç½®åŸºå‡†æŒ‡æ•°
    - é…ç½®æ»‘ç‚¹å’Œæ‰‹ç»­è´¹
    - åˆå§‹åŒ–ç­–ç•¥å‚æ•°
    - è®¾ç½®è‚¡ç¥¨æ± 
    - é…ç½®å®šæ—¶ä»»åŠ¡
    
    Args:
        context: PTradeä¸Šä¸‹æ–‡å¯¹è±¡
    """
    # å¿…é¡»è°ƒç”¨
    set_benchmark('000300.XSHG')
    
    # å¯é€‰é…ç½®
    set_slippage(PriceRelatedSlippage(0.002))
    set_commission(PerTrade(buy_cost=0.0003, sell_cost=0.0013, min_cost=5))
    
    # ç­–ç•¥å‚æ•°åˆå§‹åŒ–
    context.params = {
        'max_position': 0.1,
        'stop_loss': 0.08,
        'take_profit': 0.2
    }
    
    #<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_before_market_open.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def before_market_open(context):
    """
    ç›˜å‰è¿è¡Œå‡½æ•°
    
    æ¯æ—¥å¼€ç›˜å‰è°ƒç”¨ï¼Œç”¨äºï¼š
    - æ›´æ–°è‚¡ç¥¨æ± 
    - è¿‡æ»¤STå’Œåœç‰Œè‚¡ç¥¨
    - å‡†å¤‡äº¤æ˜“æ•°æ®
    
    Args:
        context: PTradeä¸Š<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_market_open.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def market_open(context):
    """
    å¼€ç›˜æ—¶è¿è¡Œå‡½æ•°
    
    æ¯æ—¥å¼€ç›˜æ—¶è°ƒç”¨ï¼Œæ‰§è¡Œä¸»è¦äº¤æ˜“é€»è¾‘ï¼š
    - æ£€æŸ¥è°ƒä»“æ¡ä»¶
    - æ‰§è¡Œé€‰è‚¡
    - æ‰§è¡Œäº¤æ˜“
    
    Args:
       <CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_after_market_close.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def after_market_close(context):
    """
    ç›˜åè¿è¡Œ<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_generate.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class PTRADETemplate:
    """PTradeç­–ç•¥æ¨¡æ¿ç”Ÿæˆå™¨"""
    
    def generate(
        self,
        style: str,
        factors: List[str],
        risk_params: Dict[str, Any],
        mainlines: List[str] = None
    ) -> str:
        """
        ç”ŸæˆPTradeç­–ç•¥ä»£ç 
        
        Args:
            style: ç­–ç•¥é£æ ¼
            factors: ä½¿ç”¨çš„å› å­åˆ—è¡¨
            risk_params: é£æ§å‚æ•°
            mainlines: æŠ•èµ„ä¸»çº¿ï¼ˆå¯é€‰ï¼‰
        
        Returns:
            str: ç”Ÿæˆçš„ç­–ç•¥ä»£ç 
        """
        max_position = risk_params.get('max_position', 0.1)
        stop_loss = risk_params.get('stop_loss', 0.08)
        take_profit = risk_params.get('take_profit', 0.2)
        
        # ç”Ÿæˆå¤´éƒ¨
        header = self._generate_header(style, factors, risk_params)
        
        # ç”Ÿæˆåˆå§‹åŒ–å‡½æ•°
        initialize = self._generate_initialize(
            max_position, stop_loss, take_profit, factors
        )
        
        # ç”Ÿæˆäº¤æ˜“é€»è¾‘ï¼ˆæ ¹æ®é£æ ¼ï¼‰
        if style == 'multi_factor':
            trading_logic = self._generate_multi_factor_logic(factors)
        elif style == 'momentum_growth':
            trading_logic = self._generate_momentum_logic(factors)
        elif style == 'value':
            trading_logic = self._generate_value_logic(factors)
        elif style == 'market_neutral':
            trading_logic = self._generate_neutral_logic(factors)
        else:
            trading_logic = self._generate_multi_factor_logic(factors)
        
        # ç”Ÿæˆè¾…åŠ©å‡½æ•°
        helper_functions = self._generate_helper_functions()
        
        # ç”Ÿæˆé£æ§å‡½æ•°
        risk_control = self._generate_risk_control(stop_loss, take_profit)
        
        # ç»„åˆå®Œæ•´ä»£ç 
        return f"{header}\n\n{initialize}\n\n{t<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_init.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
QMT_TEMPLATE_STRUCTURE = {
    'header': '''# -*- coding: utf-8 -*-
"""
ç­–ç•¥åç§°: {strategy_name}
ç­–ç•¥æè¿°: {description}
ä½œè€…: {author}
åˆ›å»ºæ—¶é—´: {created_at}
QMTç‰ˆæœ¬: Python 3.x
"""

import pandas as pd
import numpy as np
from datetime import datetime, timedelta''',
    
    'init': '''def init(ContextInfo):
    """
    ç­–ç•¥åˆå§‹åŒ–å‡½æ•°
    QMTå…¥å£å‡½æ•°
    """
    # é£æ§å‚æ•°
    ContextInfo.max_position = {max_position}
    ContextInfo.stop_loss = {stop_loss}
    ContextInfo.take_profit = {take_profit}
    ContextInfo.<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_rebalance.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
MULTI_FACTOR_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - å¤šå› å­é€‰è‚¡
    """
    # è·å–å› å­æ•°æ®
    factor_data = get_factor_values(
        context.universe,
        context.factors,
        end_date=context.current_dt.strftime('%Y-%m-%d'),
        count=1
    )
    
    if factor_data is None or len(factor_data) == 0:
        log.warning("è·å–å› å­æ•°æ®å¤±è´¥")
        return
    
    # å› å­æ ‡å‡†åŒ–
    scores = pd.DataFrame(index=context.universe)
    for factor in context.factors:
        if factor in factor_data:
            values = factor_data[factor].iloc[-1]
            # Z-scoreæ ‡å‡†åŒ–
            scores[factor] = (values - values.mean()) / values.std()
    
    # è®¡ç®—ç»¼åˆå¾—åˆ†ï¼ˆç­‰æƒæˆ–è‡ªå®šä¹‰æƒé‡ï¼‰
    if hasattr(context, 'factor_weights'):
        # ä½¿ç”¨è‡ªå®šä¹‰æƒé‡
        scores['composite'] = sum(
            scores[factor] * context.factor_weights.get(factor, 1.0/len(context.factors))
            for factor in context.factors if factor in scores.columns
        )
    else:
        # ç­‰æƒ
        scores['composite'] = scores.mean(axis=1)
    
    # æ’åºé€‰è‚¡
    scores = scores.dropna()
    selected = scores.nlargest(context.max_stocks, 'composite').index.tolist()
    
    log.info(f"æœ¬æ¬¡é€‰å‡ºè‚¡ç¥¨: {selected}")
    
    # æ‰§è¡Œè°ƒä»“
    execute_rebalance(context, selected)'''
}
```
-->ContextInfo.max_stocks, 'composite').i<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_init.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def init(ContextInfo):
    """
    ç­–ç•¥åˆå§‹åŒ–å‡½æ•°
    
    QMTå…¥å£å‡½æ•°ï¼Œåœ¨ç­–ç•¥å¯åŠ¨æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºï¼š
    - åˆå§‹åŒ–ç­–ç•¥å‚æ•°
    - è®¾ç½®è‚¡ç¥¨æ± 
    - é…ç½®è´¦å·ä¿¡æ¯
    - è®¾ç½®å®šæ—¶ä»»åŠ¡
    
    Args:
        ContextInfo: QMTä¸Šä¸‹æ–‡å¯¹è±¡
    """
    # ç­–ç•¥å‚æ•°
    ContextInfo.max_position = 0.1
    ContextInfo.stop_loss = 0.08
    ContextInfo.take_profit = 0.2
    
    # è‚¡ç¥¨æ± 
    ContextInfo.universe = ContextInfo.get_stock_list_in_sector('æ²ªæ·±300')
    
    # è´¦å·é…ç½®
    ContextInfo.accID = 'yo<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_handlebar.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def handlebar(ContextInfo):
    """
    æ¯ä¸ªbarè°ƒç”¨å‡½æ•°
    
    QMTä¸»å¾ªç¯å‡½æ•°ï¼Œæ¯ä¸ªKçº¿barè°ƒç”¨ä¸€æ¬¡ï¼Œç”¨äºï¼š
    - å®æ—¶ç›‘æ§è¡Œæƒ…
    - æ‰§è¡Œå®æ—¶äº¤æ˜“é€»è¾‘
    - æ›´æ–°ç­–ç•¥çŠ¶æ€
    
    Args:
        ContextIn<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_generate.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class QMTTemplate:
    """QMTç­–ç•¥æ¨¡æ¿ç”Ÿæˆå™¨"""
    
    def generate(
        self,
        style: str,
        factors: List[str],
        risk_params: Dict[str, Any],
        mainlines: List[str] = None
    ) -> str:
        """
        ç”ŸæˆQMTç­–ç•¥ä»£ç 
        
        Args:
            style: ç­–ç•¥é£æ ¼
            factors: ä½¿ç”¨çš„å› å­åˆ—è¡¨
            risk_params: é£æ§å‚æ•°
            mainlines: æŠ•èµ„ä¸»çº¿ï¼ˆå¯é€‰ï¼‰
        
        Returns:
            str: ç”Ÿæˆçš„ç­–ç•¥ä»£ç 
        """
        max_position = risk_params.get('max_position', 0.1)
        stop_loss = risk_params.get('stop_loss', 0.08)
        take_profit = risk_params.get('take_profit', 0.2)
        
        # ç”Ÿæˆå¤´éƒ¨
        header = self._generate_header(style, factors, risk_params)
        
        # ç”Ÿæˆåˆå§‹åŒ–å‡½æ•°
        init_func = self._generate_init(
            max_position, stop_loss, take_profit, factors
        )
        
        # ç”Ÿæˆhandlebarå‡½æ•°
        handlebar_func = self._generate_handlebar()
        
        # ç”Ÿæˆäº¤æ˜“é€»è¾‘ï¼ˆæ ¹æ®é£æ ¼ï¼‰
        if style == 'multi_factor':
            trading_logic = self._generate_multi_factor_logic(factors)
        elif style == 'momentum_growth':
            trading_logic = self._generate_momentum_logic(factors)
        elif style == 'value':
            trading_logic = self._generate_value_logic(factors)
        elif style == 'market_neutral':
            trading_logic = self._generate_neutral_logic(factors)
        else:
            trading_logic = self._generate_multi_factor_logic(factors)
        
        # ç”Ÿæˆè¾…åŠ©å‡½æ•°
        helper_functions = self._generate_helper_functions()
        
        # ç»„åˆå®Œæ•´ä»£ç 
        return f"{header}\n\n{init_func}\n\n{handlebar_func}\n\n{trading_logic}\n\n{helper_functions}"
```
-->xtInfo.take_profit = {take_profit}
    ContextInfo.max_stocks = {max_stocks}
    
    # å› å­åˆ—è¡¨
    ContextInfo.factors = {factors}
    
    # è‚¡ç¥¨æ± 
    ContextInfo.universe = ContextInfo.get_stock_list_in_sector('æ²ªæ·±300')
    
    # è®¾ç½®è´¦å·
    ContextInfo.accID = 'your_account_id'
    
    # è®¾ç½®å®šæ—¶ä»»åŠ¡
    ContextInfo.run_time('rebalance', '09:35:00', 'SH')
    ContextInfo.run_time('risk_control', '14:50:00', 'SH')
    
    # åˆå§‹åŒ–ç¼“å­˜
    ContextInfo.cost_prices = {}
    
    print(f"[init] ç­–ç•¥åˆå§‹åŒ–å®Œæˆï¼Œè‚¡ç¥¨æ± : {len(ContextInfo.universe)}åª")''',
    
    'handlebar': '''def handlebar(ContextInfo):
    """
    æ¯ä¸ªbarè°ƒç”¨
    QMTä¸»å¾ªç¯å‡½æ•°
    """
    # è·å–å½“å‰æ—¶é—´
    current_time = ContextInfo.get_bar_timetag(ContextInfo.barpos)
    
    # è¿™é‡Œå¯ä»¥æ·»åŠ å®æ—¶ç›‘æ§é€»è¾‘
    pass''',
    
    'rebalance': '''def rebalance(ContextInfo):
    """
    è°ƒä»“é€»è¾‘
    """
    print(f"[rebalance] å¼€å§‹è°ƒä»“...")
    
    # æ›´æ–°è‚¡ç¥¨æ± 
    ContextInfo.universe = ContextInfo.get_stock_list_in_sector('æ²ªæ·±300')
    
    # å‰”é™¤STå’Œåœç‰Œ
    ContextInfo.universe = [
        s for s in ContextInfo.universe 
        if not is_st(ContextInfo, s) and not is_suspended(ContextInfo, s)
    ]
    
    # è·å–å› å­æ•°æ®å¹¶è®¡ç®—å¾—åˆ†
    scores = calculate_factor_scores(ContextInfo)
    
    if scores is None or len(scores) == 0:
        print("[rebalance] è·å–å› å­æ•°æ®å¤±è´¥")
        return
    
    <CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_rebalance.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
MOMENTUM_GROWTH_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - åŠ¨é‡æˆé•¿ç­–ç•¥
    """
    # è·å–ä»·æ ¼æ•°æ®è®¡ç®—åŠ¨é‡
    prices = get_price(
        context.universe,
        end_date=context.current_dt,
        frequency='daily',
        fields=['close'],
        count=20
    )
    
    if prices is None:
        return
    
    # è®¡ç®—20æ—¥åŠ¨é‡
    momentum = (prices['close'].iloc[-1] / prices['close'].iloc[0] - 1)
    
    # è·å–æˆé•¿å› å­
    fundamentals = get_fundamentals(
        query(
            valuation.code,
            income.inc_revenue_year_on_year,
            income.inc_net_profit_year_on_year
        ).filter(
            valuation.code.in_(context.universe)
        )
    )
    
    # è®¡ç®—ç»¼åˆå¾—åˆ†
    scores = pd.DataFrame(index=context.universe)
    scores['momentum'] = momentum
    
    if fundamentals is not None:
        scores = scores.merge(
            fundamentals.set_index('code'),
            left_index=True, right_index=True, how='left'
        )
        scores['growth'] = (
            scores['inc_revenue_year_on_year'].fillna(0) * 0.5 +
            scores['inc_net_profit_year_on_year'].fillna(0) * 0.5
        )
    else:
        scores['growth'] = 0
    
    # æ ‡å‡†åŒ–å¹¶åˆæˆ
    for col in ['momentum', 'growth']:
        if col in scores.columns:
            scores[col] = (scores[col] - scores[col].mean()) / scores[col].std()
    
    scores['composite'] = scores[['momentum', 'growth']].mean(axis=1)
    
    # é€‰è‚¡
    selected = scores.nlargest(context.max_stocks, 'composite').index.tolist()
    
    execute_rebalance(context, sel<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_rebalance.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
VALUE_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - ä»·å€¼æŠ•èµ„ç­–ç•¥
    """
    # è·å–ä¼°å€¼æ•°æ®
    fundamentals = get_fundamentals(
        query(
            valuation.code,
            valuation.pe_ratio,
            valuation.pb_ratio,
            indicator.roe,
            indicator.inc_return  # è‚¡æ¯ç‡
        ).filter(
            valuation.code.in_(context.universe),
            valuation.pe_ratio > 0,
            valuation.pe_ratio < 50,  # å‰”é™¤é«˜PE
            valuation.pb_ratio > 0,
            valuation.pb_ratio < 10   # å‰”é™¤é«˜PB
        )
    )
    
    if fundamentals is None or len(fundamentals) == 0:
        log.warning("è·å–åŸºæœ¬é¢æ•°æ®å¤±è´¥")
        return
    
    scores = fundamentals.set_index('code')
    
    # ä»·å€¼å› å­ï¼šä½PEã€ä½PBä¸ºå¥½
    scores['pe_score'] = -scores['pe_ratio']
    scores['pb_score'] = -scores['pb_ratio']
    
    # è´¨é‡å› å­ï¼šé«˜ROEä¸ºå¥½
    scores['roe_score'] = scores['roe'].fillna(0)
    
    # è‚¡æ¯å› å­
    scores['dividend_score'] = scores['inc_return'].fillna(0)
    
    # æ ‡å‡†åŒ–
    for col in ['pe_score', 'pb_score', 'roe_score', 'dividend_score']:
        scores[col] = (scores[col] - scores[col].mean()) / scores[col].std()
    
    # ç»¼åˆå¾—åˆ†
    scores['composite'] = (
        scores['pe_score'] * 0.25 +
        scores['pb_score'] * 0.25 +
        scores['roe_score'] * 0.30 +
        scores['dividend_score'] * 0.20
    )
    
    selected = scores.nlargest(context.max_stocks, 'composite').index.tolist()
    
    execute_rebalance(<CodeFromFile 
  filePath="code_library/007_Chapter7_Strategy_Development/7.1/code_7_1_rebalance.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
MARKET_NEUTRAL_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - å¸‚åœºä¸­æ€§ç­–ç•¥
    æ³¨æ„ï¼šéœ€è¦èåˆ¸æ”¯æŒ
    """
    # è·å–å› å­æ•°æ®
    factor_data = get_factor_values(
        context.universe,
        context.factors,
        end_date=context.current_dt.strftime('%Y-%m-%d'),
        count=1
    )
    
    if factor_data is None:
        return
    
    # è®¡ç®—ç»¼åˆå¾—åˆ†
    scores = pd.DataFrame(index=context.universe)
    for factor in context.factors:
        if factor in factor_data:
            values = factor_data[factor].iloc[-1]
            scores[factor] = (values - values.mean()) / values.std()
    
    scores['composite'] = scores.mean(axis=1)
    scores = scores.dropna()
    
    # å¤šå¤´ï¼šå¾—åˆ†æœ€é«˜çš„è‚¡ç¥¨
    long_stocks = scores.nlargest(context.max_stocks // 2, 'composite').index.tolist()
    
    # ç©ºå¤´ï¼šå¾—åˆ†æœ€ä½çš„è‚¡ç¥¨ï¼ˆéœ€è¦èåˆ¸ï¼‰
    short_stocks = scores.nsmallest(context.max_stocks // 2, 'composite').index.tolist()
    
    log.info(f"å¤šå¤´: {long_stocks}")
    log.info(f"ç©ºå¤´: {short_stocks}")
    
    # æ‰§è¡Œå¤šå¤´
    long_weight = 0.5 / len(long_stocks) if long_stocks else 0
    for stock in long_stocks:
        order_target_percent(stock, long_weight)
    
    # ç©ºå¤´éœ€è¦åˆ¸å•†æ”¯æŒèåˆ¸
    # è¿™é‡Œä»…è®°å½•ï¼Œå®é™…æ‰§è¡Œéœ€è¦é…ç½®èåˆ¸è´¦æˆ·
    log.info("ç©ºå¤´éƒ¨åˆ†éœ€è¦èåˆ¸æ”¯æŒ")'''
}
```
-->info(f"æœ¬æ¬¡é€‰å‡ºè‚¡ç¥¨: {selected}")
    
    # æ‰§è¡Œè°ƒä»“
    execute_rebalance(context, selected)'''
}
```

### åŠ¨é‡æˆé•¿ç­–ç•¥æ¨¡æ¿

åŠ¨é‡æˆé•¿ç­–ç•¥æ¨¡æ¿ç»“åˆä»·æ ¼åŠ¨é‡å’Œæˆé•¿å› å­è¿›è¡Œé€‰è‚¡ã€‚

#### æ¨¡æ¿ç‰¹ç‚¹

- **åŠ¨é‡è®¡ç®—**ï¼šåŸºäºä»·æ ¼åŠ¨é‡è®¡ç®—
- **æˆé•¿å› å­**ï¼šç»“åˆè¥æ”¶å’Œåˆ©æ¶¦å¢é•¿
- **è¶‹åŠ¿è·Ÿè¸ª**ï¼šè·Ÿè¸ªå¼ºåŠ¿è‚¡ç¥¨
- **å¿«é€Ÿè°ƒä»“**ï¼šé€‚åˆçŸ­æœŸäº¤æ˜“

#### æ¨¡æ¿å®ç°

```python
MOMENTUM_GROWTH_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - åŠ¨é‡æˆé•¿ç­–ç•¥
    """
    # è·å–ä»·æ ¼æ•°æ®è®¡ç®—åŠ¨é‡
    prices = get_price(
        context.universe,
        end_date=context.current_dt,
        frequency='daily',
        fields=['close'],
        count=20
    )
    
    if prices is None:
        return
    
    # è®¡ç®—20æ—¥åŠ¨é‡
    momentum = (prices['close'].iloc[-1] / prices['close'].iloc[0] - 1)
    
    # è·å–æˆé•¿å› å­
    fundamentals = get_fundamentals(
        query(
            valuation.code,
            income.inc_revenue_year_on_year,
            income.inc_net_profit_year_on_year
        ).filter(
            valuation.code.in_(context.universe)
        )
    )
    
    # è®¡ç®—ç»¼åˆå¾—åˆ†
    scores = pd.DataFrame(index=context.universe)
    scores['momentum'] = momentum
    
    if fundamentals is not None:
        scores = scores.merge(
            fundamentals.set_index('code'),
            left_index=True, right_index=True, how='left'
        )
        scores['growth'] = (
            scores['inc_revenue_year_on_year'].fillna(0) * 0.5 +
            scores['inc_net_profit_year_on_year'].fillna(0) * 0.5
        )
    else:
        scores['growth'] = 0
    
    # æ ‡å‡†åŒ–å¹¶åˆæˆ
    for col in ['momentum', 'growth']:
        if col in scores.columns:
            scores[col] = (scores[col] - scores[col].mean()) / scores[col].std()
    
    scores['composite'] = scores[['momentum', 'growth']].mean(axis=1)
    
    # é€‰è‚¡
    selected = scores.nlargest(context.max_stocks, 'composite').index.tolist()
    
    execute_rebalance(context, selected)'''
}
```

### ä»·å€¼æŠ•èµ„ç­–ç•¥æ¨¡æ¿

ä»·å€¼æŠ•èµ„ç­–ç•¥æ¨¡æ¿åŸºäºä¼°å€¼å’Œè´¨é‡å› å­è¿›è¡Œé€‰è‚¡ã€‚

#### æ¨¡æ¿ç‰¹ç‚¹

- **ä¼°å€¼å› å­**ï¼šPEã€PBã€PEGç­‰ä¼°å€¼æŒ‡æ ‡
- **è´¨é‡å› å­**ï¼šROEã€ROAã€å‡€åˆ©æ¶¦ç‡ç­‰è´¨é‡æŒ‡æ ‡
- **ä½ä¼°å€¼ç­›é€‰**ï¼šä¼˜å…ˆé€‰æ‹©ä½ä¼°å€¼è‚¡ç¥¨
- **é•¿æœŸæŒæœ‰**ï¼šé€‚åˆä¸­é•¿æœŸæŠ•èµ„

#### æ¨¡æ¿å®ç°

```python
VALUE_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - ä»·å€¼æŠ•èµ„ç­–ç•¥
    """
    # è·å–ä¼°å€¼æ•°æ®
    fundamentals = get_fundamentals(
        query(
            valuation.code,
            valuation.pe_ratio,
            valuation.pb_ratio,
            indicator.roe,
            indicator.inc_return  # è‚¡æ¯ç‡
        ).filter(
            valuation.code.in_(context.universe),
            valuation.pe_ratio > 0,
            valuation.pe_ratio < 50,  # å‰”é™¤é«˜PE
            valuation.pb_ratio > 0,
            valuation.pb_ratio < 10   # å‰”é™¤é«˜PB
        )
    )
    
    if fundamentals is None or len(fundamentals) == 0:
        log.warning("è·å–åŸºæœ¬é¢æ•°æ®å¤±è´¥")
        return
    
    scores = fundamentals.set_index('code')
    
    # ä»·å€¼å› å­ï¼šä½PEã€ä½PBä¸ºå¥½
    scores['pe_score'] = -scores['pe_ratio']
    scores['pb_score'] = -scores['pb_ratio']
    
    # è´¨é‡å› å­ï¼šé«˜ROEä¸ºå¥½
    scores['roe_score'] = scores['roe'].fillna(0)
    
    # è‚¡æ¯å› å­
    scores['dividend_score'] = scores['inc_return'].fillna(0)
    
    # æ ‡å‡†åŒ–
    for col in ['pe_score', 'pb_score', 'roe_score', 'dividend_score']:
        scores[col] = (scores[col] - scores[col].mean()) / scores[col].std()
    
    # ç»¼åˆå¾—åˆ†
    scores['composite'] = (
        scores['pe_score'] * 0.25 +
        scores['pb_score'] * 0.25 +
        scores['roe_score'] * 0.30 +
        scores['dividend_score'] * 0.20
    )
    
    selected = scores.nlargest(context.max_stocks, 'composite').index.tolist()
    
    execute_rebalance(context, selected)'''
}
```

### å¸‚åœºä¸­æ€§ç­–ç•¥æ¨¡æ¿

å¸‚åœºä¸­æ€§ç­–ç•¥æ¨¡æ¿é€šè¿‡å¤šç©ºå¯¹å†²å®ç°å¸‚åœºä¸­æ€§ã€‚

#### æ¨¡æ¿ç‰¹ç‚¹

- **å¤šç©ºç»„åˆ**ï¼šåŒæ—¶æŒæœ‰å¤šå¤´å’Œç©ºå¤´
- **å¸‚åœºä¸­æ€§**ï¼šå¯¹å†²å¸‚åœºé£é™©
- **å› å­é€‰è‚¡**ï¼šåŸºäºå› å­å¾—åˆ†è¿›è¡Œå¤šç©ºåˆ†é…
- **éœ€è¦èåˆ¸**ï¼šç©ºå¤´éƒ¨åˆ†éœ€è¦èåˆ¸æ”¯æŒ

#### æ¨¡æ¿å®ç°

```python
MARKET_NEUTRAL_TEMPLATE = {
    'trading_logic': '''def rebalance(context):
    """
    è°ƒä»“é€»è¾‘ - å¸‚åœºä¸­æ€§ç­–ç•¥
    æ³¨æ„ï¼šéœ€è¦èåˆ¸æ”¯æŒ
    """
    # è·å–å› å­æ•°æ®
    factor_data = get_factor_values(
        context.universe,
        context.factors,
        end_date=context.current_dt.strftime('%Y-%m-%d'),
        count=1
    )
    
    if factor_data is None:
        return
    
    # è®¡ç®—ç»¼åˆå¾—åˆ†
    scores = pd.DataFrame(index=context.universe)
    for factor in context.factors:
        if factor in factor_data:
            values = factor_data[factor].iloc[-1]
            scores[factor] = (values - values.mean()) / values.std()
    
    scores['composite'] = scores.mean(axis=1)
    scores = scores.dropna()
    
    # å¤šå¤´ï¼šå¾—åˆ†æœ€é«˜çš„è‚¡ç¥¨
    long_stocks = scores.nlargest(context.max_stocks // 2, 'composite').index.tolist()
    
    # ç©ºå¤´ï¼šå¾—åˆ†æœ€ä½çš„è‚¡ç¥¨ï¼ˆéœ€è¦èåˆ¸ï¼‰
    short_stocks = scores.nsmallest(context.max_stocks // 2, 'composite').index.tolist()
    
    log.info(f"å¤šå¤´: {long_stocks}")
    log.info(f"ç©ºå¤´: {short_stocks}")
    
    # æ‰§è¡Œå¤šå¤´
    long_weight = 0.5 / len(long_stocks) if long_stocks else 0
    for stock in long_stocks:
        order_target_percent(stock, long_weight)
    
    # ç©ºå¤´éœ€è¦åˆ¸å•†æ”¯æŒèåˆ¸
    # è¿™é‡Œä»…è®°å½•ï¼Œå®é™…æ‰§è¡Œéœ€è¦é…ç½®èåˆ¸è´¦æˆ·
    log.info("ç©ºå¤´éƒ¨åˆ†éœ€è¦èåˆ¸æ”¯æŒ")'''
}
```

## ğŸ”— ç›¸å…³ç« èŠ‚

- **7.2 ç­–ç•¥ç”Ÿæˆ**ï¼šäº†è§£ç­–ç•¥ç”Ÿæˆå™¨å¦‚ä½•ä½¿ç”¨ç­–ç•¥æ¨¡æ¿ç”Ÿæˆç­–ç•¥ä»£ç 
- **7.3 ç­–ç•¥ä¼˜åŒ–**ï¼šäº†è§£ç­–ç•¥ä¼˜åŒ–å¦‚ä½•åŸºäºæ¨¡æ¿è¿›è¡Œä¼˜åŒ–
- **7.4 ç­–ç•¥è§„èŒƒåŒ–**ï¼šäº†è§£ç­–ç•¥è§„èŒƒåŒ–å¦‚ä½•ç¡®ä¿æ¨¡æ¿ç”Ÿæˆçš„ä»£ç ç¬¦åˆè§„èŒƒ
- **ç¬¬6ç« ï¼šå› å­åº“**ï¼šäº†è§£å› å­åº“å¦‚ä½•ä¸ºç­–ç•¥æ¨¡æ¿æä¾›å› å­æ•°æ®
- **ç¬¬8ç« ï¼šå›æµ‹éªŒè¯**ï¼šäº†è§£å›æµ‹éªŒè¯å¦‚ä½•éªŒè¯æ¨¡æ¿ç”Ÿæˆçš„ç­–ç•¥

## ğŸ’¡ å…³é”®è¦ç‚¹

1. **æ¨¡æ¿æ ‡å‡†åŒ–**ï¼šæä¾›æ ‡å‡†åŒ–çš„ç­–ç•¥ä»£ç ç»“æ„ï¼Œç¡®ä¿ç­–ç•¥ä»£ç çš„ä¸€è‡´æ€§
2. **å¹³å°å…¼å®¹**ï¼šæ”¯æŒPTradeå’ŒQMTä¸¤ç§å¹³å°ï¼Œç»Ÿä¸€æ¥å£è§„èŒƒ
3. **é£æ ¼æ¨¡æ¿**ï¼šæä¾›å¤šå› å­ã€åŠ¨é‡æˆé•¿ã€ä»·å€¼æŠ•èµ„ã€å¸‚åœºä¸­æ€§ç­‰ä¸åŒé£æ ¼çš„æ¨¡æ¿
4. **å‚æ•°åŒ–è®¾è®¡**ï¼šæ¨¡æ¿å‚æ•°åŒ–ï¼Œæ”¯æŒçµæ´»é…ç½®å’Œå®šåˆ¶
5. **ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒæ¨¡æ¿ç‰ˆæœ¬ç®¡ç†ï¼Œä¾¿äºè¿½è¸ªå’Œå›æ»š

## ğŸ”® æ€»ç»“ä¸å±•æœ›

<div class="summary-outlook">
  <h3>æœ¬èŠ‚å›é¡¾</h3>
  <p>æœ¬èŠ‚ç³»ç»Ÿä»‹ç»äº†TRQuantç³»ç»Ÿçš„ç­–ç•¥æ¨¡æ¿ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç­–ç•¥æ¨¡æ¿çš„å®šä¹‰ã€ç®¡ç†ã€åº”ç”¨æœºåˆ¶ï¼Œä»¥åŠPTradeå’ŒQMTä¸¤ç§å¹³å°çš„ç­–ç•¥æ¨¡æ¿å®ç°ã€‚é€šè¿‡ç†è§£ç­–ç•¥æ¨¡æ¿çš„ç»“æ„ã€å‚æ•°å®šä¹‰ã€æ¥å£è§„èŒƒã€ç‰ˆæœ¬ç®¡ç†å’Œå®ä¾‹åŒ–æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•åˆ›å»ºã€ç®¡ç†å’Œåº”ç”¨ç­–ç•¥æ¨¡æ¿ï¼Œä¸ºç­–ç•¥ç”Ÿæˆæä¾›æ ‡å‡†åŒ–çš„æ¨¡æ¿æ”¯æ’‘ã€‚</p>
  
  <h3>ä¸‹èŠ‚é¢„å‘Š</h3>
  <p>æŒæ¡äº†ç­–ç•¥æ¨¡æ¿åï¼Œä¸‹ä¸€èŠ‚å°†ä»‹ç»ç­–ç•¥ç”Ÿæˆå™¨ï¼ŒåŒ…æ‹¬Strategy KBæ£€ç´¢ã€è§„åˆ™éªŒè¯ã€ç­–ç•¥è‰æ¡ˆç”Ÿæˆå’ŒPythonä»£ç ç”Ÿæˆã€‚é€šè¿‡ç†è§£ç­–ç•¥ç”Ÿæˆçš„æ ¸å¿ƒæŠ€æœ¯ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆç­–ç•¥ä»£ç ã€‚</p>
  
  <a href="/ashare-book6/007_Chapter7_Strategy_Development/7.2_Strategy_Generation_CN" class="next-section">
    ç»§ç»­å­¦ä¹ ï¼š7.2 ç­–ç•¥ç”Ÿæˆ â†’
  </a>
</div>

> **é€‚ç”¨ç‰ˆæœ¬**: v1.0.0+  
> **æœ€åæ›´æ–°**: 2025-12-12
