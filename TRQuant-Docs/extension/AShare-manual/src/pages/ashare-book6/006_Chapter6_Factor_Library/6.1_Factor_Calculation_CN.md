---
title: "6.1 å› å­è®¡ç®—"
description: "æ·±å…¥è§£æå› å­è®¡ç®—æœºåˆ¶ï¼ŒåŒ…æ‹¬å› å­åŸºç±»è®¾è®¡ã€å…«å¤§ç±»å› å­è®¡ç®—ã€æ•°æ®é¢„å¤„ç†å’Œå› å­ç»“æœç”Ÿæˆ"
lang: "zh-CN"
layout: "/src/layouts/HandbookLayout.astro"
currentBook: "ashare-book6"
updateDate: "2025-12-12"
---

# ğŸ”§ 6.1 å› å­è®¡ç®—

> **æ ¸å¿ƒæ‘˜è¦ï¼š**
> 
> æœ¬èŠ‚ç³»ç»Ÿä»‹ç»TRQuantç³»ç»Ÿçš„å› å­è®¡ç®—åŠŸèƒ½ï¼ŒåŒ…æ‹¬å› å­åŸºç±»ï¼ˆBaseFactorï¼‰è®¾è®¡ã€å…«å¤§ç±»å› å­ï¼ˆä»·å€¼ã€æˆé•¿ã€è´¨é‡ã€åŠ¨é‡ã€èµ„é‡‘æµã€è§„æ¨¡ã€æ³¢åŠ¨ç‡ã€æµåŠ¨æ€§ï¼‰çš„è®¡ç®—æ–¹æ³•ã€æ•°æ®é¢„å¤„ç†ï¼ˆå»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–ï¼‰å’Œå› å­ç»“æœï¼ˆFactorResultï¼‰ç”Ÿæˆã€‚é€šè¿‡ç†è§£å› å­åŸºç±»çš„æŠ½è±¡æ¥å£ã€å„ç±»å› å­çš„è®¡ç®—å…¬å¼å’Œå®ç°é€»è¾‘ã€æ•°æ®é¢„å¤„ç†çš„ä½œç”¨å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å› å­è®¡ç®—çš„æ ¸å¿ƒå®ç°ï¼Œä¸ºæ„å»ºä¸“ä¸šçº§çš„å› å­è®¡ç®—ç³»ç»Ÿå¥ å®šåŸºç¡€ã€‚

## ğŸ“‹ ç« èŠ‚æ¦‚è§ˆ

<script>
function scrollToSection(sectionId) {
  const element = document.getElementById(sectionId);
  if (element) {
    const headerOffset = 100;
    const elementPosition = element.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  }
}
</script>

<div class="section-overview">
  <div class="section-item" onclick="scrollToSection('section-6-1-1')">
    <h4>ğŸ—ï¸ 6.1.1 å› å­åŸºç±»è®¾è®¡</h4>
    <p>BaseFactoræŠ½è±¡æ¥å£ã€FactorResultæ•°æ®ç»“æ„ã€ç¼“å­˜ç®¡ç†</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-2')">
    <h4>ğŸ’° 6.1.2 ä»·å€¼å› å­</h4>
    <p>EPã€BPã€SPã€è‚¡æ¯ç‡å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-3')">
    <h4>ğŸ“ˆ 6.1.3 æˆé•¿å› å­</h4>
    <p>è¥æ”¶å¢é•¿ã€åˆ©æ¶¦å¢é•¿ã€ROEå˜åŒ–å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-4')">
    <h4>â­ 6.1.4 è´¨é‡å› å­</h4>
    <p>ROEã€æ¯›åˆ©ç‡ã€å‘¨è½¬ç‡ã€æ æ†å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-5')">
    <h4>ğŸš€ 6.1.5 åŠ¨é‡å› å­</h4>
    <p>ä»·æ ¼åŠ¨é‡ã€åè½¬ã€ç›¸å¯¹å¼ºå¼±å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-6')">
    <h4>ğŸ’° 6.1.6 èµ„é‡‘æµå› å­</h4>
    <p>åŒ—å‘èµ„é‡‘ã€ä¸»åŠ›èµ„é‡‘ã€èèµ„ä½™é¢å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-7')">
    <h4>ğŸ“ 6.1.7 è§„æ¨¡å› å­</h4>
    <p>å¸‚å€¼å› å­ã€å¯¹æ•°å¸‚å€¼å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-8')">
    <h4>ğŸ“Š 6.1.8 æ³¢åŠ¨ç‡å› å­</h4>
    <p>æ³¢åŠ¨ç‡ã€Betaå› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-9')">
    <h4>ğŸ’§ 6.1.9 æµåŠ¨æ€§å› å­</h4>
    <p>æ¢æ‰‹ç‡ã€æˆäº¤é¢ã€éæµåŠ¨æ€§å› å­è®¡ç®—</p>
  </div>
  <div class="section-item" onclick="scrollToSection('section-6-1-10')">
    <h4>ğŸ”„ 6.1.10 æ•°æ®é¢„å¤„ç†</h4>
    <p>å»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–å¤„ç†</p>
  </div>
</div>

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬èŠ‚å­¦ä¹ ï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š

- **ç†è§£å› å­åŸºç±»**ï¼šæŒæ¡BaseFactoræŠ½è±¡æ¥å£çš„è®¾è®¡å’ŒFactorResultæ•°æ®ç»“æ„
- **æŒæ¡ä»·å€¼å› å­**ï¼šç†è§£EPã€BPã€SPã€è‚¡æ¯ç‡ç­‰ä»·å€¼å› å­çš„è®¡ç®—æ–¹æ³•
- **ç†Ÿæ‚‰æˆé•¿å› å­**ï¼šç†è§£è¥æ”¶å¢é•¿ã€åˆ©æ¶¦å¢é•¿ã€ROEå˜åŒ–ç­‰æˆé•¿å› å­çš„è®¡ç®—
- **äº†è§£è´¨é‡å› å­**ï¼šæŒæ¡ROEã€æ¯›åˆ©ç‡ã€å‘¨è½¬ç‡ã€æ æ†ç­‰è´¨é‡å› å­çš„è®¡ç®—
- **ç†è§£åŠ¨é‡å› å­**ï¼šæŒæ¡ä»·æ ¼åŠ¨é‡ã€åè½¬ã€ç›¸å¯¹å¼ºå¼±ç­‰åŠ¨é‡å› å­çš„è®¡ç®—
- **æŒæ¡èµ„é‡‘æµå› å­**ï¼šç†è§£åŒ—å‘èµ„é‡‘ã€ä¸»åŠ›èµ„é‡‘ã€èèµ„ä½™é¢ç­‰èµ„é‡‘æµå› å­çš„è®¡ç®—
- **ç†Ÿæ‚‰è§„æ¨¡å› å­**ï¼šç†è§£å¸‚å€¼å› å­ã€å¯¹æ•°å¸‚å€¼å› å­çš„è®¡ç®—
- **äº†è§£æ³¢åŠ¨ç‡å› å­**ï¼šæŒæ¡æ³¢åŠ¨ç‡ã€Betaå› å­çš„è®¡ç®—
- **ç†è§£æµåŠ¨æ€§å› å­**ï¼šæŒæ¡æ¢æ‰‹ç‡ã€æˆäº¤é¢ã€éæµåŠ¨æ€§å› å­çš„è®¡ç®—
- **å®ç°æ•°æ®é¢„å¤„ç†**ï¼šç†è§£å»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–çš„å®ç°æ–¹æ³•

<h2 id="section-6-1-1">ğŸ—ï¸ 6.1.1 å› å­åŸºç±»è®¾è®¡</h2>

å› å­åŸºç±»ï¼ˆBaseFactorï¼‰æ˜¯æ‰€æœ‰å› å­çš„æŠ½è±¡åŸºç±»ï¼Œå®šä¹‰äº†ç»Ÿä¸€çš„å› å­è®¡ç®—æ¥å£ã€‚

### è®¾è®¡åŸåˆ™

<div class="key-points">
  <div class="key-point">
    <h4>ğŸ”Œ ç»Ÿä¸€æ¥å£</h4>
    <p>æ‰€æœ‰å› å­å®ç°ç»Ÿä¸€çš„æ¥å£è§„èŒƒï¼Œä¾¿äºç®¡ç†å’Œæ‰©å±•</p>
  </div>
  <div class="key-point">
    <h4>ğŸ“Š æ•°æ®é¢„å¤„ç†</h4>
    <p>åŸºç±»æä¾›æ•°æ®é¢„å¤„ç†åŠŸèƒ½ï¼ˆå»æå€¼ã€æ ‡å‡†åŒ–ã€ä¸­æ€§åŒ–ï¼‰</p>
  </div>
  <div class="key-point">
    <h4>ğŸ’¾ ç¼“å­˜ç®¡ç†</h4>
    <p>è‡ªåŠ¨ç¼“å­˜å› å­è®¡ç®—ç»“æœï¼Œæé«˜è®¡ç®—æ•ˆç‡</p>
  </div>
  <div class="key-point">
    <h4>ğŸ”§ å¯æ‰©å±•æ€§</h4>
    <p>é€šè¿‡æŠ½è±¡åŸºç±»ï¼Œæ˜“äºæ·»åŠ æ–°çš„å› å­å®ç°</p>
  </div>
</div>

### BaseFactoråŸºç±»

<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
from abc import ABC, abstractmethod
from typing import List, Optional, Dict, Any, Union
from datetime import datetime
import pandas as pd
import numpy as np
from pathlib import Path
import logging

logger = logging.getLogger(__name__)


class BaseFactor(ABC):
    """
    å› å­åŸºç±»
    
    æ‰€æœ‰å› å­éƒ½åº”ç»§æ‰¿æ­¤ç±»ï¼Œå¹¶å®ç°calculate_rawæ–¹æ³•ã€‚
    åŸºç±»æä¾›ï¼š
    - æ•°æ®é¢„å¤„ç†ï¼ˆå»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–ï¼‰
    - ç¼“å­˜ç®¡ç†
    - å› å­è¯„ä¼°
    - PTradeä»£ç ç”Ÿæˆ
    """
    
    # å› å­å…ƒä¿¡æ¯ï¼ˆå­ç±»åº”è¦†ç›–ï¼‰
    name: str = "BaseFactor"
    category: str = "base"  # value, growth, quality, momentum, flow
    description: str = "åŸºç¡€å› å­"
    direction: int = 1  # 1=è¶Šå¤§è¶Šå¥½, -1=è¶Šå°è¶Šå¥½
    
    def __init__(self, jq_client=None, cache_dir: Optional[Path] = None, use_cache: bool = True):
        """
        åˆå§‹åŒ–å› å­
        
        Args:
            jq_client: JQDataå®¢æˆ·ç«¯
            cache_dir: ç¼“å­˜ç›®å½•
            use_cache: æ˜¯å¦ä½¿ç”¨ç¼“å­˜
        """
        self.jq_client = jq_client
        self.cache_dir = cache_dir or Path(__file__).parent.parent.parent / "data" / "factors"
        self.cache_dir.mkdir(parents=True, exist_ok=True)
        self.use_cache = use_cache
        self._cache = {}
    
    @abstractmethod
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """
        è®¡ç®—åŸå§‹å› å­å€¼ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰
        
        Args:
            stocks: è‚¡ç¥¨åˆ—è¡¨
            date: è®¡ç®—æ—¥æœŸ
            **kwargs: é¢å¤–å‚æ•°
        
        Returns:
            pd.Series: å› å­å€¼ï¼Œindexä¸ºè‚¡ç¥¨ä»£ç 
        """
        pass
    
    def calculate(
        self,
        stocks: List[str],
        date: Union[str, datetime],
        winsorize: bool = True,
        standardize: bool = True,
        neutralize: bool = False,
        **kwargs,
    ) -> FactorResult:
        """
        è®¡ç®—å› å­ï¼ˆå¸¦é¢„å¤„ç†ï¼‰
        
        Args:
            stocks: è‚¡ç¥¨åˆ—è¡¨
            date: è®¡ç®—æ—¥æœŸ
            winsorize: æ˜¯å¦å»æå€¼
            standardize: æ˜¯å¦æ ‡å‡†åŒ–
            neutralize: æ˜¯å¦è¡Œä¸šä¸­æ€§åŒ–
            **kwargs: é¢å¤–å‚æ•°
        
        Returns:
            FactorResult: å› å­è®¡ç®—ç»“æœ
        """
        # æ ‡å‡†åŒ–æ—¥æœŸæ ¼å¼
        if isinstance(date, str):
            date = datetime.strptime(date, "%Y-%m-%d")
        
        # æ£€æŸ¥ç¼“å­˜
        cache_key = self._get_cache_key(stocks, date, winsorize, standardize, neutralize)
        if self.use_cache and cache_key in self._cache:
            logger.debug(f"ä½¿ç”¨ç¼“å­˜: {self.name} @ {date}")
            return self._cache[cache_key]
        
        # è®¡ç®—åŸå§‹å› å­å€¼
        raw_values = self.calculate_raw(stocks, date, **kwargs)
        
        # æ•°æ®é¢„å¤„ç†
        # è®¾è®¡åŸç†ï¼šå› å­é¢„å¤„ç†é‡‡ç”¨ç®¡é“æ¨¡å¼ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ
        # åŸå› ï¼šé¢„å¤„ç†æ­¥éª¤æœ‰ä¾èµ–å…³ç³»ï¼ˆå»æå€¼â†’æ ‡å‡†åŒ–â†’ä¸­æ€§åŒ–ï¼‰ï¼Œé¡ºåºæ‰§è¡Œç¡®ä¿æ­£ç¡®æ€§
        processed_values = raw_values.copy()
        
        # æ­¥éª¤1ï¼šå»æå€¼ï¼ˆWinsorizeï¼‰
        # è®¾è®¡åŸç†ï¼šå»é™¤æç«¯å€¼ï¼Œé¿å…å¼‚å¸¸å€¼å½±å“åç»­å¤„ç†
        # åŸå› ï¼šå› å­å€¼å¯èƒ½å­˜åœ¨å¼‚å¸¸å€¼ï¼ˆå¦‚æ•°æ®é”™è¯¯ã€åœç‰Œç­‰ï¼‰ï¼Œéœ€è¦å…ˆå¤„ç†
        # å‚æ•°é€‰æ‹©ï¼šé»˜è®¤ä½¿ç”¨1%å’Œ99%åˆ†ä½æ•°ï¼Œå¹³è¡¡å»æå€¼æ•ˆæœå’Œæ•°æ®ä¿ç•™
        if winsorize:
            processed_values = self._winsorize(processed_values)
        
        # æ­¥éª¤2ï¼šæ ‡å‡†åŒ–ï¼ˆZ-scoreï¼‰
        # è®¾è®¡åŸç†ï¼šå°†å› å­å€¼æ ‡å‡†åŒ–ä¸ºå‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º1çš„åˆ†å¸ƒ
        # åŸå› ï¼šä¸åŒå› å­é‡çº²ä¸åŒï¼Œæ ‡å‡†åŒ–åä¾¿äºæ¯”è¾ƒå’Œç»„åˆ
        # æ³¨æ„äº‹é¡¹ï¼šæ ‡å‡†å·®ä¸º0æ—¶ï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼‰ï¼Œåªå‡å»å‡å€¼ï¼Œé¿å…é™¤é›¶é”™è¯¯
        if standardize:
            processed_values = self._standardize(processed_values)
        
        # æ­¥éª¤3ï¼šä¸­æ€§åŒ–ï¼ˆNeutralizeï¼‰
        # è®¾è®¡åŸç†ï¼šå»é™¤è¡Œä¸š/å¸‚å€¼ç­‰é£æ ¼å› å­å½±å“ï¼Œä¿ç•™å› å­æœ¬èº«çš„alpha
        # åŸå› ï¼šå› å­å¯èƒ½å—è¡Œä¸š/å¸‚å€¼ç­‰é£æ ¼å› å­å½±å“ï¼Œä¸­æ€§åŒ–åæ›´èƒ½åæ˜ å› å­æœ¬èº«çš„é¢„æµ‹èƒ½åŠ›
        # å®ç°æ–¹å¼ï¼šæŒ‰è¡Œä¸š/å¸‚å€¼åˆ†ç»„ï¼Œå‡å»ç»„å†…å‡å€¼
        if neutralize:
            processed_values = self._neutralize(processed_values, stocks, date)
        
        # åˆ›å»ºå› å­ç»“æœ
        result = FactorResult(
            name=self.name,
            date=date,
            values=processed_values,
            raw_values=raw_values,
            metadata={
                "category": self.category,
                "description": self.description,
                "direction": self.direction,
                "winsorize": winsorize,
                "standardize": standardize,
                "neutralize": neutralize,
            }
        )
        
        # ç¼“å­˜ç»“æœ
        if self.use_cache:
            self._cache[cache_key] = result
        
        return result
    
    def _winsorize(self, values: pd.Series, lower: float = 0.01, upper: float = 0.99) -> pd.Series:
        """
        å»æå€¼ï¼ˆWinsorizeï¼‰
        
        **è®¾è®¡åŸç†**ï¼š
        - **åˆ†ä½æ•°æˆªæ–­**ï¼šä½¿ç”¨åˆ†ä½æ•°ç¡®å®šæˆªæ–­è¾¹ç•Œï¼Œè€Œéå›ºå®šé˜ˆå€¼
        - **è‡ªé€‚åº”è¾¹ç•Œ**ï¼šæ ¹æ®æ•°æ®åˆ†å¸ƒè‡ªåŠ¨ç¡®å®šè¾¹ç•Œï¼Œé€‚åº”ä¸åŒå› å­
        - **ä¿ç•™ä¿¡æ¯**ï¼šå°†æç«¯å€¼æˆªæ–­åˆ°è¾¹ç•Œï¼Œè€Œéåˆ é™¤ï¼Œä¿ç•™æ›´å¤šä¿¡æ¯
        
        **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡**ï¼š
        1. **é²æ£’æ€§**ï¼šåˆ†ä½æ•°æ–¹æ³•å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼Œæ¯”å‡å€¼Â±3Ïƒæ›´ç¨³å¥
        2. **è‡ªé€‚åº”æ€§**ï¼šä¸åŒå› å­åˆ†å¸ƒä¸åŒï¼Œåˆ†ä½æ•°æ–¹æ³•è‡ªåŠ¨é€‚åº”
        3. **ä¿¡æ¯ä¿ç•™**ï¼šæˆªæ–­è€Œéåˆ é™¤ï¼Œä¿ç•™æ›´å¤šæ ·æœ¬ï¼Œæé«˜ç»Ÿè®¡ç¨³å®šæ€§
        
        **å‚æ•°é€‰æ‹©**ï¼š
        - **é»˜è®¤1%å’Œ99%åˆ†ä½æ•°**ï¼šå¹³è¡¡å»æå€¼æ•ˆæœå’Œæ•°æ®ä¿ç•™
        - **å¯è°ƒæ•´**ï¼šæ ¹æ®å› å­ç‰¹æ€§è°ƒæ•´ï¼Œå¦‚æ³¢åŠ¨ç‡å› å­å¯ç”¨5%å’Œ95%
        
        **æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”**ï¼š
        - **æ–¹æ¡ˆAï¼šå‡å€¼Â±3Ïƒ**
          - ä¼˜ç‚¹ï¼šç®€å•ç›´è§‚
          - ç¼ºç‚¹ï¼šå¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œå¯èƒ½è¿‡åº¦æˆªæ–­
        - **æ–¹æ¡ˆBï¼šåˆ†ä½æ•°æˆªæ–­ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰**
          - ä¼˜ç‚¹ï¼šé²æ£’æ€§å¥½ï¼Œè‡ªé€‚åº”
          - ç¼ºç‚¹ï¼šéœ€è¦è®¡ç®—åˆ†ä½æ•°ï¼Œç¨æ…¢
        
        Args:
            values: å› å­å€¼
            lower: ä¸‹åˆ†ä½æ•°ï¼ˆé»˜è®¤0.01ï¼Œå³1%åˆ†ä½æ•°ï¼‰
            upper: ä¸Šåˆ†ä½æ•°ï¼ˆé»˜è®¤0.99ï¼Œå³99%åˆ†ä½æ•°ï¼‰
        
        Returns:
            å»æå€¼åçš„å› å­å€¼ï¼ˆæç«¯å€¼è¢«æˆªæ–­åˆ°è¾¹ç•Œï¼‰
        """
        # è®¾è®¡åŸç†ï¼šä½¿ç”¨quantileè®¡ç®—åˆ†ä½æ•°ï¼Œclipæˆªæ–­
        # åŸå› ï¼špandasçš„quantileå’Œclipæ–¹æ³•é«˜æ•ˆä¸”å‡†ç¡®
        lower_bound = values.quantile(lower)
        upper_bound = values.quantile(upper)
        
        return values.clip(lower=lower_bound, upper=upper_bound)
    
    def _standardize(self, values: pd.Series) -> pd.Series:
        """
        æ ‡å‡†åŒ–ï¼ˆZ-scoreï¼‰
        
        **è®¾è®¡åŸç†**ï¼š
        - **Z-scoreæ ‡å‡†åŒ–**ï¼šå°†å› å­å€¼è½¬æ¢ä¸ºå‡å€¼ä¸º0ã€æ ‡å‡†å·®ä¸º1çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒ
        - **é™¤é›¶ä¿æŠ¤**ï¼šæ ‡å‡†å·®ä¸º0æ—¶ï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼‰ï¼Œåªå‡å»å‡å€¼ï¼Œé¿å…é™¤é›¶é”™è¯¯
        - **çº¿æ€§å˜æ¢**ï¼šä¿æŒå› å­å€¼çš„ç›¸å¯¹å…³ç³»ï¼Œåªæ”¹å˜é‡çº²
        
        **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡**ï¼š
        1. **é‡çº²ç»Ÿä¸€**ï¼šä¸åŒå› å­é‡çº²ä¸åŒï¼ˆå¦‚PEã€ROEï¼‰ï¼Œæ ‡å‡†åŒ–åä¾¿äºæ¯”è¾ƒå’Œç»„åˆ
        2. **æƒé‡å…¬å¹³**ï¼šæ ‡å‡†åŒ–åæ‰€æœ‰å› å­åœ¨åŒä¸€å°ºåº¦ï¼Œé¿å…é‡çº²å¤§çš„å› å­ä¸»å¯¼
        3. **ç»Ÿè®¡ç‰¹æ€§**ï¼šæ ‡å‡†åŒ–åå› å­å€¼ç¬¦åˆæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œä¾¿äºåç»­åˆ†æ
        
        **ä½¿ç”¨åœºæ™¯**ï¼š
        - å¤šå› å­ç»„åˆæ—¶ï¼Œéœ€è¦ç»Ÿä¸€é‡çº²
        - å› å­è¯„ä»·æ—¶ï¼Œéœ€è¦æ¯”è¾ƒä¸åŒå› å­çš„è¡¨ç°
        - æœºå™¨å­¦ä¹ æ¨¡å‹è¾“å…¥æ—¶ï¼Œéœ€è¦æ ‡å‡†åŒ–ç‰¹å¾
        
        **æ³¨æ„äº‹é¡¹**ï¼š
        - æ ‡å‡†åŒ–åº”åœ¨å»æå€¼ä¹‹åï¼Œé¿å…æç«¯å€¼å½±å“å‡å€¼å’Œæ ‡å‡†å·®
        - æ ‡å‡†å·®ä¸º0æ—¶ï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼‰ï¼Œå› å­æ— åŒºåˆ†åº¦ï¼Œæ ‡å‡†åŒ–åä»ä¸º0
        
        Args:
            values: å› å­å€¼ï¼ˆå»ºè®®å…ˆè¿›è¡Œå»æå€¼å¤„ç†ï¼‰
        
        Returns:
            æ ‡å‡†åŒ–åçš„å› å­å€¼ï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰
        """
        mean = values.mean()
        std = values.std()
        
        # è®¾è®¡åŸç†ï¼šé™¤é›¶ä¿æŠ¤
        # åŸå› ï¼šæ ‡å‡†å·®ä¸º0æ—¶ï¼ˆæ‰€æœ‰å€¼ç›¸åŒï¼‰ï¼Œå› å­æ— åŒºåˆ†åº¦ï¼Œåªå‡å»å‡å€¼å³å¯
        if std == 0:
            return values - mean
        
        # è®¾è®¡åŸç†ï¼šZ-scoreå…¬å¼ (x - mean) / std
        # åŸå› ï¼šè¿™æ˜¯æ ‡å‡†çš„Z-scoreæ ‡å‡†åŒ–å…¬å¼ï¼Œå°†æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒ
        return (values - mean) / std
    
    def _neutralize(self, values: pd.Series, stocks: List[str], date: Union[str, datetime]) -> pd.Series:
        """
        è¡Œä¸šä¸­æ€§åŒ–
        
        Args:
            values: å› å­å€¼
            stocks: è‚¡ç¥¨åˆ—è¡¨
            date: è®¡ç®—æ—¥æœŸ
        
        Returns:
            ä¸­æ€§åŒ–åçš„å› å­å€¼
        """
        # è·å–è¡Œä¸šä¿¡æ¯
        industries = self._get_industries(stocks, date)
        
        # æŒ‰è¡Œä¸šåˆ†ç»„ï¼Œè®¡ç®—è¡Œä¸šå‡å€¼
        industry_means = {}
        for stock, industry in industries.items():
            if industry not in industry_means:
                industry_means[industry] = []
            if stock in values.index and not pd.isna(values[stock]):
                industry_means[industry].append(values[stock])
        
        # è®¡ç®—è¡Œä¸šå‡å€¼
        for industry in industry_means:
            industry_means[industry] = np.mean(industry_means[industry]) if industry_means[industry] else 0
        
        # ä¸­æ€§åŒ–ï¼šå‡å»è¡Œä¸šå‡å€¼
        neutralized = values.copy()
        for stock, industry in industries.items():
            if stock in neutralized.index and industr<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_stocks.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
from dataclasses import dataclass, field

@dataclass
class FactorResult:
    """å› å­è®¡ç®—ç»“æœ"""
    
    name: str  # å› å­åç§°
    date: datetime  # è®¡ç®—æ—¥æœŸ
    values: pd.Series  # å› å­å€¼ï¼ˆindexä¸ºè‚¡ç¥¨ä»£ç ï¼‰
    raw_values: Optional[pd.Series] = None  # åŸå§‹å› å­å€¼ï¼ˆæœªå¤„ç†ï¼‰
    metadata: Dict[str, Any] = field(default_factory=dict)
    
    @property
    def stocks(self) -> List[str]:
        """è·å–è‚¡ç¥¨åˆ—è¡¨"""
        return self.values.index.tolist()
    
    @property
    def valid_count(self) -> int:
        """æœ‰æ•ˆå€¼æ•°é‡"""
        return self.values.notna().sum()
    
    @property
    def coverage(self) -> float:
        """è¦†ç›–ç‡"""
        return self.valid_count / len(self.values) if len(self.values) > 0 else 0
    
    def top_n(self, n: int = 30) -> List[str]:
        """è·å–å› å­å€¼æœ€é«˜çš„Nåªè‚¡ç¥¨"""
        return self.values.nlargest(n).index.tolist()
    
    def bottom_n(self, n: int = 30) -> List[str]:
        """è·å–å› å­å€¼æœ€ä½çš„Nåªè‚¡ç¥¨"""
        <CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class EPFactor(BaseFactor):
    """
    ç›ˆåˆ©æ”¶ç›Šç‡å› å­ (Earnings-to-Price)
    
    å…¬å¼: EP = å‡€åˆ©æ¶¦TTM / å¸‚å€¼ = 1 / PE
    
    ç»æµå­¦é€»è¾‘ï¼š
    - EPæ˜¯PEçš„å€’æ•°ï¼Œä¾¿äºå¤„ç†è´Ÿå€¼
    - é«˜EPè¡¨ç¤ºä¼°å€¼ä¾¿å®œï¼Œé¢„æœŸæ”¶ç›Šé«˜
    
    Aè‚¡å®è¯ï¼š
    - ICå‡å€¼çº¦0.03ï¼Œåœ¨ä¸­å°ç›˜è‚¡æ›´æœ‰æ•ˆ
    - ä¸æˆé•¿å› å­è´Ÿç›¸å…³
    """
    
    name = "EP"
    category = "value"
    description = "ç›ˆåˆ©æ”¶ç›Šç‡å› å­"
    direction = 1  # è¶Šå¤§è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—EPå› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—EPå› å­")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import query, valuation
            
            # æŸ¥è¯¢ä¼°å€¼æ•°æ®
            q = query(valuation.code, valuation.pe_ratio, valuation.market_cap).filter(
                valuation.code.in_(stocks)
            )
            
            df = jq.get_fundamentals(q, date=date)
            
            if df.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # è®¡ç®—EP = 1/PE
            # å¤„ç†è´ŸPEå’Œæç«¯å€¼
            df["EP"] = np.where(
                (df["pe_ratio"] > 0) & (df["pe_ratio"] < 500), 
                1.0 / df["pe_ratio"], 
                np.nan
            )
            
            result = df.set_index("code")["EP"]
            
            # ç¡®ä¿æ‰€æœ‰è‚¡ç¥¨éƒ½æœ‰å€¼
            result = result.reindex(stocks)
            
            logger.info(f"EPå› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            ret<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class BPFactor(BaseFactor):
    """
    è´¦é¢å¸‚å€¼æ¯”å› å­ (Book-to-Price)
    
    å…¬å¼: BP = å‡€èµ„äº§ / å¸‚å€¼ = 1 / PB
    
    ç»æµå­¦é€»è¾‘ï¼š
    - BPæ˜¯PBçš„å€’æ•°
    - é«˜BPè¡¨ç¤ºå¸‚å‡€ç‡ä½ï¼Œä¼°å€¼ä¾¿å®œ
    """
    
    name = "BP"
    category = "value"
    description = "è´¦é¢å¸‚å€¼æ¯”å› å­"
    direction = 1  # è¶Šå¤§è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—BPå› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—BPå› å­")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import query, valuation
            
            # æŸ¥è¯¢ä¼°å€¼æ•°æ®
            q = query(valuation.code, valuation.pb_ratio).filter(
                valuation.code.in_(stocks)
            )
            
            df = jq.get_fundamentals(q, date=date)
            
            if df.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # è®¡ç®—BP = 1/PB
            df["BP"] = np.where(
                (df["pb_ratio"] > 0) & (df["pb_ratio"] < 50), 
                1.0 / df["pb_ratio"], 
                np.nan
            )
            
            result = df.set_index("code")["BP"]
            result = result.reindex(stocks)
            
            return result
        
        except Exception as e:
            logger.err<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class RevenueGrowthFactor(BaseFactor):
    """
    è¥æ”¶å¢é•¿å› å­
    
    å…¬å¼: è¥æ”¶å¢é•¿ç‡ = (è¥æ”¶TTM - ä¸Šå¹´åŒæœŸè¥æ”¶TTM) / ä¸Šå¹´åŒæœŸè¥æ”¶TTM
    
    ç»æµå­¦é€»è¾‘ï¼š
    - è¥æ”¶å¢é•¿åæ˜ å…¬å¸ä¸šåŠ¡æ‰©å¼ èƒ½åŠ›
    - æŒç»­é«˜å¢é•¿çš„å…¬å¸æ›´å…·æŠ•èµ„ä»·å€¼
    """
    
    name = "RevenueGrowth"
    category = "growth"
    description = "è¥æ”¶å¢é•¿å› å­"
    direction = 1  # è¶Šå¤§è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—è¥æ”¶å¢é•¿å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—è¥æ”¶å¢é•¿å› å­")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import query, income
            
            # æŸ¥è¯¢å½“å‰æœŸè¥æ”¶
            q_current = query(income.code, income.operating_revenue).filter(
                income.code.in_(stocks)
            )
            df_current = jq.get_fundamentals(q_current, date=date)
            
            # æŸ¥è¯¢ä¸Šå¹´åŒæœŸè¥æ”¶
            if isinstance(date, str):
                date_obj = datetime.strptime(date, "%Y-%m-%d")
            else:
                date_obj = date
            
            date_last_year = date_obj.replace(year=date_obj.year - 1)
            df_last_year = jq.get_fundamentals(q_current, date=date_last_year.strftime("%Y-%m-%d"))
            
            if df_current.empty or df_last_year.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # åˆå¹¶æ•°æ®
            merged = df_current.merge(
                df_last_year,
                on="code",
                suffixes=("_current", "_last")
            )
            
            # è®¡ç®—å¢é•¿ç‡
            merged["revenue_growth"] = (
                (merged["operating_revenue_current"] - merged["operating_revenue_last"]) /
                merged["operating_revenue_last"]
            ) * 100
            
            result = merged.set_index("code")["revenue_growth"]
            result = result.reindex(stocks)
            
            return result
        
        except Exception as e:
            logger.error(f"è¥æ”¶<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class ROEFactor(BaseFactor):
    """
    ROEå› å­ï¼ˆå‡€èµ„äº§æ”¶ç›Šç‡ï¼‰
    
    å…¬å¼: ROE = å‡€åˆ©æ¶¦ / å‡€èµ„äº§
    
    ç»æµå­¦é€»è¾‘ï¼š
    - ROEåæ˜ å…¬å¸ç›ˆåˆ©èƒ½åŠ›
    - é«˜ROEä¸”ç¨³å®šçš„å…¬å¸æ›´å…·æŠ•èµ„ä»·å€¼
    """
    
    name = "ROE"
    category = "quality"
    description = "ROEå› å­"
    direction = 1  # è¶Šå¤§è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—ROEå› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—ROEå› å­")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import query, indicator
            
            # æŸ¥è¯¢ROEæ•°æ®
            q = query(indicator.code, indicator.roe).filter(
                indicator.code.in_(stocks)
            )
            
            df = jq.get_fundamentals(q, date=date)
            
            if df.empty:
                return pd.Series(index=stocks, dtype=float)
            
            result = df.set_index("code")["roe"]
            result = result.reindex(stocks)
            
            return result
        
        except Exception as e:
            logger<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class PriceMomentumFactor(BaseFactor):
    """
    ä»·æ ¼åŠ¨é‡å› å­
    
    å…¬å¼: åŠ¨é‡ = (P_t - P_t-N) / P_t-N
    
    ç»æµå­¦é€»è¾‘ï¼š
    - ä»·æ ¼è¶‹åŠ¿å…·æœ‰å»¶ç»­æ€§
    - åæ˜ å¸‚åœºå¯¹å…¬å¸çš„è®¤å¯
    
    Aè‚¡å®è¯ï¼š
    - 3-6ä¸ªæœˆåŠ¨é‡æ•ˆæœè¾ƒå¥½
    - éœ€è¦å‰”é™¤æœ€è¿‘1ä¸ªæœˆï¼ˆçŸ­æœŸåè½¬ï¼‰
    """
    
    name = "PriceMomentum"
    category = "momentum"
    description = "ä»·æ ¼åŠ¨é‡å› å­"
    direction = 1
    
    def __init__(self, jq_client=None, lookback_days: int = 120, skip_days: int = 20, **kwargs):
        """
        åˆå§‹åŒ–
        
        Args:
            lookback_days: å›çœ‹å¤©æ•°ï¼ˆé»˜è®¤120å¤©ï¼Œçº¦6ä¸ªæœˆï¼‰
            skip_days: è·³è¿‡æœ€è¿‘å¤©æ•°ï¼ˆé»˜è®¤20å¤©ï¼Œçº¦1ä¸ªæœˆï¼‰
        """
        super().__init__(jq_client=jq_client, **kwargs)
        self.lookback_days = lookback_days
        self.skip_days = skip_days
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—ä»·æ ¼åŠ¨é‡å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—ä»·æ ¼åŠ¨é‡å› å­")
        
        try:
            import jqdatasdk as jq
            
            if isinstance(date, str):
                date = datetime.strptime(date, "%Y-%m-%d")
            
            # è·å–å†å²ä»·æ ¼
            lookback_days = kwargs.get("lookback_days", self.lookback_days)
            skip_days = kwargs.get("skip_days", self.skip_days)
            total_days = lookback_days + skip_days + 10  # å¤šå–ä¸€äº›ä»¥é˜²èŠ‚å‡æ—¥
            
            prices = jq.get_price(
                stocks, end_date=date, count=total_days, fields=["close"], panel=False
            )
            
            if prices.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # è®¡ç®—æ¯åªè‚¡ç¥¨çš„åŠ¨é‡
            momentum_dict = {}
            
            for stock in stocks:
                stock_prices = prices[prices["code"] == stock]["close"]
                
                if len(stock_prices) < lookback_days:
                    momentum_dict[stock] = np.nan
                    continue
                
                # è·³è¿‡æœ€è¿‘skip_dayså¤©
                if skip_days > 0:
                    current_price = stock_prices.iloc[-(skip_days + 1)]
                else:
                    current_price = stock_prices.iloc[-1]
                
                # è·å–lookback_dayså¤©å‰çš„ä»·æ ¼
                past_price = stock_prices.iloc[-(lookback_days + skip_days + 1)]
                
                # è®¡ç®—åŠ¨é‡
                if past_price > 0:
                    momentum = (current_price - past_price) / past_price
                else:
                    momentum = np.nan
                
                momentum_dict[stock] = momentum
            
            result = pd.Series(momentum_dict)
            result = result.reindex(stocks)
            
            return result
        
        except Exception as e:
            logger.error(f"ä»·æ ¼åŠ¨é‡å› å­è®¡ç®—å¤±è´¥: {e}")
            return pd.Series(index=stocks, dtype=float)
```
-->n(stock_prices) < lookback_days:
                    momentum_dict[stock] = np.nan
                    continue
                
                # è·³è¿‡æœ€è¿‘skip_dayså¤©
                if skip_days > 0:
                    current_price = stock_prices.iloc[-(skip_days + 1)]
                else:
                    current_price = stock_p<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class NorthboundFlowFactor(BaseFactor):
    """
    åŒ—å‘èµ„é‡‘å› å­
    
    ç»æµå­¦é€»è¾‘ï¼š
    - åŒ—å‘èµ„é‡‘ä»£è¡¨å¤–èµ„çš„æŠ•èµ„åå¥½
    - é€šå¸¸è¢«è®¤ä¸ºæ˜¯"èªæ˜é’±"
    - åå¥½é«˜ROEã€ä½ä¼°å€¼çš„é¾™å¤´è‚¡
    
    Aè‚¡å®è¯ï¼š
    - ICå¯è¾¾0.045ï¼Œæ˜¯Aè‚¡æœ€æœ‰æ•ˆçš„å› å­ä¹‹ä¸€
    - åœ¨è“ç­¹è‚¡ä¸­æ•ˆæœå°¤å…¶æ˜¾è‘—
    """
    
    name = "NorthboundFlow"
    category = "flow"
    description = "åŒ—å‘èµ„é‡‘å› å­"
    direction = 1
    
    def __init__(self, jq_client=None, lookback_days: int = 20, **kwargs):
        """
        åˆå§‹åŒ–
        
        Args:
            lookback_days: å›çœ‹å¤©æ•°ï¼ˆé»˜è®¤20å¤©ï¼Œçº¦1ä¸ªæœˆï¼‰
        """
        super().__init__(jq_client=jq_client, **kwargs)
        self.lookback_days = lookback_days
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—åŒ—å‘èµ„é‡‘å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯æ¥è®¡ç®—åŒ—å‘èµ„é‡‘å› å­")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import finance
            from datetime import timedelta
            
            if isinstance(date, str):
                date = datetime.strptime(date, "%Y-%m-%d")
            
            # è·å–å½“å‰æŒè‚¡æ¯”ä¾‹
            q_current = jq.query(
                finance.STK_HK_HOLD_INFO.code,
                finance.STK_HK_HOLD_INFO.share_ratio
            ).filter(
                finance.STK_HK_HOLD_INFO.code.in_(stocks),
                finance.STK_HK_HOLD_INFO.day == date.strftime("%Y-%m-%d"),
            )
            
            df_current = finance.run_query(q_current)
            
            # è·å–Nå¤©å‰æŒè‚¡æ¯”ä¾‹
            past_date = date - timedelta(days=self.lookback_days)
            q_past = jq.query(
                finance.STK_HK_HOLD_INFO.code,
                finance.STK_HK_HOLD_INFO.share_ratio
            ).filter(
                finance.STK_HK_HOLD_INFO.code.in_(stocks),
                finance.STK_HK_HOLD_INFO.day == past_date.strftime("%Y-%m-%d"),
            )
            
            df_past = finance.run_query(q_past)
            
            if df_current.empty or df_past.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # è®¡ç®—æŒè‚¡æ¯”ä¾‹å˜åŒ–
            df_current = df_current.set_index("code")
            df_past = df_past.set_index("code")
            
            flow_dict = {}
            for stock in stocks:
                current_ratio = df_current.loc[stock, "share_ratio"] if stock in df_current.index else 0
                past_ratio = df_past.loc[stock, "share_ratio"] if stock in df_past.index else 0
                
                # æŒè‚¡æ¯”ä¾‹å˜åŒ–
                flow_dict[stock] = current_ratio - past_ratio
            
            result = pd.Series(flow_dict)
            result = result.reindex(stocks)
            
            logger.info(f"åŒ—å‘èµ„é‡‘å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class MainForceFlowFactor(BaseFactor):
    """
    ä¸»åŠ›èµ„é‡‘å› å­
    
    ç»æµå­¦é€»è¾‘ï¼š
    - ä¸»åŠ›èµ„é‡‘åæ˜ æœºæ„æŠ•èµ„è€…çš„è¡Œä¸º
    - å¤§å•æµå…¥é€šå¸¸è¡¨ç¤ºæœºæ„çœ‹å¥½
    
    Aè‚¡å®è¯ï¼š
    - åœ¨ä¸­å°ç›˜è‚¡ä¸­æ•ˆæœè¾ƒå¥½
    - éœ€è¦ç»“åˆæˆäº¤é‡åˆ†æ
    """
    
    name = "MainForceFlow"
    category = "flow"
    description = "ä¸»åŠ›èµ„é‡‘å› å­"
    direction = 1
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—ä¸»åŠ›èµ„é‡‘å› å­"""
        # å®ç°é€»è¾‘ï¼šåŸºäºå¤§å•å‡€æµå…¥è®¡ç®—
        # æ³¨æ„ï¼šJQDataçš„ä¸»åŠ›èµ„é‡‘æ•°æ®å¯èƒ½éœ€è¦ç‰¹æ®Šæƒé™
        # è¿™é‡Œæä¾›ä¸€ä¸ªåŸºäºæˆäº¤é‡å’Œä»·æ ¼å˜åŒ–çš„è¿‘ä¼¼è®¡ç®—
        pass
```
-->         df_current = df_curre<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class SizeFactor(BaseFactor):
    """
    è§„æ¨¡å› å­ï¼ˆå¸‚å€¼å› å­ï¼‰
    
    å…¬å¼: Size = -log(å¸‚å€¼)
    
    ç»æµå­¦é€»è¾‘ï¼š
    - å°å¸‚å€¼è‚¡ç¥¨å­˜åœ¨æº¢ä»·æ•ˆåº”
    - Fama-Frenchä¸‰å› å­æ¨¡å‹æ ¸å¿ƒå› å­ä¹‹ä¸€
    
    Aè‚¡å®è¯ï¼š
    - å°ç›˜è‚¡æº¢ä»·åœ¨å¤šæ•°å¹´ä»½æ˜¾è‘—
    - ä½†éœ€æ³¨æ„æµåŠ¨æ€§é£é™©
    """
    
    name = "Size"
    category = "size"
    description = "è§„æ¨¡å› å­ï¼ˆå¸‚å€¼ï¼‰"
    direction = -1  # å¸‚å€¼è¶Šå°è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—è§„æ¨¡å› å­ï¼ˆè´Ÿå¯¹æ•°å¸‚å€¼ï¼‰"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯")
        
        try:
            import jqdatasdk as jq
            from jqdatasdk import query, valuation
            
            q = query(valuation.code, valuation.market_cap).filter(
                valuation.code.in_(stocks)
            )
            
            df = jq.get_fundamentals(q, date=date)
            
            if df.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # è´Ÿå¯¹æ•°å¸‚å€¼ï¼ˆå¸‚å€¼è¶Šå°ï¼Œå› å­å€¼è¶Šå¤§ï¼‰
            df["size_factor"] = -np.log(df["market_cap"].clip(lower=1))
            
            result = df.set_index("code")["size_factor"]
            result = result.reindex(stocks)
            
            logger.info(f"è§„æ¨¡å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
        except Exception as e:
            logger.error(f"è§„æ¨¡å› å­è®¡ç®—å¤±è´¥: {e}")
            return pd.Series(index=stocks, dtype=float)
```
-->æ¨¡å‹çš„æ ¸å¿ƒå› å­ä¹‹ä¸€ã€‚

### è®¾è®¡åŸç†

è§„æ¨¡å› å­åŸºäº<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1___init__.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class VolatilityFactor(BaseFactor):
    """
    æ³¢åŠ¨ç‡å› å­
    
    å…¬å¼: Volatility = è¿‡å»Næ—¥æ”¶ç›Šç‡æ ‡å‡†å·®
    
    ç»æµå­¦é€»è¾‘ï¼š
    - ä½æ³¢åŠ¨ç‡è‚¡ç¥¨é•¿æœŸè¡¨ç°æ›´å¥½ï¼ˆä½æ³¢åŠ¨ç‡å¼‚è±¡ï¼‰
    - é«˜æ³¢åŠ¨ç‡å¯èƒ½åæ˜ æŠ•æœºè¡Œä¸º
    
    Aè‚¡å®è¯ï¼š
    - ä½æ³¢åŠ¨ç‡æ•ˆåº”åœ¨Aè‚¡åŒæ ·æœ‰æ•ˆ
    - é€šå¸¸é‡‡ç”¨20-60æ—¥çª—å£
    """
    
    name = "Volatility"
    category = "volatility"
    description = "æ³¢åŠ¨ç‡å› å­"
    direction = -1  # æ³¢åŠ¨ç‡è¶Šä½è¶Šå¥½
    
    def __init__(self, jq_client=None, lookba<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class TurnoverFactor(BaseFactor):
    """
    æ¢æ‰‹ç‡å› å­
    
    å…¬å¼: æ¢æ‰‹ç‡ = æˆäº¤é‡ / æµé€šè‚¡æœ¬
    
    ç»æµå­¦é€»è¾‘ï¼š
    - é«˜æ¢æ‰‹ç‡è¡¨ç¤ºäº¤æ˜“æ´»è·ƒ
    - ä½†è¿‡é«˜æ¢æ‰‹ç‡å¯èƒ½åæ˜ æŠ•æœºè¡Œä¸º
    
    Aè‚¡å®è¯ï¼š
    - é€‚åº¦æ¢æ‰‹ç‡æ•ˆæœè¾ƒå¥½
    - éœ€è¦ç»“åˆå…¶ä»–å› å­ä½¿ç”¨
    """
    
    name = "Turnover"
    category = "liquidity"
    description = "æ¢æ‰‹ç‡å› å­"
    direction = 1  # é€‚åº¦æ¢æ‰‹ç‡è¾ƒå¥½ï¼Œä½†è¿‡é«˜ä¹Ÿä¸å¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—æ¢æ‰‹ç‡å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯")
        
        try:
            import jqdatasdk as jq
            
            if isinstance(date, str):
                date = datetime.strptime(date, "%Y-%m-%d")
            
            # è·å–æ¢æ‰‹ç‡æ•°æ®
            turnover_data = jq.get_extras("turnover", stocks, end_date=date, count=1)
            
            if turnover_data.empty:
                return pd.Series(index=stocks, dtype=float)
            
            # å–æœ€è¿‘ä¸€å¤©çš„æ¢æ‰‹ç‡
            result = turnover_data.iloc[0]
            result = result.reindex(stocks)
            
            logger.info(f"æ¢æ‰‹ç‡å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
        except Exception as e:
            logger.error(f"æ¢æ‰‹ç‡å› å­è®¡ç®—å¤±è´¥: {e}")
            return pd.Series(index=stocks, dtype=float)
```
-->qrt(252)  # å¹´åŒ–æ³¢åŠ¨ç‡
                
                # è´Ÿå·ï¼šä½æ³¢åŠ¨ç‡å¾—é«˜åˆ†
                volatility_dict[stock] = -vol
            
            result = pd.Series(volatility_dict)
            logger.info(f"æ³¢åŠ¨ç‡å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
        except Exception as e:
            logger.error(f"æ³¢åŠ¨ç‡å› å­è®¡ç®—å¤±è´¥: {e}")
            return pd.Series(index=stocks, dtype=float)
```
-->None, lookback_days: int = 60, **kwargs):
        super().__init__(jq_client=jq_client, **kwargs)
        self.lookback_days = lookback_days
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—æ³¢åŠ¨ç‡å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯")
        
        try:
            import jqdatasdk as jq
            
            if isinstance(date, str):
                date = datetime.strptime(date, "%Y-%m-%d")
            
            # è·å–å†å²ä»·æ ¼
            prices = jq.get_price(
                stocks,
                end_date=date,
                count=self.lookback_days + 5,
                fields=["close"],
                panel=False
            )
            
            if prices.empty:
                return pd.Series(index=stocks, dtype=float)
            
            volatility_dict = {}
            
            for stock in stocks:
                stock_prices = prices[prices["code"] == stock]["close"]
                
                if len(stock_prices) < 20:
                    volatility_dict[stock] = np.nan
                    continue
    <CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1_calculate_raw.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
class IlliquidityFactor(BaseFactor):
    """
    éæµåŠ¨æ€§å› å­ï¼ˆAmihud ILLIQï¼‰
    
    å…¬å¼: ILLIQ = |æ”¶ç›Šç‡| / æˆäº¤é¢
    
    ç»æµå­¦é€»è¾‘ï¼š
    - åæ˜ ä»·æ ¼å†²å‡»ç¨‹åº¦
    - é«˜ILLIQè¡¨ç¤ºæµåŠ¨æ€§å·®
    
    Aè‚¡å®è¯ï¼š
    - ä½éæµåŠ¨æ€§è‚¡ç¥¨è¡¨ç°æ›´å¥½
    - æ˜¯é‡è¦çš„æµåŠ¨æ€§æŒ‡æ ‡
    """
    
    name = "Illiquidity"
    category = "liquidity"
    description = "éæµåŠ¨æ€§å› å­"
    direction = -1  # éæµåŠ¨æ€§è¶Šä½è¶Šå¥½
    
    def calculate_raw(self, stocks: List[str], date: Union[str, datetime], **kwargs) -> pd.Series:
        """è®¡ç®—éæµåŠ¨æ€§å› å­"""
        if self.jq_client is None:
            raise ValueError("éœ€è¦JQDataå®¢æˆ·ç«¯")
        
        try:
            import jqdatasdk as jq
            
            if isinstance(date, str):
                date = datetime.strptime(date, "%Y-%m-%d")
            
            # è·å–å†å²ä»·æ ¼å’Œæˆäº¤é¢
            lookback_days = kwargs.get("lookback_days", 20)
            prices = jq.get_price(
                stocks,
                end_date=date,
                count=lookback_days + 5,
                fields=["close", "money"],
                panel=False
            )
            
            if prices.empty:
                return pd.Series(index=stocks, dtype=float)
            
            illiquidity_dict = {}
            
            for stock in stocks:
                stock_data = prices[prices["code"] == stock]
                
                if len(stock_data) < 10:
                    illiquidity_dict[stock] = np.nan
                    continue
                
                # è®¡ç®—æ—¥æ”¶ç›Šç‡
                returns = stock_data["close"].pct_change().dropna()
                
                # è®¡ç®—æˆäº¤é¢
                money = stock_data["money"].iloc[1:]  # å¯¹é½æ”¶ç›Šç‡
                
                # è®¡ç®—ILLIQï¼ˆå–å¹³å‡ï¼‰
                illiq = (abs(returns) / money).mean()
                
                # è´Ÿå·ï¼šä½éæµåŠ¨æ€§å¾—é«˜åˆ†
                illiquidity_dict[stock] = -illiq
            
            result = pd.Series(illiquidity_dict)
            logger.info(f"éæµåŠ¨æ€§å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
        except Exception as e:
            logger.error(f"éæµåŠ¨æ€§å› å­è®¡ç®—å¤±è´¥: {e}")
            r<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1__winsorize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def _winsorize(self, values: pd.Series, lower: float = 0.01, upper: float = 0.99) -> pd.Series:
    """
    å»æå€¼ï¼ˆWinsorizeï¼‰
    
    å°†å› å­å€¼é™åˆ¶åœ¨ä¸‹åˆ†ä½æ•°å’Œä¸Šåˆ†ä½æ•°ä¹‹é—´
    
    Args:
        values: å› å­å€¼
        lower: ä¸‹åˆ†ä½æ•°ï¼ˆé»˜è®¤1%ï¼‰
        upper: ä¸Šåˆ†ä½æ•°ï¼ˆé»˜è®¤99%ï¼‰
    
    Returns:
        å»æå€¼åçš„å› å­å€¼
    """
    lower_bound = values.<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1__standardize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def _standardize(self, values: pd.Series) -> pd.Series:
    """
    æ ‡å‡†åŒ–ï¼ˆZ-scoreï¼‰
    
    å…¬å¼: z = (x - Î¼) / Ïƒ
    
    Args:
        values: å› å­å€¼
    
    Returns:
        æ ‡å‡†åŒ–åçš„å› å­å€¼ï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰
    """
    mean = va<CodeFromFile 
  filePath="code_library/006_Chapter6_Factor_Library/6.1/code_6_1__neutralize.py"
  language="python"
  showDesignPrinciples="true"
/>

<!-- åŸå§‹ä»£ç ï¼ˆä¿ç•™ä½œä¸ºå¤‡ä»½ï¼‰ï¼š
```python
def _neutralize(self, values: pd.Series, stocks: List[str], date: Union[str, datetime]) -> pd.Series:
    """
    è¡Œä¸šä¸­æ€§åŒ–
    
    å°†å› å­å€¼å‡å»è¡Œä¸šå‡å€¼ï¼Œæ¶ˆé™¤è¡Œä¸šå› ç´ çš„å½±å“
    
    Args:
        values: å› å­å€¼
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
    
    Returns:
        ä¸­æ€§åŒ–åçš„å› å­å€¼
    """
    # è·å–è¡Œä¸šä¿¡æ¯
    industries = self._get_industries(stocks, date)
    
    # æŒ‰è¡Œä¸šåˆ†ç»„ï¼Œè®¡ç®—è¡Œä¸šå‡å€¼
    industry_means = {}
    for stock, industry in industries.items():
        if industry not in industry_means:
            industry_means[industry] = []
        if stock in values.index and not pd.isna(values[stock]):
            industry_means[industry].append(values[stock])
    
    # è®¡ç®—è¡Œä¸šå‡å€¼
    for industry in industry_means:
        industry_means[industry] = np.mean(industry_means[industry]) if industry_means[industry] else 0
    
    # ä¸­æ€§åŒ–ï¼šå‡å»è¡Œä¸šå‡å€¼
    neutralized = values.copy()
    for stock, industry in industries.items():
        if stock in neutralized.index and industry in industry_means:
            neutralized[stock] = neutralized[stock] - industry_means[industry]
    
    return neutralized
```
-->å¯¹é½æ”¶ç›Šç‡
                
                # è®¡ç®—ILLIQï¼ˆå–å¹³å‡ï¼‰
                illiq = (abs(returns) / money).mean()
                
                # è´Ÿå·ï¼šä½éæµåŠ¨æ€§å¾—é«˜åˆ†
                illiquidity_dict[stock] = -illiq
            
            result = pd.Series(illiquidity_dict)
            logger.info(f"éæµåŠ¨æ€§å› å­è®¡ç®—å®Œæˆ: æœ‰æ•ˆå€¼ {result.notna().sum()}/{len(stocks)}")
            return result
        
        except Exception as e:
            logger.error(f"éæµåŠ¨æ€§å› å­è®¡ç®—å¤±è´¥: {e}")
            return pd.Series(index=stocks, dtype=float)
```

<h2 id="section-6-1-10">ğŸ”„ 6.1.10 æ•°æ®é¢„å¤„ç†</h2>

æ•°æ®é¢„å¤„ç†æ˜¯å› å­è®¡ç®—çš„é‡è¦ç¯èŠ‚ï¼ŒåŒ…æ‹¬å»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–ã€‚

### å»æå€¼ï¼ˆWinsorizeï¼‰

å»æå€¼ç”¨äºå¤„ç†å¼‚å¸¸å€¼ï¼Œé¿å…æç«¯å€¼å½±å“å› å­åˆ†å¸ƒï¼š

```python
def _winsorize(self, values: pd.Series, lower: float = 0.01, upper: float = 0.99) -> pd.Series:
    """
    å»æå€¼ï¼ˆWinsorizeï¼‰
    
    å°†å› å­å€¼é™åˆ¶åœ¨ä¸‹åˆ†ä½æ•°å’Œä¸Šåˆ†ä½æ•°ä¹‹é—´
    
    Args:
        values: å› å­å€¼
        lower: ä¸‹åˆ†ä½æ•°ï¼ˆé»˜è®¤1%ï¼‰
        upper: ä¸Šåˆ†ä½æ•°ï¼ˆé»˜è®¤99%ï¼‰
    
    Returns:
        å»æå€¼åçš„å› å­å€¼
    """
    lower_bound = values.quantile(lower)
    upper_bound = values.quantile(upper)
    
    return values.clip(lower=lower_bound, upper=upper_bound)
```

### æ ‡å‡†åŒ–ï¼ˆStandardizeï¼‰

æ ‡å‡†åŒ–å°†å› å­å€¼è½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š

```python
def _standardize(self, values: pd.Series) -> pd.Series:
    """
    æ ‡å‡†åŒ–ï¼ˆZ-scoreï¼‰
    
    å…¬å¼: z = (x - Î¼) / Ïƒ
    
    Args:
        values: å› å­å€¼
    
    Returns:
        æ ‡å‡†åŒ–åçš„å› å­å€¼ï¼ˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1ï¼‰
    """
    mean = values.mean()
    std = values.std()
    
    if std == 0:
        return values - mean
    
    return (values - mean) / std
```

### è¡Œä¸šä¸­æ€§åŒ–ï¼ˆNeutralizeï¼‰

è¡Œä¸šä¸­æ€§åŒ–ç”¨äºæ¶ˆé™¤è¡Œä¸šå› ç´ çš„å½±å“ï¼š

```python
def _neutralize(self, values: pd.Series, stocks: List[str], date: Union[str, datetime]) -> pd.Series:
    """
    è¡Œä¸šä¸­æ€§åŒ–
    
    å°†å› å­å€¼å‡å»è¡Œä¸šå‡å€¼ï¼Œæ¶ˆé™¤è¡Œä¸šå› ç´ çš„å½±å“
    
    Args:
        values: å› å­å€¼
        stocks: è‚¡ç¥¨åˆ—è¡¨
        date: è®¡ç®—æ—¥æœŸ
    
    Returns:
        ä¸­æ€§åŒ–åçš„å› å­å€¼
    """
    # è·å–è¡Œä¸šä¿¡æ¯
    industries = self._get_industries(stocks, date)
    
    # æŒ‰è¡Œä¸šåˆ†ç»„ï¼Œè®¡ç®—è¡Œä¸šå‡å€¼
    industry_means = {}
    for stock, industry in industries.items():
        if industry not in industry_means:
            industry_means[industry] = []
        if stock in values.index and not pd.isna(values[stock]):
            industry_means[industry].append(values[stock])
    
    # è®¡ç®—è¡Œä¸šå‡å€¼
    for industry in industry_means:
        industry_means[industry] = np.mean(industry_means[industry]) if industry_means[industry] else 0
    
    # ä¸­æ€§åŒ–ï¼šå‡å»è¡Œä¸šå‡å€¼
    neutralized = values.copy()
    for stock, industry in industries.items():
        if stock in neutralized.index and industry in industry_means:
            neutralized[stock] = neutralized[stock] - industry_means[industry]
    
    return neutralized
```

## ğŸ”— ç›¸å…³ç« èŠ‚

- **ç¬¬2ç« ï¼šæ•°æ®æºæ¨¡å—** - äº†è§£æ•°æ®è·å–æœºåˆ¶ï¼Œä¸ºå› å­è®¡ç®—æä¾›æ•°æ®æ”¯æ’‘
- **ç¬¬3ç« ï¼šå¸‚åœºåˆ†ææ¨¡å—** - å¸‚åœºåˆ†æç»“æœç”¨äºå› å­æ¨è
- **ç¬¬4ç« ï¼šæŠ•èµ„ä¸»çº¿è¯†åˆ«** - ä¸»çº¿è¯†åˆ«ç»“æœç”¨äºå› å­æ¨è
- **ç¬¬5ç« ï¼šå€™é€‰æ± æ„å»º** - å€™é€‰æ± ç”¨äºå› å­è®¡ç®—
- **ç¬¬6ç« ï¼šå› å­åº“** - äº†è§£å› å­åº“æ¨¡å—çš„æ•´ä½“è®¾è®¡
- **ç¬¬6.2èŠ‚ï¼šå› å­ç®¡ç†** - å› å­è®¡ç®—ç»“æœç”¨äºå› å­ç®¡ç†
- **ç¬¬6.3èŠ‚ï¼šå› å­ä¼˜åŒ–** - å› å­è®¡ç®—ç»“æœç”¨äºå› å­ä¼˜åŒ–
- **ç¬¬7ç« ï¼šç­–ç•¥å¼€å‘** - å› å­ç”¨äºç­–ç•¥ç”Ÿæˆ
- **ç¬¬10ç« ï¼šå¼€å‘æŒ‡å—** - äº†è§£å› å­è®¡ç®—æ¨¡å—çš„å¼€å‘è§„èŒƒ

## ğŸ”® æ€»ç»“ä¸å±•æœ›

<div class="summary-outlook">
  <h3>æœ¬èŠ‚å›é¡¾</h3>
  <p>æœ¬èŠ‚ç³»ç»Ÿä»‹ç»äº†å› å­è®¡ç®—çš„æ ¸å¿ƒæœºåˆ¶ï¼ŒåŒ…æ‹¬å› å­åŸºç±»ï¼ˆBaseFactorï¼‰è®¾è®¡ã€å…«å¤§ç±»å› å­ï¼ˆä»·å€¼ã€æˆé•¿ã€è´¨é‡ã€åŠ¨é‡ã€èµ„é‡‘æµã€è§„æ¨¡ã€æ³¢åŠ¨ç‡ã€æµåŠ¨æ€§ï¼‰çš„è®¡ç®—æ–¹æ³•ã€æ•°æ®é¢„å¤„ç†ï¼ˆå»æå€¼ã€æ ‡å‡†åŒ–ã€è¡Œä¸šä¸­æ€§åŒ–ï¼‰å’Œå› å­ç»“æœï¼ˆFactorResultï¼‰ç”Ÿæˆã€‚é€šè¿‡ç†è§£å› å­åŸºç±»çš„æŠ½è±¡æ¥å£ã€å„ç±»å› å­çš„è®¡ç®—å…¬å¼å’Œå®ç°é€»è¾‘ã€æ•°æ®é¢„å¤„ç†çš„ä½œç”¨å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å› å­è®¡ç®—çš„æ ¸å¿ƒå®ç°ã€‚</p>
  
  <h3>ä¸‹èŠ‚é¢„å‘Š</h3>
  <p>æŒæ¡äº†å› å­è®¡ç®—æ–¹æ³•åï¼Œä¸‹ä¸€èŠ‚å°†ä»‹ç»å› å­ç®¡ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬å› å­æ³¨å†Œã€å› å­ç‰ˆæœ¬ç®¡ç†ã€å› å­å…ƒæ•°æ®ç®¡ç†å’Œå› å­å­˜å‚¨ï¼ˆMongoDB + æ–‡ä»¶å­˜å‚¨åŒæ¨¡å¼ï¼‰ã€‚é€šè¿‡ç†è§£å› å­ç®¡ç†å™¨çš„è®¾è®¡ã€å› å­ç±»æ˜ å°„ã€å› å­åˆ†ç±»ç®¡ç†ã€å› å­ç‰ˆæœ¬æ§åˆ¶ã€å› å­å…ƒæ•°æ®å®šä¹‰å’ŒæŸ¥è¯¢ï¼Œä»¥åŠå› å­å€¼çš„å­˜å‚¨å’Œæ£€ç´¢æœºåˆ¶ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡å› å­ç®¡ç†çš„æ ¸å¿ƒå®ç°ã€‚</p>
  
  <a href="/ashare-book6/006_Chapter6_Factor_Library/6.2_Factor_Management_CN" class="next-section">
    ç»§ç»­å­¦ä¹ ï¼š6.2 å› å­ç®¡ç† â†’
  </a>
</div>

> **é€‚ç”¨ç‰ˆæœ¬**: v1.0.0+  
> **æœ€åæ›´æ–°**: 2025-12-12
