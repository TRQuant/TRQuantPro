# GUIå¼€å‘å®ŒæˆæŠ¥å‘Š

> **å®Œæˆæ—¶é—´**: 2025-12-15
> **å¼€å‘å‘¨æœŸ**: 1å¤©

## ğŸ“‹ å·²å®Œæˆæ¨¡å—

### 1. MCPå®¢æˆ·ç«¯ç»Ÿä¸€å±‚ âœ…
**æ–‡ä»¶**: `core/mcp/client.py`

åŠŸèƒ½:
- åŒæ­¥/å¼‚æ­¥MCPå·¥å…·è°ƒç”¨
- æ‰¹é‡è°ƒç”¨æ”¯æŒ
- è¿›åº¦å›è°ƒæœºåˆ¶
- ç»“æœç¼“å­˜
- é”™è¯¯å¤„ç†
- ä»»åŠ¡ç®¡ç†

```python
from core.mcp import get_mcp_client

client = get_mcp_client()
result = client.call("backtest.bullettrade", {
    "strategy_path": "path/to/strategy.py",
    "start_date": "2024-01-01",
    "end_date": "2024-06-30"
}, on_progress=lambda p, msg: print(f"{p}%: {msg}"))
```

### 2. ç­–ç•¥ç®¡ç†é¢æ¿ âœ…
**æ–‡ä»¶**: `gui/widgets/strategy_manager_panel.py`

åŠŸèƒ½:
- ç­–ç•¥åº“æµè§ˆï¼ˆæŒ‰å¹³å°åˆ†ç±»ï¼‰
- ç­–ç•¥ä»£ç æŸ¥çœ‹
- ç­–ç•¥å‚æ•°é…ç½®
- ç­–ç•¥ç‰ˆæœ¬ç®¡ç†
- æ€§èƒ½è¿½è¸ªè®°å½•
- å³é”®èœå•æ“ä½œ

### 3. å›æµ‹è¿›åº¦é¢æ¿ âœ…
**æ–‡ä»¶**: `gui/widgets/backtest_progress_panel.py`

åŠŸèƒ½:
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- ä»»åŠ¡çŠ¶æ€ç›‘æ§
- æ—¥å¿—å®æ—¶è¾“å‡º
- å¤šä»»åŠ¡ç®¡ç†
- ç»“æœé¢„è§ˆæŒ‡æ ‡

### 4. å›æµ‹ç»“æœé¢æ¿ âœ…
**æ–‡ä»¶**: `gui/widgets/backtest_result_panel.py`

åŠŸèƒ½:
- ç»©æ•ˆæ¦‚è§ˆå¡ç‰‡
- æƒç›Šæ›²çº¿å›¾ï¼ˆåŸç”ŸPyQt6ç»˜åˆ¶ï¼‰
- æ”¶ç›Šåˆ†æ
- æŒä»“åˆ†æ
- äº¤æ˜“æ˜ç»†
- é£é™©åˆ†æ

### 5. æŠ¥å‘ŠæŸ¥çœ‹é¢æ¿ âœ…
**æ–‡ä»¶**: `gui/widgets/report_viewer_panel.py`

åŠŸèƒ½:
- æŠ¥å‘Šåˆ—è¡¨æµè§ˆ
- HTMLæŠ¥å‘Šé¢„è§ˆ
- æŠ¥å‘Šæœç´¢ç­›é€‰
- æµè§ˆå™¨æ‰“å¼€
- PDFå¯¼å‡ºï¼ˆå¾…å®Œå–„ï¼‰

### 6. ä¸»çª—å£V2 âœ…
**æ–‡ä»¶**: `gui/main_window_v2.py`

åŠŸèƒ½:
- ä¾§è¾¹æ å¯¼èˆª
- å¤šé¡µé¢åˆ‡æ¢
- æ·±è‰²ä¸»é¢˜
- çŠ¶æ€æ 
- ä¿¡å·è¿æ¥

## ğŸ“Š ä»£ç ç»Ÿè®¡

| æ–‡ä»¶ | è¡Œæ•° | åŠŸèƒ½ |
|-----|------|------|
| core/mcp/client.py | 574 | MCPå®¢æˆ·ç«¯ |
| strategy_manager_panel.py | 507 | ç­–ç•¥ç®¡ç† |
| backtest_progress_panel.py | 506 | å›æµ‹è¿›åº¦ |
| backtest_result_panel.py | 475 | ç»“æœå¯è§†åŒ– |
| report_viewer_panel.py | 413 | æŠ¥å‘ŠæŸ¥çœ‹ |
| main_window_v2.py | 478 | ä¸»çª—å£ |
| **æ€»è®¡** | **2953** | |

## ğŸ¨ UIè®¾è®¡ç‰¹ç‚¹

1. **æ·±è‰²ä¸»é¢˜**: ä¸“ä¸šé‡åŒ–é£æ ¼
2. **æ¸å˜è‰²å½©**: é’è‰²(#00d9ff)ä¸»é¢˜è‰²
3. **å¡ç‰‡å¼å¸ƒå±€**: æ¸…æ™°çš„ä¿¡æ¯å±•ç¤º
4. **å“åº”å¼è®¾è®¡**: å¯è°ƒæ•´åˆ†å‰²é¢æ¿
5. **å›¾è¡¨åŸç”Ÿç»˜åˆ¶**: æ— éœ€é¢å¤–å›¾è¡¨åº“

## ğŸ”— MCPè°ƒç”¨é›†æˆ

### æ”¯æŒçš„å·¥å…·æ˜ å°„

```python
TOOL_SERVER_MAP = {
    "backtest.bullettrade": "backtest-server",
    "backtest.qmt": "backtest-server",
    "optimizer.optuna": "optimizer-server",
    "factor.recommend": "factor-server",
    "workflow.run_step": "workflow-server",
    "report.generate": "report-server",
    # ... å…±33ä¸ªå·¥å…·
}
```

## ğŸš€ å¯åŠ¨æ–¹å¼

```bash
# å¯åŠ¨GUI
python -m gui.main_window_v2

# æˆ–è€…
cd TRQuant
python gui/main_window_v2.py
```

## ğŸ“ å¾…å®Œå–„åŠŸèƒ½

1. **TypeScript MCPå®¢æˆ·ç«¯å¢å¼º** - Cursoræ‰©å±•é›†æˆ
2. **PDFå¯¼å‡º** - æŠ¥å‘Šå¯¼å‡ºä¸ºPDF
3. **æŠ¥å‘Šå¯¹æ¯”** - å¤šç­–ç•¥å¯¹æ¯”åˆ†æ
4. **å®æ—¶æ•°æ®** - å®æ—¶è¡Œæƒ…å±•ç¤º
5. **è®¾ç½®é¡µé¢** - ç³»ç»Ÿé…ç½®ç•Œé¢

## ğŸ”§ æŠ€æœ¯æ ˆ

- **GUIæ¡†æ¶**: PyQt6
- **å›¾è¡¨**: åŸç”ŸQPainterç»˜åˆ¶
- **çº¿ç¨‹**: QThread + ThreadPoolExecutor
- **ç½‘ç»œ**: QWebEngineView (å¯é€‰)
- **æ ·å¼**: QSSæ·±è‰²ä¸»é¢˜

---

**å¼€å‘å®Œæˆï¼** ğŸ‰
